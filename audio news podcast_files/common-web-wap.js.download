function searchPopupCommon(){let searchBtns=document.querySelectorAll(".jsSearchbtn");searchBtns.forEach(searchBtn=>{searchBtn.addEventListener("click",function(e){function checkJquery(){if(typeof searchPopupNew==="function"){searchCallontouchclick(e,searchBtn)}else{window.setTimeout(checkJquery,200)}}checkJquery()},false)})}searchPopupCommon();function city_get_cookie(name){var nameEQ=name+"=";var ca=document.cookie.split(";");var new_ca=ca.length;for(var i=0;i<new_ca;i++){var c=ca[i];while(" "===c.charAt(0)){c=c.substring(1,c.length)}if(0===c.indexOf(nameEQ)){return c.substring(nameEQ.length,c.length)}}return null}function city_set_cookie(name,value,days){var expires="";if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1e3);expires="; expires="+date.toUTCString()}document.cookie=name+"="+(value||"")+expires+"; path=/"}function ucwords(str){return(str+"").replace(/^([a-z])|\s+([a-z])/g,function($1){return $1.toUpperCase()})}function change_cities_according_location(){var city_array=["delhi","mumbai","pune","chandigarh","lucknow","kolkata","ahmedabad","jaipur","chennai","bangalore","hyderabad"];var user_city=city_get_cookie("current_city_newname");var city_name="";if("undefined"===typeof user_city||null===user_city||""===user_city){var usergeolocation=sessionStorage.getItem("ua_geoip_location");var city_data=JSON.parse(usergeolocation);if(city_data!==null&&typeof city_data.city!=="undefined"){var city_name=city_data.city.toLowerCase();if("new delhi"===city_name){city_name="delhi"}else if("bengaluru"===city_name){city_name="bangalore"}else if(false===city_array.includes(city_name)){city_name="other city"}city_set_cookie("current_city_newname",city_name,15)}else{var city_name=""}var curr_url=window.location.hostname;if("indianexpress.com"==curr_url){api_domain_js="indianexpress.com/ua"}else{api_domain_js="devua.indianexpress.com"}if("object"==typeof api_domain&&false!==api_domain.hasOwnProperty("value")){api_domain_js=api_domain.value}if("indianexpress.com"===window.location.hostname){api_domain_js="indianexpress.com/ua"}if(null===city_name||""===city_name){const headers=new Headers;if("indianexpress.com/ua"===api_domain_js){headers.append("API-KEY","0355c2d801f6d0fee2f1977f14cc673d25d7335d2324f7e8a5db3bdfce04d0f5")}else{headers.append("origin","https://"+location.hostname)}requestObject={method:"GET",dataType:"json",headers:headers};fetch("https://"+api_domain_js+"/api/geoip/resolve",requestObject).then(response=>response.json()).then(response=>{if(null!==response&&"undefined"!==typeof response.city){sessionStorage.setItem("ua_geoip_location",JSON.stringify(response));var city_name=response.city.toLowerCase();if("new delhi"===city_name){city_name="delhi"}else if("bengaluru"===city_name){city_name="bangalore"}}else{var city_name="other city"}if(false===city_array.includes(city_name)){city_name="other city"}city_set_cookie("current_city_newname",city_name,15)})}else{city_set_cookie("current_city_newname",city_name,15)}user_city=city_name}if(null!==user_city&&""!==user_city&&"other city"!==user_city){if(document.querySelector(".custom_id_cities a")){var custom_city_name=document.querySelector(".custom_id_cities a");var newUrl=custom_city_name.href;if(null!==custom_city_name||""!==custom_city_name){custom_city_name.textContent=ucwords(user_city);var result=newUrl.indexOf("/"+user_city);if(-1===result){custom_city_name.href=custom_city_name.href+user_city+"/"}var srText=document.createElement("span");srText.className="screen-reader-text";srText.textContent=".Opens in new window";custom_city_name.appendChild(srText)}}}}if(document.readyState!=="loading"){change_cities_according_location()}else{document.addEventListener("DOMContentLoaded",function(){window.setTimeout(function(){change_cities_according_location()},2e3)})}const morelessButtons=document.querySelectorAll(".moreless-button");morelessButtons.forEach(button=>{button.addEventListener("click",function(){let readText="See More";let eventText="See More";const moretextContainer=document.querySelector(".o-moretext");moretextContainer.classList.toggle("show-more");readText=moretextContainer.classList.contains("show-more")?"See Less":"See More";eventText=moretextContainer.classList.contains("show-more")?"See More":"See Less";button.textContent=readText;button.classList.toggle("seeless-arrow");let anchor_id=button.getAttribute("data-event-category");let article_href=button.getAttribute("data-device");gtag("event",eventText,{eventCategory:anchor_id,eventLabel:article_href})})});const articleLinks=document.querySelectorAll(".o-story-num__title a");articleLinks.forEach(link=>{let anchor_id=link.getAttribute("data-event-category");let article_href=link.getAttribute("data-device");link.addEventListener("click",function(){gtag("event","Article Click",{eventCategory:anchor_id,eventLabel:article_href})})});if("undefined"!==typeof ie_webwap_variables&&"1"===ie_webwap_variables["is_desktop"]){function current_object_outer_height(cur_obj){try{var elementTop=cur_obj.offset().top;var elementBottom=elementTop+cur_obj.outerHeight();var viewportTop=jQuery(window).scrollTop();var viewportBottom=viewportTop+jQuery(window).height();return elementBottom>viewportTop&&elementTop<viewportBottom+500}catch(err){}}function ie_desk_iframe_lazy_load(){jQuery(".iframe-lazy").each(function(){var cur_obj=jQuery(this);if(current_object_outer_height(cur_obj)&&cur_obj.attr("data-src")){cur_obj.attr("src",cur_obj.attr("data-src"));cur_obj.removeAttr("data-src")}})}function checkandloadiframe(){if(window.jQuery){jQuery(document).ready(function($){$(window).scroll(function(){ie_desk_iframe_lazy_load()})})}else{setTimeout(checkandloadiframe,200)}}checkandloadiframe()}function set_education_result_cookie(cookieName,cookieValue){var expireDate=document.cookie.indexOf(cookieName)===-1?new Date((new Date).setTime((new Date).getTime()+1*24*60*60*1e3)):unescape(document.cookie).split("expireDate=")[1];document.cookie=cookieName+"="+cookieValue+",expireDate="+expireDate+";expires="+expireDate+"; path=/"}function get_education_result_cookie(cname){let name=cname+"=";let ca=document.cookie.split(";");let cale=ca.length;for(var i=0;i<cale;i++){var c=ca[i];while(" "===c.charAt(0)){c=c.substring(1)}if(0===c.indexOf(name)){return c.substring(name.length,c.length).split(",")[0]}}return 0}if("undefined"!==typeof ie_webwap_variables&&"1"===ie_webwap_variables.education_result_via_js&&!document.getElementById("liveblogstart")){if("education"===ie_webwap_variables.section_name){let cname="education_count";let cvalue=Number(get_education_result_cookie(cname))+1;let exdays=1;if(document.querySelector(".ev-meter-content > :nth-child(3)")&&document.body.classList.contains("single-article")){set_education_result_cookie(cname,cvalue,exdays)}if(cvalue>3){if(document.querySelector("center")){document.querySelector("center").style.display="none"}}else{inject_result_iframe()}}}function inject_result_iframe(){let website_url=window.location.host;let frame_url="indianexpress.com"===website_url?"https://results.indianexpress.com/widget/iframe?lang=1&amp;year=2022&amp;sourceDomain=1":"https://staging-results.xpresstechie.com/widget/iframe?lang=1&amp;year=2022&amp;sourceDomain=1";let device_name=document.getElementsByClassName("jsSearchbtn").length>0?"Desktop":document.getElementsByClassName("jsSearchbtn")[0].dataset.device;let center_class="Desktop"===device_name?"":"iframe-board-result";const center_node=document.createElement("center");center_node.setAttribute("class",center_class);const iframe_node=document.createElement("iframe");iframe_node.src=frame_url;iframe_node.width="Desktop"===device_name?"768":"640";iframe_node.height="Desktop"===device_name?"310":"430";iframe_node.sandbox="allow-scripts allow-forms allow-same-origin allow-popups";iframe_node.setAttribute("layout","responsive");iframe_node.frameBorder=0;iframe_node.id="cbr-base-register-iframe";center_node.append(iframe_node);if(document.querySelector(".ev-meter-content > :nth-child(3)")){document.querySelector(".ev-meter-content > :nth-child(3)").after(center_node)}}jQuery(".ie-share__icons .ss-icon .a-share-btn").on("click",function(){var share_url=jQuery(this).attr("data-href");window.open(share_url,"_blank")});jQuery(document).ready(function(){if(0<jQuery(".ie-more-author-section").length){jQuery(".ie-more-text").click(function(){jQuery(".ie-more-author-section").toggle()})}});let isOpinionArticle=document.body.classList.contains("ie_opinion_article");let isNewPoliticsArticle=document.body.classList.contains("ie_politics_article");let isBlockEditorArticle=document.body.classList.contains("ie_block_editor_article");let isfulldynamicArticle=document.body.classList.contains("ie_full_dynamic_template");if(true===isOpinionArticle||true===isNewPoliticsArticle||isBlockEditorArticle||isfulldynamicArticle){let shareIcon=document.querySelectorAll(".share-box .share-btn");let shareIconMobile=document.querySelectorAll(".share-article-btn .share-btn");let sharePopup=document.querySelector(".share-options");let shareCloseBtn=document.getElementById("share-Btn-close");let updatedText=document.querySelector(".arrowDown");let updatedDropDownText=document.querySelector(".updated-drop-text");let shareButtons=document.querySelectorAll(".a-share-btn");shareIcon.forEach(function(item){item.addEventListener("click",event=>{event.stopPropagation();event.preventDefault();let target=item.closest(".share-box");target.appendChild(sharePopup);sharePopup.classList.add("active")})});shareIconMobile.forEach(function(item){item.addEventListener("click",event=>{event.stopPropagation();event.preventDefault();let target=item.closest(".share-article-btn");target.appendChild(sharePopup);sharePopup.classList.add("active")})});if(shareCloseBtn){shareCloseBtn.addEventListener("click",function(event){this.parentElement.classList.remove("active")})}document.body.addEventListener("click",function(event){sharePopup.classList.remove("active")});if(shareButtons){shareButtons.forEach(function(button){button.addEventListener("click",function(event){event.preventDefault();let shareUrl=button.getAttribute("data-href");if(shareUrl){window.open(shareUrl,"_blank")}})})}if(updatedText){updatedText.addEventListener("click",()=>{updatedDropDownText.classList.toggle("active");updatedText.classList.toggle("active")})}}let isdefaultTemplate=document.body.classList.contains("single-format-standard");if(isdefaultTemplate){document.addEventListener("click",function(event){let shareBtn=event.target.closest(".share-box-n .share-btn");if(shareBtn){event.preventDefault();event.stopPropagation();let parentBox=shareBtn.closest(".share-box-n");document.querySelectorAll(".ie-new-social-rhs.active").forEach(popup=>{popup.classList.remove("active");let btn=popup.closest(".share-box-n")?.querySelector(".share-btn");if(btn){btn.setAttribute("aria-expanded","false")}});let popup=parentBox.querySelector(".ie-new-social-rhs");if(popup){popup.classList.add("active");shareBtn.setAttribute("aria-expanded","true")}return}let closeBtn=event.target.closest("#share-Btn-close-n");if(closeBtn){let popup=closeBtn.closest(".ie-new-social-rhs");if(popup){popup.classList.remove("active");let btn=popup.closest(".share-box-n")?.querySelector(".share-btn");if(btn){btn.setAttribute("aria-expanded","false")}}return}let shareLink=event.target.closest(".a-share-btn");if(shareLink){event.preventDefault();let shareUrl=shareLink.getAttribute("data-href");if(shareUrl){window.open(shareUrl,"_blank")}return}document.querySelectorAll(".ie-new-social-rhs.active").forEach(popup=>{popup.classList.remove("active");let btn=popup.closest(".share-box-n")?.querySelector(".share-btn");if(btn){btn.setAttribute("aria-expanded","false")}})})}setTimeout(function(){jQuery(".upsc-faq-list li h3").on("click",function(){jQuery(this).closest("li").find(".faq-text").slideToggle(100);jQuery(this).closest("li").toggleClass("active");jQuery(this).closest("li").siblings().removeClass("active");jQuery(this).closest("li").siblings().find(".faq-text").slideUp(100)})},1e3);
