var publisherProvidedId=null;var fireAnonymousMoengageEvent=false;var numAnonymousMoengageEvent=0;var moengageSessionNumber=0;var isEvolokLoggedIn=false;var evolokResponseGlobal={};var canViewStory;var scrollDepthFired=false;var curr_url=window.location.hostname;var recommendationWidgetShown=false;var globalSubscriberUser=false;var isUserGoogleSubscribed=false;linkedin_key="77dc1zvzq9gqak";articleType=false;if("undefined"!==typeof evolok_settings&&"undefined"!==typeof evolok_settings.extra_details&&"1"===evolok_settings.extra_details.live_site&&("indianexpress.com."==curr_url||"preprod.indianexpress.com."==curr_url||"prelaunch.indianexpress.com."==curr_url||"indian-express-develop.go-vip.net."==curr_url||"vipgo.indianexpress.com."==curr_url)){window.location="https://indianexpress.com/404.php"}if("indianexpress.com"==curr_url){ev_domain="ev.indianexpress.com";cookie_domain=".indianexpress.com";geo_api_domain="indianexpress.com/ua"}else if("preprod.indianexpress.com"==curr_url){ev_domain="ieo.uat.evolok.net";cookie_domain=".preprod.indianexpress.com";geo_api_domain="devua.indianexpress.com"}else if("prelaunch.indianexpress.com"==curr_url){ev_domain="ieo.uat.evolok.net";cookie_domain=".prelaunch.indianexpress.com";geo_api_domain="devua.indianexpress.com"}else if("indian-express-develop.go-vip.net"==curr_url){ev_domain="ieo.uat.evolok.net";cookie_domain=".indian-express-develop.go-vip.net";geo_api_domain="devua.indianexpress.com"}else{ev_domain="ieo.uat.evolok.net";cookie_domain=".vipgo.indianexpress.com";geo_api_domain="devua.indianexpress.com"}let isIncognitoMode=false;function checkincognito(){!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.detectIncognito=t():e.detectIncognito=t()}(this,function(){return function(){"use strict";var e={};return{598:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function c(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((o=o.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],o=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}};function r(){return n(this,void 0,Promise,function(){return o(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e,t){var n,o,r="Unknown";function i(t){e({isPrivate:t,browserName:r})}function a(e){return e===eval.toString().length}function c(){void 0!==navigator.maxTouchPoints?function(){var e=String(Math.random());try{window.indexedDB.open(e,1).onupgradeneeded=function(t){var n,o,r=null===(n=t.target)||void 0===n?void 0:n.result;try{r.createObjectStore("test",{autoIncrement:!0}).put(new Blob),i(!1)}catch(e){var a=e;return e instanceof Error&&(a=null!==(o=e.message)&&void 0!==o?o:e),"string"!=typeof a?void i(!1):void i(a.includes("BlobURLs are not yet supported"))}finally{r.close(),window.indexedDB.deleteDatabase(e)}}}catch(e){i(!1)}}():function(){var e=window.openDatabase,t=window.localStorage;try{e(null,null,null,null)}catch(e){return void i(!0)}try{t.setItem("test","1"),t.removeItem("test")}catch(e){return void i(!0)}i(!1)}()}function u(){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(e,t){var n;i(Math.round(t/1048576)<2*Math.round((void 0!==(n=window).performance&&void 0!==n.performance.memory&&void 0!==n.performance.memory.jsHeapSizeLimit?performance.memory.jsHeapSizeLimit:1073741824)/1048576))},function(e){t(new Error("detectIncognito somehow failed to query storage quota: "+e.message))})}function d(){void 0!==self.Promise&&void 0!==self.Promise.allSettled?u():(0,window.webkitRequestFileSystem)(0,1,function(){i(!1)},function(){i(!0)})}void 0!==(o=navigator.vendor)&&0===o.indexOf("Apple")&&a(37)?(r="Safari",c()):function(){var e=navigator.vendor;return void 0!==e&&0===e.indexOf("Google")&&a(33)}()?(n=navigator.userAgent,r=n.match(/Chrome/)?void 0!==navigator.brave?"Brave":n.match(/Edg/)?"Edge":n.match(/OPR/)?"Opera":"Chrome":"Chromium",d()):void 0!==document.documentElement&&void 0!==document.documentElement.style.MozAppearance&&a(37)?(r="Firefox",i(void 0===navigator.serviceWorker)):void 0!==navigator.msSaveBlob&&a(39)?(r="Internet Explorer",i(void 0===window.indexedDB)):t(new Error("detectIncognito cannot determine the browser"))})];case 1:return[2,e.sent()]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.detectIncognito=void 0,t.detectIncognito=r,"undefined"!=typeof window&&(window.detectIncognito=r),t.default=r}}[598](0,e),e=e.default}()});detectIncognito().then(result=>{if("undefined"!==typeof result&&"undefined"!==typeof result.isPrivate&&true===result.isPrivate&&"undefined"!==typeof evolok_settings&&"undefined"!==typeof evolok_settings.extra_details&&"1"===evolok_settings.extra_details.is_article){let ie_user_type=ev_getCookie("ev_user_state");let premium_value=custom_ev_data.premium;let premium_paywall_value=custom_ev_data.premium_paywall;let article_category=custom_ev_data.category;let article_authors=custom_ev_data.authors;custom_ev_data.premium="true";custom_ev_data.premium_paywall="true";custom_ev_data.category="";custom_ev_data.authors="";if("undefined"!==typeof ie_user_type&&"subscriber"===ie_user_type){custom_ev_data.premium=premium_value;custom_ev_data.premium_paywall=premium_paywall_value;custom_ev_data.category=article_category;custom_ev_data.authors=article_authors}isIncognitoMode=true;setTimeout(function(){if(0<jQuery("#ie_incognito_wall").length){jQuery("#ie_incognito_wall").removeClass("ie-hide")}if(0<jQuery(".ie_incognito_text_to_hide").length){jQuery(".ie_incognito_text_to_hide").addClass("ie-hide")}},3e3);let readmoreBtns=document.querySelectorAll(".readmore-btn");let storyDetails=document.querySelectorAll(".story_details");if(readmoreBtns&&storyDetails){readmoreBtns.forEach(function(btn){btn.style.display="none"});storyDetails.forEach(function(detail){detail.classList.remove("show-article-content")})}}})}if("undefined"!==typeof evolok_settings&&"undefined"!==typeof evolok_settings.extra_details&&"1"===evolok_settings.extra_details.enable_incognito_mode){checkincognito()}if("undefined"!==typeof custom_ev_data&&"undefined"!==typeof custom_ev_data.is_single_story&&"1"===custom_ev_data.is_single_story){var accessAllowed}EV.Dab.init();let adBlockDetection=EV.Dab.isAdblockDetected();let detectPrivateMode=EV.Dab.detectPrivateMode();EV.Em.init({icDomain:ev_domain+"/ic/api",channel:"login-widget",realmName:"default_realm",serviceName:"login",url:"https://"+ev_domain+"/acd/api/3.0",sidCookieDomain:cookie_domain,brand:"IndianExpress",ssoCookieDomain:cookie_domain,enableGoogleOneTap:true,autoLinkLoginRedirectUrl:"https://"+curr_url+"/login/",autoLinkLoginRedirectAutomatic:false,authSchemeName:"default",googleClientId:"1037042905408-ekkpnmd8vrd1ekhner26k4h7c0ph9b9c.apps.googleusercontent.com",socialAttributeMapping:{email_address:"email",first_name:"firstName",last_name:"lastName"},secureModeEnabled:false,disableCookies:false,autoRegister:true,autoPopulate:true,enableSeamlessMode:false});EV.Em.on(EV.Em.Event.SOCIAL_LOGIN_SUCCESS,function(event){let result=event.detail.response;var ev_profile_lcs=localStorage.getItem("evolok:ev_session");if(null===ev_profile_lcs){localStorage.setItem("evolok:ev_session",JSON.stringify(result))}var ev_profile_lcs=localStorage.getItem("evolok:ev_session");if(null===ev_profile_lcs){localStorage.setItem("evolok:ev_session",JSON.stringify(result))}var dataResult=result;var date=new Date;if(dataResult.hasOwnProperty("mainSession")){date.setTime(dataResult.mainSession.expiry);var cookieValue="ev_ss="+dataResult.mainSession.sessionId+"; expires="+date.toGMTString()+"; path=/";cookieValue+="; domain="+window.cookie_domain;document.cookie=cookieValue}if(dataResult.hasOwnProperty("secureSession")){date.setTime(dataResult.secureSession.expiry);var cookieValue="ex_ss="+dataResult.secureSession.sessionId+"; expires="+date.toGMTString()+"; path=/";cookieValue+="; domain="+window.cookie_domain;document.cookie=cookieValue}location.reload()});EV.Em.on(EV.Em.Event.SOCIAL_LOGIN_FAILED,function(event){let error=event.detail;var result=confirm("Your account already exists so you need to log-in with email and password to link Google to your existing account.");sessionStorage.removeItem("google_one_tap_attempted");if(result==true){location.href="https://"+curr_url+"/login/"}});geo_var="";geo_city="";geo_state="";ev_channel="";GoogleShowcase="false";var ev_channel=ev_getCookie("channel");if("undefined"===typeof ev_channel||""===ev_channel){ev_channel="WEB"}var metering_userdata="";var usergeolocation=sessionStorage.getItem("ua_geoip_location");var geo_data=jQuery.parseJSON(usergeolocation);if(geo_data!==null&&typeof geo_data.countryIsoCode!=="undefined"&&typeof geo_data.state!=="undefined"&&geo_data.state!==null&&typeof geo_data.city!=="undefined"&&geo_data.city!==null){geo_var=geo_data.countryIsoCode.toLowerCase();geo_city=geo_data.city.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-");geo_state=geo_data.state.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")}if(null===geo_var||""===geo_var||null===geo_city||""===geo_city||null===geo_state||""===geo_state){jQuery.ajax({url:"https://"+geo_api_domain+"/api/geoip/resolve",type:"GET",dataType:"json",beforeSend:function(xhr){if("indianexpress.com/ua"===geo_api_domain){xhr.setRequestHeader("API-KEY","0355c2d801f6d0fee2f1977f14cc673d25d7335d2324f7e8a5db3bdfce04d0f5")}else{xhr.setRequestHeader("origin","https://"+location.hostname)}},success:function(response){if(response!==null&&typeof response.countryIsoCode!=="undefined"&&typeof response.state!=="undefined"&&response.state!==null&&typeof response.city!=="undefined"&&response.city!==null){var geo_var=response.countryIsoCode.toLowerCase();var geo_city=response.city.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-");var geo_state=response.state.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-");sessionStorage.setItem("ua_geoip_location",JSON.stringify(response))}do_metering(custom_ev_data,geo_var,geo_city,geo_state)}})}else{do_metering(custom_ev_data,geo_var,geo_city,geo_state)}function ev_getCookie(c_name){var i,x,y,ARRcookies=document.cookie.split(";");var arr_length=ARRcookies.length;for(i=0;i<arr_length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x===c_name){return unescape(y)}}}function ev_setCookie(cname,cvalue,exdays,isDomain=""){var d=new Date;d.setTime(d.getTime()+exdays*24*60*60*1e3);var expires="expires="+d.toUTCString();if(""===isDomain){document.cookie=cname+"="+cvalue+";"+expires+";path=/"}else{document.cookie=cname+"="+cvalue+";"+expires+";domain="+isDomain+";path=/"}}function do_metering(custom_ev_data,geo_var,geo_city,geo_state){if("undefined"!==typeof custom_ev_data){Promise.all([adBlockDetection,detectPrivateMode]).then(values=>{var params=JSON.stringify({articleId:custom_ev_data.articleId,site:custom_ev_data.site,title:custom_ev_data.title,publishDate:custom_ev_data.publish_date,updateDate:custom_ev_data.update_date,authors:custom_ev_data.authors,category:custom_ev_data.category,section:custom_ev_data.section,section_page:custom_ev_data.section_page,tags:custom_ev_data.tags,count_metering:custom_ev_data.count_metering,premium:custom_ev_data.premium,premium_paywall:custom_ev_data.premium_paywall,paid_after_date:custom_ev_data.paid_after_date,paid_after_date_ist:custom_ev_data.paid_after_date_ist,paid_till_date:custom_ev_data.paid_till_date,paid_till_date_ist:custom_ev_data.paid_till_date_ist,no_of_paragraph:custom_ev_data.no_of_paragraph,geo:geo_var,geocity:geo_city,geostate:geo_state,channel:ev_channel,GoogleShowcase:GoogleShowcase,adblock:values[0],incognito:values[1]});EV.Em.authorize(params,handleMeteringSuccess,handleMeteringError)})}}function handleMeteringSuccess(response){metering_userdata=response.userProperties;var user_state="guest";var sub_segments=response.hasOwnProperty("segments")?response.segments:[];var plan_types=[];var entitlement=[];var plan_details={};canViewStory=true;if((sub_segments.indexOf("Digital Subscriber")!=-1||sub_segments.indexOf("E-Paper Subscriber")!=-1)&&sub_segments.indexOf("Logged-In")!=-1){user_state="subscriber"}else if(sub_segments.indexOf("Not Active Subscriber")!=-1&&sub_segments.indexOf("Logged-In")!=-1){user_state="registered"}if(sub_segments.indexOf("Digital Subscriber")!=-1&&sub_segments.indexOf("E-Paper Subscriber")!=-1){plan_types=["Digital Subscriber","E-Paper Subscriber"]}else if(sub_segments.indexOf("Digital Subscriber")!=-1){plan_types=["Digital Subscriber"]}else if(sub_segments.indexOf("E-Paper Subscriber")!=-1){plan_types=["E-Paper Subscriber"]}if("undefined"!==typeof custom_ev_data&&"undefined"!==typeof custom_ev_data.current_page_url&&custom_ev_data.current_page_url.includes("/article/upsc-current-affairs/")){if(response.result==="ALLOW_ACCESS"){let sub_cookie=ev_getCookie("user_subscription_details");if("undefined"!==typeof sub_cookie&&""!==sub_cookie){var subscriber_details=jQuery.parseJSON(sub_cookie);if("undefined"!==typeof subscriber_details.is_upsc&&false===subscriber_details.is_upsc){response.result="REQUIRE_ENTITLEMENT";jQuery(".ev-meter-content").hide()}}}}let ev_check_cookie=ev_getCookie("ie_userdata");let ie_user_status=ev_getCookie("ev_user_state");var entitlement=[];if("undefined"!==typeof ev_check_cookie&&"REQUIRE_LOGIN"!==response.result){ev_check_cookie=JSON.parse(ev_check_cookie);if(true===ev_check_cookie.requireEntitlement){entitlement=ev_check_cookie.requireEntitlement}}else{if(response.hasOwnProperty("offeredMeter")&&"REQUIRE_LOGIN"===response.result){entitlement=response.requireEntitlement;canViewStory=false}else{entitlement=true}}plan_details={subscription_plan:plan_types,requireEntitlement:entitlement};plan_details=JSON.stringify(plan_details);if("undefined"!==typeof custom_ev_data&&"undefined"!==typeof custom_ev_data.enable_evolok_plan_cookie&&"1"===custom_ev_data.enable_evolok_plan_cookie){ev_setCookie("ie_userdata",plan_details,365);hide_jetpack_most_read(plan_details);ieHideTaboolaFromPage(plan_details)}if("undefined"!==typeof ie_ev_set_moengage_confirm_pay_event&&"undefined"!==typeof ie_ev_set_moengage_games_event){ie_ev_set_moengage_confirm_pay_event(user_state,plan_types,metering_userdata);ie_ev_set_moengage_games_event(user_state,plan_types,metering_userdata)}ev_setCookie("ev_user_state",user_state,365);if(document.location.pathname.endsWith("/login/")&&response.hasOwnProperty("loggedOut")&&!response.loggedOut){window.location="/my-account/"}if(document.location.pathname.endsWith("/subscribe/")&&sub_segments.indexOf("Not Active Subscriber")===-1&&(sub_segments.indexOf("Digital Subscriber")!=-1||sub_segments.indexOf("E-Paper Subscriber")!=-1)){if(document.referrer.indexOf("/subscriptions/")<0){window.location="/express-plus/today-newsstand/"}}if("REQUIRE_LOGIN"===response.result&&"true"===custom_ev_data.premium){articleType="datawall";if("undefined"!==typeof custom_ev_data&&"undefined"!==typeof custom_ev_data.premium_paywall&&"true"===custom_ev_data.premium_paywall){articleType="paywall"}if(jQuery.isFunction(window.event_api_integration)){canViewStory=false;event_api_integration("widget_appear","","premium_paywall")}}if("REQUIRE_LOGIN"===response.result&&"undefined"!==typeof custom_ev_data||"REQUIRE_ENTITLEMENT"===response.result&&"undefined"!==typeof custom_ev_data){canViewStory=false;if(jQuery("#pcl-full-content > p").length<=2&&jQuery(".ev-meter-content > p")==0){custom_ev_data.no_of_paragraph=0}else if(jQuery("#pcl-full-content > p").length===1&&jQuery(".ev-meter-content blockquote").length!==0){custom_ev_data.no_of_paragraph=1}jQuery("#pcl-full-content p,.full-details p,.shows-details p,.podcast-article p").eq(custom_ev_data.no_of_paragraph-1).addClass("first_intro_para");let readmoreBtns=document.querySelectorAll(".readmore-btn");let storyDetails=document.querySelectorAll(".story_details");if(readmoreBtns&&storyDetails){readmoreBtns.forEach(function(btn){btn.style.display="none"});storyDetails.forEach(function(detail){detail.classList.remove("show-article-content")})}}else{jQuery("#pcl-full-content p,.full-details p,.shows-details p,.podcast-article p").eq(custom_ev_data.no_of_paragraph-1).addClass("no_first_intro_para")}if(response.hasOwnProperty("offeredMeter")&&"REQUIRE_LOGIN"===response.result){var metering_info=response.offeredMeter;var post_count=metering_info.count;var max_count=metering_info.max;if(0===post_count){if(jQuery.isFunction(window.event_api_integration)){canViewStory=false;event_api_integration("widget_appear","exhausted_monthly_limit","datawall")}}}if("undefined"!==typeof ev_getCookie("ev_user_state")&&"subscriber"!==ev_getCookie("ev_user_state")&&"true"===custom_ev_data.premium){var currentdate=new Date;var nowDate=currentdate.getFullYear()+"-"+(currentdate.getMonth()+1)+"-"+currentdate.getDate()+" "+ +currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds();var currentDate=new Date(nowDate);var minutesInDay=60*1e3;if(""!==custom_ev_data.paid_after_date_ist){var afterDate=new Date(custom_ev_data.paid_after_date_ist);var diffBetween=afterDate.getTime()-currentDate.getTime();var aXdifInMin=diffBetween/minutesInDay;if(""!==aXdifInMin&&0<aXdifInMin){jQuery(".ie-premium").hide();jQuery(".ie-story-paid-timer.after-timer").css({"border-left":"none",padding:"0",margin:"none"})}}if(""!==custom_ev_data.paid_till_date_ist){var tillDate=new Date(custom_ev_data.paid_till_date_ist);var diffBetween=tillDate.getTime()-currentDate.getTime();var tXdifInMin=diffBetween/minutesInDay;if(0>=tXdifInMin){jQuery(".ie-premium").hide();jQuery(".story-premium").css({height:"18px"})}}}if(jQuery("#evnav_subscribe").length>0){if(response.hasOwnProperty("loggedOut")&&!response.loggedOut&&(sub_segments.indexOf("Not Active Subscriber")!=-1&&sub_segments.indexOf("Logged-In")!=-1)){console.log("Menu - Registered User");let ev_check_entitlement=ev_getCookie("ie_userdata");if(null!==ev_check_entitlement&&""!==ie_user_status){ev_check_entitlement=JSON.parse(ev_check_entitlement);if(jQuery.isFunction(window.event_api_integration)){if(true===ev_check_entitlement.requireEntitlement){event_api_integration("register","success","premium_paywall")}else{event_api_integration("register","success","datawall")}}}jQuery("#evnav_subscribe").attr("href","/subscribe/");jQuery("#evnav_subscribe").html('<span class="tnav-txt m-sup-new m-sup-btn on-header">Subscribe</span>');jQuery("#evnav_subscribe").removeClass("evsubscribe");jQuery("#evnav_subscribe").addClass("evepaper");jQuery(".ie-subscribe").css("display","block");jQuery("#evnav_login").attr("href","/my-account/");jQuery("#evnav_login").html("My Account");jQuery("#evnav_login").addClass("evusrlogin");jQuery("#evnav_login").removeClass("evusrlogout");jQuery("#demo-modal-target-subscribe").removeClass("ie-subscribe");jQuery("#demo-modal-target-subscribe").addClass("m-evepaper")}else if(response.hasOwnProperty("loggedOut")&&!response.loggedOut&&(sub_segments.indexOf("Digital Subscriber")!=-1||sub_segments.indexOf("E-Paper Subscriber")!=-1||sub_segments.indexOf("WasSubscriber")!=-1)){var menu_text="Subscribe";var menu_clss="no-epaper-icon";var menu_clss2="evepaper";var menu_link="/express-plus/today-newsstand/";var renew_evnt="";if(response.hasOwnProperty("loggedOut")&&!response.loggedOut&&sub_segments.indexOf("E-Paper Subscriber")!=-1){menu_text="Epaper";menu_clss="epaper-icon"}if(sub_segments.indexOf("Pre Renew")!=-1){menu_text="Renew";menu_link="/subscriptions/";renew_evnt="renew-buttons-tracking"}console.log("Menu - Subscribed User");let ev_check_entitlement=ev_getCookie("ie_userdata");if(null!==ev_check_entitlement&&""!==ie_user_status){ev_check_entitlement=JSON.parse(ev_check_entitlement);if(jQuery.isFunction(window.event_api_integration)){if(true===ev_check_entitlement.requireEntitlement){event_api_integration("signin","success","premium_paywall")}else{event_api_integration("signin","success","datawall")}}}jQuery("#top-band-mobile").hide();jQuery(".body-top-gap").removeClass("body-top-gap-bind");jQuery("#evnav_subscribe").attr("href",menu_link);jQuery("#evnav_subscribe").text(menu_text);jQuery("#evnav_subscribe").removeClass("evsubscribe");jQuery("#evnav_subscribe").addClass(menu_clss2);jQuery("#evnav_subscribe").addClass(renew_evnt);jQuery(".ie-subscribe").css("display","block");jQuery("#evnav_login").attr("href","/my-account/");jQuery("#evnav_login").html("My Account");jQuery("#evnav_login").addClass("evusrlogin");jQuery("#evnav_login").removeClass("evusrlogout");jQuery("#demo-modal-target-subscribe").removeClass("ie-subscribe");jQuery("#demo-modal-target-subscribe").addClass("m-evepaper");jQuery("#demo-modal-target-subscribe").addClass(menu_clss)}else{console.log("nav Menu - Logged out");jQuery("#evnav_subscribe").attr("href","/subscribe/");jQuery("#evnav_subscribe").html('<span class="tnav-txt m-sup-new m-sup-btn on-header">Subscribe</span>');jQuery("#evnav_subscribe").addClass("evsubscribe");jQuery("#evnav_subscribe").removeClass("evepaper");jQuery("#evnav_login").attr("href","/login/");jQuery("#evnav_login").html("Sign In");jQuery("#evnav_login").removeClass("evusrlogin");jQuery("#evnav_login").addClass("evusrlogout");jQuery("#demo-modal-target-subscribe").addClass("ie-subscribe");jQuery("#demo-modal-target-subscribe").removeClass("m-evepaper")}}if(jQuery("#evnav_subscribe_ham").length>0){var sub_segments=response.hasOwnProperty("segments")?response.segments:[];if(response.hasOwnProperty("loggedOut")&&!response.loggedOut&&(sub_segments.indexOf("Not Active Subscriber")!=-1&&sub_segments.indexOf("Logged-In")!=-1)){console.log("Ham Menu - Registered User");if("undefined"!==typeof response.result&&"REQUIRE_ENTITLEMENT"===response.result&&"undefined"!==typeof response.exceededMeter&&"undefined"!==typeof response.exceededMeter.count&&"undefined"!==typeof response.exceededMeter.max&&response.exceededMeter.count===response.exceededMeter.max){var storyType="Premium_Limit_Exhaust"}let ev_check_entitlement=ev_getCookie("ie_userdata");if(null!==ev_check_entitlement&&""!==ie_user_status){ev_check_entitlement=JSON.parse(ev_check_entitlement);if(jQuery.isFunction(window.event_api_integration)){if(true===ev_check_entitlement.requireEntitlement){event_api_integration("register","success","premium_paywall")}else{event_api_integration("register","success")}}}var subscribe_link="/subscribe/";var subscribe_text="Subscribe";if("undefined"!==typeof subscribe_buttons){subscribe_link=subscribe_buttons.buttons_link;subscribe_text=subscribe_buttons.buttons_text}jQuery("#evnav_subscribe_ham").html('<span class="ie-subsribe tnav-txt subscribe-links-new m-sup-new m-sup-btn">Subscribe</span>');jQuery("#evnav_subscribe_ham span").text("");jQuery("#evnav_subscribe_ham span").append(document.createTextNode(subscribe_text));jQuery("#evnav_subscribe_ham").attr("href",subscribe_link);jQuery("#evnav_subscribe_ham").addClass("evham_epaper");jQuery("#evnav_subscribe_ham").removeClass("evham_subscribe");jQuery("#evnav_subscribe_ham").removeClass("evham_subscribe");jQuery("#evnav_subscribe_ham").removeClass("ie_theme_hide_ele");jQuery("#evnav_login_ham,.evnav_login_ham").html("My Account");jQuery("#evnav_login_ham,.evnav_login_ham").attr("href","/my-account/");jQuery("#evnav_login_ham,.evnav_login_ham").addClass("evham_signin");jQuery("#evnav_login_ham,.evnav_login_ham").addClass("t-headlink__signin");jQuery("#evnav_login_ham,.evnav_login_ham").removeClass("evham_signout");if(0<jQuery(".ie-user-displayname").length){var userDetails=ev_getCookie("oauth_user");var displayName="";var userSpan=jQuery("<span />");userSpan.attr("class","ie-loggedin-user");if("undefined"!==typeof userDetails){userDetails=JSON.parse(userDetails);if("undefined"!==typeof userDetails.user_first_name&&""!==userDetails.user_first_name){displayName=userDetails.user_first_name}if("undefined"!==typeof userDetails.user_last_name&&""!==userDetails.user_last_name){displayName=displayName+" "+userDetails.user_last_name}jQuery(".ie-signin-text").remove();jQuery(".ie-user-displayname").text("");if(""!==displayName){jQuery(".ie-user-displayname").append(displayName);jQuery(".ie-user-displayname").append(userSpan)}jQuery(".ie-user-displayname").append(userSpan)}}jQuery(".ev_hide_link").removeClass("ev_hide_link");if(sub_segments.indexOf("WasSubscriber")!=-1){jQuery("#evnav_subscribe_ham .tnav-txt").text("Renew");jQuery("#evnav_subscribe_ham").addClass("renew-plan");jQuery("#evnav_subscribe_ham").attr("href","/subscribe/")}}else if(response.hasOwnProperty("loggedOut")&&!response.loggedOut&&(sub_segments.indexOf("Digital Subscriber")!=-1||sub_segments.indexOf("E-Paper Subscriber")!=-1||sub_segments.indexOf("WasSubscriber")!=-1)){var menu_text="Subscribe";var menu_clss="no-epaper-ham-icon";var menu_clss2="";var menu_link="/express-plus/today-newsstand/";var renew_evnt="";if(response.hasOwnProperty("loggedOut")&&!response.loggedOut&&sub_segments.indexOf("E-Paper Subscriber")!=-1){menu_text="Epaper";menu_clss="epaper-ham-icon";menu_clss2=""}if(sub_segments.indexOf("Pre Renew")!=-1){menu_text="Renew";menu_link="/subscriptions/";renew_evnt="renew-buttons-tracking"}console.log("Ham Menu - Subscribed User");let ev_check_entitlement=ev_getCookie("ie_userdata");if(null!==ev_check_entitlement&&""!==ie_user_status){ev_check_entitlement=JSON.parse(ev_check_entitlement);if(jQuery.isFunction(window.event_api_integration)){if(true===ev_check_entitlement.requireEntitlement){event_api_integration("signin","success","premium_paywall")}else{event_api_integration("signin","success","datawall")}}}if(sub_segments.indexOf("Pre Renew")!=-1){jQuery("#top-band-mobile").hide()}else{jQuery("#top-band-mobile,#evnav_subscribe_ham").hide()}jQuery(".body-top-gap").removeClass("body-top-gap-bind");jQuery("#evnav_subscribe_ham .tnav-txt").html("Epaper");jQuery("#evnav_subscribe_ham .tnav-txt").text(menu_text);jQuery("#evnav_subscribe_ham,#evnav_subscribe_ham .epaperlink.show-subscribebtn").attr("href",menu_link);jQuery("#evnav_subscribe_ham").addClass("evham_epaper");jQuery("#evnav_subscribe_ham").removeClass("evham_subscribe");jQuery("#evnav_subscribe_ham").removeClass("ie_theme_hide_ele");jQuery("#evnav_login_ham,.evnav_login_ham").html("My Account");jQuery("#evnav_login_ham,.evnav_login_ham").attr("href","/my-account/");jQuery("#evnav_login_ham,.evnav_login_ham").addClass("evham_signin");jQuery("#evnav_login_ham,.evnav_login_ham").addClass("t-headlink__signin");jQuery("#evnav_login_ham,.evnav_login_ham").removeClass("evham_signout");if(0<jQuery(".ie-user-displayname").length){var userDetails=ev_getCookie("oauth_user");var displayName="";var userSpan=jQuery("<span />");userSpan.attr("class","ie-loggedin-user");if("undefined"!==typeof userDetails){userDetails=JSON.parse(userDetails);if("undefined"!==typeof userDetails.user_first_name&&""!==userDetails.user_first_name){displayName=userDetails.user_first_name}if("undefined"!==typeof userDetails.user_last_name&&""!==userDetails.user_last_name){displayName=displayName+" "+userDetails.user_last_name}jQuery(".ie-signin-text").remove();jQuery(".ie-user-displayname").text("");if(""!==displayName){jQuery(".ie-user-displayname").append(displayName);jQuery(".ie-user-displayname").append(userSpan)}jQuery(".ie-user-displayname").append(userSpan)}}jQuery("#evnav_subscribe_ham .m-sup").hide();jQuery("#evnav_subscribe_ham .tnav-txt").addClass("evonly-subscriber");jQuery("#evnav_subscribe_ham .tnav-txt").addClass(menu_clss);jQuery("#evnav_subscribe_ham").addClass(renew_evnt);jQuery("#evnav_subscribe_ham .tnav-txt").removeClass("m-sup-new");jQuery("#evnav_subscribe_ham .tnav-txt").removeClass("m-sup-btn");jQuery("#evnav_subscribe_ham .tnav-txt").addClass(menu_clss2);jQuery(".ev_hide_link").removeClass("ev_hide_link");jQuery("#widget_subscribe_button, .subscriber_hide").hide();if(window.location.href.includes("/about/express-premium")){var premiumElement=jQuery("#premium-subscribe");if(premiumElement.length){premiumElement.remove()}}}else{var subscribe_link="/subscribe/";if("undefined"!==typeof subscribe_buttons){subscribe_link=subscribe_buttons.buttons_link}console.log("Ham Menu - Logged out");jQuery("#evnav_subscribe_ham").attr("href",subscribe_link);jQuery("#evnav_subscribe_ham").removeClass("evham_epaper");jQuery("#evnav_subscribe_ham").addClass("evham_subscribe");jQuery("#evnav_login_ham").html("Sign In");jQuery("#evnav_login_ham").attr("href","/login/");jQuery("#evnav_login_ham").removeClass("evham_sign");jQuery("#evnav_login_ham").addClass("evham_signout");jQuery(".ie_theme_hide_ele").show();jQuery(".ev_hide_link").removeClass("ev_hide_link")}}if("undefined"!==response.result&&"undefined"!==response.segments&&("REQUIRE_LOGIN"===response.result||"REQUIRE_ENTITLEMENT"===response.result)){if("undefined"!==typeof chartbeat){canViewStory=false;chartbeat("trackPaywallShown",{eventLabel:"A Paywall shown to the user",debug:true})}}if("undefined"!==typeof response.result&&response.result==="ALLOW_ACCESS"){canViewStory=true}else if(response.requireEntitlement){if(typeof displayRequireLoginWithEntitlementPaywall==="function"){canViewStory=false;displayRequireLoginWithEntitlementPaywall()}}else{if("undefined"!==typeof response.result&&"REQUIRE_LOGIN"===response.result&&"undefined"!==typeof response.exceededMeter&&"undefined"!==typeof response.exceededMeter.count&&"undefined"!==typeof response.exceededMeter.max&&response.exceededMeter.count===response.exceededMeter.max){canViewStory=false;var storyType="Datawall_Limit_Exhaust"}else{}}if("undefined"!==typeof custom_ev_data&&"undefined"!==typeof custom_ev_data.is_single_story&&"1"===custom_ev_data.is_single_story){if(true===canViewStory){accessAllowed=true}else{accessAllowed=false}}if(0<jQuery(".new-hm-user-wrap").length){if(response.hasOwnProperty("loggedOut")&&!response.loggedOut){var userDetails=ev_getCookie("oauth_user");var displayName="";var displayFirstname="";var firstFirstLetter="";if("undefined"!==typeof userDetails){userDetails=JSON.parse(userDetails);if("undefined"!==typeof userDetails.user_first_name&&""!==userDetails.user_first_name){displayName=userDetails.user_first_name;displayFirstname=userDetails.user_first_name;firstFirstLetter=displayFirstname.charAt(0);jQuery(".new-hm-user-wrap #evnav_login_ham").text("");if(""!==firstFirstLetter){jQuery(".new-hm-user-wrap #evnav_login_ham").append(firstFirstLetter);jQuery(".new-hm-user-wrap a#evnav_login_ham").removeClass("evham_signout");jQuery(".new-hm-user-wrap a#evnav_login_ham").addClass("evham_signin")}}else{jQuery(".new-hm-user-wrap a#evnav_login_ham").removeClass("evham_signin");jQuery(".new-hm-user-wrap a#evnav_login_ham").addClass("evham_signout")}}}}response.storyAccessAllowed=accessAllowed;ieSendGaEvent(response);ieIsUserLoggedIn(response)}function handleMeteringError(error){}function isUserRegistered(){var userLoggedIn=false;if("undefined"!==typeof ssoUI){var ssoTkn=ssoUI.CookieRead("access_token");userLoggedIn=""!==ssoTkn&&"undefined"!==typeof ssoTkn&&null!==ssoTkn?true:false}return userLoggedIn}function ieSendGaEvent(evolokResponse){var isAllowedAccess=true;if("ALLOW_ACCESS"!==evolokResponse.result||"REQUIRE_ENTITLEMENT"===evolokResponse.result||"REQUIRE_LOGIN"===evolokResponse.result){isAllowedAccess=false}if("undefined"!==typeof ga&&"undefined"!==typeof custom_ev_data&&"undefined"!==typeof custom_ev_data.premium&&"undefined"!==typeof custom_ev_data.premium_paywall&&""!==custom_ev_data.premium&&""!==custom_ev_data.premium_paywall&&"undefined"!==typeof custom_ev_data.articleId&&""!==typeof custom_ev_data.articleId&&"undefined"!==typeof evolokResponse.result&&"undefined"!==typeof custom_ev_data.premium_archieve&&"undefined"!==typeof custom_ev_data.datawall_archieve&&false===isAllowedAccess){if("true"===custom_ev_data.premium){var storyType="Premium_Paywall";if("false"===custom_ev_data.premium_paywall){storyType="Premium_Datawall"}if("true"===custom_ev_data.premium_archieve){storyType="Paywall_Archive"}if("true"===custom_ev_data.datawall_archieve){storyType="Datawall_Archive"}}}isWallShown()}jQuery(window).on("load",function(){setTimeout(function(){evFireScrollDepth()},2e3)});function evFireScrollDepth(){if("undefined"!==typeof psdkvar&&"undefined"!==typeof psdkvar.initScrollDepth&&0<jQuery(".story_details").length&&false===scrollDepthFired){scrollDepthFired=true;psdkvar.initScrollDepth({paragraphsQuerySelector:".story_details p:not(blockquote p)",totalParagraphs:parseInt(jQuery(".story_details p:not(blockquote p)").length)})}}function hide_jetpack_most_read(evolokUserPlanDetails){if("undefined"!==typeof evolokUserPlanDetails&&""!==evolokUserPlanDetails){evolokUserPlanDetails=JSON.parse(evolokUserPlanDetails);if("undefined"!==typeof evolokUserPlanDetails.subscription_plan&&Array.isArray(evolokUserPlanDetails.subscription_plan)&&(evolokUserPlanDetails.subscription_plan.includes("Digital Subscriber")||evolokUserPlanDetails.subscription_plan.includes("E-Paper Subscriber"))){if(document.getElementById("jetpack_most_read_posts_list")){document.getElementById("jetpack_most_read_posts_list").style.display="none"}}}}function ieHideTaboolaFromPage(plan_details){storedUserCookie=JSON.parse(plan_details);if(storedUserCookie instanceof Object&&storedUserCookie.hasOwnProperty("subscription_plan")&&storedUserCookie.subscription_plan.includes("Digital Subscriber")){jQuery("#taboola-below-content, #taboola-below-article-explained").parent().remove()}else if(storedUserCookie instanceof Object&&storedUserCookie.hasOwnProperty("subscription_plan")&&storedUserCookie.subscription_plan.includes("E-Paper Subscriber")){if("undefined"!==typeof custom_ev_data&&"undefined"!==typeof custom_ev_data.section&&"today-newsstand"===custom_ev_data.section){jQuery("#taboola-below-content").parent().remove()}}}function ieIsUserLoggedIn(evolokResponse){evolokResponseGlobal=evolokResponse;let evUserExists=false;let isLocalStorageSet=false;let storageKey="moUserExistsv6";if("undefined"!==typeof evolokResponse.loggedOut&&false===evolokResponse.loggedOut){evUserExists=true;isEvolokLoggedIn=true;localStorage.setItem(storageKey,"Yes");isLocalStorageSet=true}else if("undefined"!==typeof evolokResponse.loggedOut&&true===evolokResponse.loggedOut){localStorage.setItem(storageKey,"Yes");evUserExists=true;isLocalStorageSet=true}let isFirstTimeuser=localStorage.getItem(storageKey);if(("undefined"===typeof isFirstTimeuser||null===isFirstTimeuser||""===isFirstTimeuser)&&false===evUserExists&&false===isLocalStorageSet){localStorage.setItem(storageKey,"No");fireAnonymousMoengageEvent=true;setTimeout(function(){var moeStorage=localStorage.getItem("MOE_DATA");if("undefined"!==typeof moeStorage&&""!==moeStorage&&null!==moeStorage){var moeData=JSON.parse(moeStorage);if("undefined"!==typeof moeData&&""!==moeData&&null!==moeData&&"undefined"!==typeof moeData.SESSION&&"undefined"!==typeof moeData.SESSION.numberOfSessions){var numberOfSessions=moeData.SESSION.numberOfSessions;if(1===numberOfSessions){moengageSessionNumber=numberOfSessions;console.log("Moengage Session value -> "+numberOfSessions);fireFirstTimeUserEvent()}}}},1e3)}else if("No"===isFirstTimeuser){localStorage.setItem(storageKey,"Yes")}evolokResponse.statusLoggedIn=isEvolokLoggedIn;var eventEvolok=new CustomEvent("success-evolok-api",{detail:evolokResponse});document.dispatchEvent(eventEvolok)}function fireFirstTimeUserEvent(){let event_name="firstTimeuserv6";let eventObject={userExists:"no",moengageSessionNumber:moengageSessionNumber};var Moengage=moe({app_id:evolok_settings.moengage_settings.moen_sdk_app_id,debug_logs:evolok_settings.moengage_settings.debug_log,cluster:"DC_3",swPath:evolok_settings.moengage_settings.serviceworkerjs,assist:true});if(0===numAnonymousMoengageEvent){Moengage.track_event(event_name,eventObject);console.log("evmoengageanonymousobject");console.log(eventObject);numAnonymousMoengageEvent=numAnonymousMoengageEvent+1}}function linkSubscription(ppid){self.SWG.push(async subscriptions=>{try{const result=await subscriptions.linkSubscription({publisherProvidedId:ppid});console.log("Google Client Linking response");console.log(result);if("undefined"!==typeof result.success&&true===result.success){if("undefined"!==typeof Moengage){Moengage.track_event("initial_google_subscription",{ppid:ppid});Moengage.add_user_attribute("google_subscription_initial_status","yes")}ieMapEvolokSubscriptionWithGoogleSubscription(ppid)}else if("undefined"!==typeof result.success&&"undefined"!==typeof result.publisherProvidedId&&false===result.success){ev_setCookie("gs_linked_with_evolok",Math.floor(Date.now()/1e3),300,".indianexpress.com");document.getElementById("ie_link_google_subscription").classList.add("ie-hide");if(0<jQuery("#ie_link_google_subscription_moengage")){document.getElementById("ie_link_google_subscription_moengage").classList.add("ie-hide")}}}catch(e){console.log("Google Linking Error");console.log(e)}})}function ieManageGoogleSubscription(evolokResponse){let googleSubscriptionCookie=ev_getCookie("gs_linked_with_evolok");let evolokAccessToken=ev_getCookie("access_token");let isSubscriber=false;let linkSubscriptionButtons=document.querySelectorAll(".ie_link_gs").length;if("undefined"!==typeof evolokResponse.auth&&"undefined"!==typeof evolokResponse.auth.session&&"undefined"!==typeof evolokResponse.auth.session.internalUserId&&"undefined"!==typeof evolokResponse.segments&&1===linkSubscriptionButtons&&("undefined"===typeof googleSubscriptionCookie||null===googleSubscriptionCookie||""===googleSubscriptionCookie)&&("undefined"!==typeof evolokAccessToken&&null!==evolokAccessToken&&""!==evolokAccessToken)){publisherProvidedId=evolokResponse.auth.session.internalUserId;let segments=evolokResponse.segments;if(segments.indexOf("Digital Subscriber")!=-1){isSubscriber=true;globalSubscriberUser=true}if("undefined"!==typeof evolok_settings&&"undefined"!==typeof evolok_settings.google_subscription_data&&"undefined"!==typeof evolok_settings.google_subscription_data.enable&&"on"===evolok_settings.google_subscription_data.enable&&true===isSubscriber){document.getElementById("ie_link_google_subscription").classList.remove("ie-hide")}}}function ieMapEvolokSubscriptionWithGoogleSubscription(ppid){let evolokAccessToken=ev_getCookie("access_token");jQuery.ajax({method:"POST",url:evolok_settings.google_subscription_data.ajaxurl,data:{ppid:ppid,token:evolokAccessToken,action:"mapsubscription",nounce:evolok_settings.google_subscription_data.nounce,source:"indianexpress"}}).done(function(response){if(true===response.success){ev_setCookie("gs_linked_with_evolok",response.linking_timestamp,300,".indianexpress.com");var d=new Date(parseInt(response.linking_timestamp));if("undefined"!==typeof Moengage){Moengage.track_event("completed_google_subscription",{ppid:ppid,linking_timestamp:response.linking_timestamp});Moengage.add_user_attribute("google_subscription_status","yes")}else{console.log("Moengage object not found!")}document.getElementById("ie_link_google_subscription").classList.add("ie-hide");if(0<jQuery("#ie_link_google_subscription_moengage")){document.getElementById("ie_link_google_subscription_moengage").classList.add("ie-hide")}}})}jQuery(document).ready(function(){setTimeout(function(){(self.SWG=self.SWG||[]).push(subscriptions=>{});if(0<jQuery("#ie_link_google_subscription").length){document.querySelector("#ie_link_google_subscription").addEventListener("click",function(){if(null!==publisherProvidedId){linkSubscription(publisherProvidedId)}})}},2e3);jQuery(document).on("click","#ie_link_google_subscription_moengage",function(){if(null!==publisherProvidedId){linkSubscription(publisherProvidedId)}})});function ieHandleRecommendationUnit(){if("undefined"!==typeof evolok_settings&&"undefined"!==typeof evolok_settings.extra_details&&"undefined"!==typeof evolok_settings.extra_details.api_get_url&&false===recommendationWidgetShown&&"1"===evolok_settings.extra_details.recommended_widget&&"undefined"!==typeof evolok_settings.extra_details.is_article&&"1"===evolok_settings.extra_details.is_article&&0<jQuery(".single-article-also-read-widget").length){let apiUrl=evolok_settings.extra_details.api_get_url;let apiOrigin=evolok_settings.extra_details.api_origin;let apiKey=evolok_settings.extra_details.api_key;let fpuuid=ev_getCookie("fpuuid");let pluuid=ev_getCookie("pluuid");let userId="";if("undefined"!==typeof fpuuid&&""!==fpuuid&&null!==fpuuid){userId=fpuuid}if("undefined"!==typeof pluuid&&""!==pluuid&&null!==pluuid){userId=pluuid}const myHeaders=new Headers;myHeaders.append("Origin",apiOrigin);myHeaders.append("API-KEY",apiKey);const requestOptions={method:"GET",headers:myHeaders};setTimeout(function(){fetch(apiUrl+userId,requestOptions).then(response=>{return response.json()}).then(result=>{result=result.slice(1);recommendationWidgetShown=true;ieRenderRecommendedHtml(result)}).catch(error=>{ieRenderRecommendedHtml(evolok_settings.extra_details.recommed_top_news);console.error(error)})})}}function ieRenderRecommendedHtml(result){if(0<jQuery(" #recommended_widget_"+evolok_settings.extra_details.article_id).length){let widgetHtml="";let articles=[];let reflink=evolok_settings.extra_details.recommended_template["tracking"];if("default"===evolok_settings.extra_details.recommended_template["template"]){widgetHtml='<h2 class="heading">stories You may Like</h2><div class="article-list">';articles=result.map((pageNumber,index)=>{return'<a href="'+pageNumber.articleUrl+"?"+reflink+'"'+pageNumber.articleTitle+'" alt="'+pageNumber.articleTitle+'" data="'+pageNumber.algorithm+'">'+pageNumber.articleTitle+"</a>"})}else if("no_template"===evolok_settings.extra_details.recommended_template["template"]){widgetHtml='<h2 class="heading">stories You may Like</h2><div class="article-list number-article">';articles=result.map((pageNumber,index)=>{return'<a  href="'+pageNumber.articleUrl+"?"+reflink+'" title="'+pageNumber.articleTitle+'" alt="'+pageNumber.articleTitle+'" data="'+pageNumber.algorithm+'"><span>'+(index+1)+"</span>"+pageNumber.articleTitle+"</a>"})}else if("image_template"===evolok_settings.extra_details.recommended_template["template"]){jQuery(" #recommended_widget_"+evolok_settings.extra_details.article_id).addClass("single-article-also-read-widget image-template");widgetHtml='<h2 class="heading">stories You may Like</h2><div class="article-list img-article">';articles=result.map((pageNumber,index)=>{return'<a class="image-article" href="'+pageNumber.articleUrl+"?"+reflink+'" title="'+pageNumber.articleTitle+'" alt="'+pageNumber.articleTitle+'" data="'+pageNumber.algorithm+'"><img src="'+pageNumber.articleFeaturedImage+'" alt="'+pageNumber.articleTitle+'"><span>'+pageNumber.articleTitle+"</span></a>"})}widgetHtml+=articles.join("")+"</div>";jQuery(" #recommended_widget_"+evolok_settings.extra_details.article_id).html(widgetHtml)}}function ev_DestroyCookie(name){document.cookie=name+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function ieSaveSurveyFormData(){let userDetails=ev_getCookie("oauth_user");let surveyFormData=localStorage.getItem("ie_survey_form");if("undefined"!==typeof surveyFormData&&""!==surveyFormData&&null!==surveyFormData){surveyFormData=JSON.parse(surveyFormData);if("undefined"!==typeof userDetails&&""!==userDetails){userDetails=JSON.parse(userDetails);userDetails.whatsapp_alerts=surveyFormData.Whatsapp_alerts;userDetails.subscription_reason=surveyFormData.subscription_reason;userDetails.additional_reason=surveyFormData.additional_reason;userDetails.action="save_survey_entry";userDetails.nounce=evolok_settings.extra_details.survey_form.nounce;jQuery.ajax({method:"POST",url:evolok_settings.extra_details.ajaxurl,data:userDetails}).done(function(response){localStorage.removeItem("ie_survey_form")})}}}function ieRemoveContinueReadingSubscriber(){if(null!==publisherProvidedId&&true===globalSubscriberUser){jQuery(".show-article-content").addClass("remove-article-class");jQuery(".remove-article-class").removeClass("show-article-content");jQuery(".readmore-btn").hide()}}function ieFireMoengageIncognitoEvent(){if(true===isIncognitoMode&&"undefined"!==typeof Moengage&&"undefined"!==typeof evolok_settings.extra_details.article_id){let eventObject={article_id:evolok_settings.extra_details.article_id};Moengage.track_event("incognito_article",eventObject)}}function ieimployeventonrecommendedwidget(){let source=1;let type=1;var body={fpuuid:"",pluuid:"",upssid:"",channel:2,source:source,type:type,eventName:"read_more",eventType:"",e1:"appear",e2:"",e3:custom_ev_data.section,e4:"",e5:"",storyId:"",pageUrl:"",pageReferrer:""};if("undefined"!==typeof evolok_settings&&"undefined"!==typeof evolok_settings.extra_details){body["storyId"]=evolok_settings.extra_details.article_id;body["pageUrl"]=evolok_settings.extra_details.current_url}if("M-site"===custom_ev_data.device){body.source=2}let pluuid=ev_getCookie("pluuid");if("undefined"!==typeof pluuid&&""!==pluuid&&null!==pluuid){body.type=2;body.pluuid=ev_getCookie("pluuid")}let userBand=localStorage.getItem("userLoyaltyBand");if("undefined"!==typeof userBand&&""!==userBand&&null!==userBand){userBand=JSON.parse(userBand);if("undefined"!==typeof userBand&&""!==userBand){userBand=JSON.parse(userBand);if("undefined"!==typeof userBand&&""!==userBand&&"undefined"!==typeof userBand.plb&&""!==userBand.plb){body.e5=userBand.plb}}}const firstAnchor=document.querySelector(".article-list a");if(firstAnchor){body.eventType=firstAnchor.getAttribute("data")}var recommended_widget=jQuery(".single-article-also-read-widget");var options={root:null,rootMargin:"0px",threshold:0};const observer=new IntersectionObserver(entries=>{intersectionObserverCallbackScrollStory(entries),options});jQuery.each(recommended_widget,function(key,value){observer.observe(recommended_widget[key])});function intersectionObserverCallbackScrollStory(entries){entries.forEach(entry=>{if(entry.isIntersecting&&window.psdkvar){window.psdkvar.eventCapture(body);observer.unobserve(recommended_widget[0])}})}jQuery(".single-article-also-read-widget a").click(function(){body.e1="clicked";body.e2=jQuery(this).attr("href");body.e4=jQuery("#recommended_widget_"+evolok_settings.extra_details.article_id+" a").index(this)+1;if(window.psdkvar){window.psdkvar.eventCapture(body)}if(""!==body.e2){setTimeout(function(){window.location.href=body.e2},1e3)}})}function ieModifyCustomUaData(){let googleSubscriptionCookie=ev_getCookie("gs_linked_with_evolok");if("undefined"!==typeof googleSubscriptionCookie&&""!==googleSubscriptionCookie&&null!==googleSubscriptionCookie&&"undefined"!==typeof evolok_settings&&"undefined"!==typeof evolok_settings.customUaData){isUserGoogleSubscribed=true;if("undefined"===typeof custom_ua_data){custom_ua_data=evolok_settings.customUaData;custom_ua_data.gooSub=true}setTimeout(function(){if("undefined"!==typeof custom_ua_data){custom_ua_data.gooSub=true}},5e3)}}function ie_usermobileregistrations(){var oauth_user=ev_getCookie("oauth_user");var pluuid=ev_getCookie("pluuid");var ev_user_id="";var ev_sid=ev_getCookie("ex_ss");var mobilefound=false;var parsed_info="";var Api_url="https://ieo.uat.evolok.net/ic/api/userProfile/";if("indianexpress.com"==curr_url){Api_url="https://ev.indianexpress.com/ic/api/userProfile/"}const myHeaders=new Headers;if(undefined!==oauth_user&&""!==oauth_user){parsed_info=JSON.parse(oauth_user);if(null!==parsed_info){if(parsed_info.hasOwnProperty("user_phone")&&""!==parsed_info.user_phone){mobilefound=true}if(parsed_info.hasOwnProperty("user_ev_guid")&&""!==parsed_info.user_ev_guid){ev_user_id=parsed_info.user_ev_guid}}}if("undefined"!==typeof pluuid&&""!==pluuid&&null!==pluuid&&"undefined"!==typeof evolok_settings&&"undefined"!==typeof evolok_settings.extra_details&&"undefined"!==typeof evolok_settings.extra_details.whatsapp_popup&&true===evolok_settings.extra_details.whatsapp_popup&&false===mobilefound){const lastParagraph=document.querySelector("#pcl-full-content .ie-premium-content-block p:last-of-type");var checkexpiry=ev_getCookie(pluuid+"cross-btn");var user_mobile_no=ev_getCookie(pluuid+"user_mobile_no");var optvalue="user_mobile_update_whatsapp_opt_yes";const overlay=document.createElement("div");overlay.id="overlay";document.body.appendChild(overlay);const popup=document.createElement("div");popup.id="popup";const popupContent=document.createElement("div");popupContent.id="popup-content";const closebtn=document.createElement("span");closebtn.id="close-btn";const heading=document.createElement("div");heading.className="popup-text";heading.textContent="Our award-winning news reports, explainers now straight on your device";const mobile_no=document.createElement("input");mobile_no.type="text";mobile_no.id="input-field";mobile_no.placeholder="Enter your mobile number";const checkboxLabel=document.createElement("label");checkboxLabel.className="custom-checkbox-label";const opt_checkbox=document.createElement("input");opt_checkbox.type="checkbox";opt_checkbox.id="save-checkbox";opt_checkbox.checked=true;const customCheckbox=document.createElement("span");customCheckbox.className="custom-checkbox";const checkboxText=document.createTextNode("Opt-in to receive alerts via WhatsApp and SMS");checkboxLabel.appendChild(opt_checkbox);checkboxLabel.appendChild(customCheckbox);checkboxLabel.appendChild(checkboxText);const error_msg=document.createElement("p");error_msg.className="error-message";error_msg.style.display="none";error_msg.textContent="This No Is Already Registered.";const thankyou_msg=document.createElement("p");thankyou_msg.className="thankyou-message";thankyou_msg.style.display="none";thankyou_msg.textContent="Thanks For Registering Mobile No.";const save_btn=document.createElement("button");save_btn.id="save-btn";save_btn.disabled=true;save_btn.textContent="Save";popupContent.appendChild(closebtn);popupContent.appendChild(heading);popupContent.appendChild(mobile_no);popupContent.appendChild(checkboxLabel);popupContent.appendChild(error_msg);popupContent.appendChild(thankyou_msg);popupContent.appendChild(save_btn);popup.appendChild(popupContent);if("undefined"!==typeof lastParagraph&&""!==lastParagraph&&null!==lastParagraph&&("undefined"===typeof checkexpiry||null===checkexpiry)&&("undefined"===typeof user_mobile_no||null===user_mobile_no)){const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){document.body.appendChild(popup);document.body.style.overflow="hidden";popup.style.display="block";document.body.style.overflow="hidden";overlay.style.display="block";if("undefined"!==typeof Moengage){console.log("event-fire");Moengage.track_event("user_mobile_update_appear")}observer.unobserve(entry.target)}})});observer.observe(lastParagraph)}if(closebtn){closebtn.addEventListener("click",function(){ev_setCookie(pluuid+"cross-btn","false",30);popup.style.display="none";overlay.style.display="none";document.body.style.overflow="inherit";popup.remove();overlay.remove()})}if(mobile_no){mobile_no.addEventListener("input",function(){var mobileNumber=mobile_no.value.trim();const isValid=validateMobileNumber(mobileNumber);mobile_no.style.border="2px solid red";save_btn.disabled=true;save_btn.style.cursor="default";if(isValid){mobile_no.style.border="2px solid green";save_btn.disabled=false;save_btn.style.cursor="pointer"}})}if(opt_checkbox){opt_checkbox.addEventListener("change",function(){if(opt_checkbox.checked){optvalue="user_mobile_update_whatsapp_opt_yes"}else{optvalue="user_mobile_update_whatsapp_opt_no"}})}myHeaders.append("Accept","application/json");myHeaders.append("Content-Type","application/json");if(save_btn){if("undefined"!==typeof ev_sid&&""!==ev_sid&&null!==ev_sid){myHeaders.append("Authorization",`Evolok evolok.api.service=myaccount evolok.api.secureSessionId=${ev_sid}`)}save_btn.addEventListener("click",function(){var mobileNumber=mobile_no.value.trim();const raw=JSON.stringify({attributes:[{name:"mobile_number",value:mobileNumber}]});const requestOptions={method:"PUT",headers:myHeaders,body:raw,redirect:"follow"};fetch(Api_url+`${ev_user_id}/myaccount`,requestOptions).then(response=>{if(response.status===200){console.log("Mobile number saved:",mobileNumber);thankyou_msg.style.display="block";closebtn.style.display="none";error_msg.style.display="none";ev_setCookie(pluuid+"user_mobile_no",mobileNumber,30);if("undefined"!==typeof Moengage){Moengage.track_event("user_mobile_update_success",{Number:mobileNumber});Moengage.track_event(optvalue,{Number:mobileNumber});console.log("event-fire-succes-opt")}setTimeout(function(){document.body.style.overflow="inherit";popup.remove();overlay.remove()},1e3)}else if(response.status===403){error_msg.style.display="block";mobile_no.style.border="2px solid red"}else{console.log(`Unexpected status code: ${response.status}`)}}).catch(error=>{console.error("Error:",error.message);error_msg.style.display="block";error_msg.textContent="An error occurred. Please try again."})})}}}function validateMobileNumber(number){const regex=/^[0-9]{10}$/;return regex.test(number)}function ieRemoveOldGoogleSubscriptionCookie(){let userGoogleSubscriptionCookie=ev_getCookie("gs_linked_with_evolok");let userGoogleSubscriptionNewCookie=ev_getCookie("glwen");if("undefined"!==typeof userGoogleSubscriptionCookie&&""!==userGoogleSubscriptionCookie&&null!==userGoogleSubscriptionCookie&&"undefined"===typeof userGoogleSubscriptionNewCookie){ev_setCookie("gs_linked_with_evolok","",0);ev_setCookie("glwen",Math.floor(Date.now()/1e3),300);ev_setCookie("gs_linked_with_evolok",Math.floor(Date.now()/1e3),300,".indianexpress.com")}}function ieEnableSubscriberNotifier(){setTimeout(function(){if(false===globalSubscriberUser&&0<jQuery("#id_subscription_notifier").length){document.getElementById("id_subscription_notifier").classList.remove("ie-hide")}},2e3)}function ieAccordionOpenSubscriberNotifier(){document.querySelectorAll(".faq-question").forEach(question=>{question.addEventListener("click",()=>{const answer=question.nextElementSibling;const arrow=question.querySelector(".faq_arrow");document.querySelectorAll(".faq-answer").forEach(ans=>{if(ans!==answer){ans.classList.remove("open");ans.previousElementSibling.querySelector(".faq_arrow").classList.remove("rotate")}});answer.classList.toggle("open");arrow.classList.toggle("rotate")})});document.querySelectorAll(".plan_list").forEach(function(plan){plan.addEventListener("click",function(event){event.preventDefault();document.querySelectorAll(".plan_list").forEach(function(el){el.classList.remove("active");var checkbox=el.querySelector(".plan_checkbox");if(checkbox){checkbox.checked=false;checkbox.removeAttribute("checked")}});this.classList.add("active");var checkbox=this.querySelector(".plan_checkbox");if(checkbox){checkbox.checked=true;checkbox.setAttribute("checked","checked")}var targetUrl=this.getAttribute("href");var target=this.getAttribute("target");setTimeout(function(){if(target==="_blank"){window.open(targetUrl,"_blank")}else{window.location.href=targetUrl}},500)})})}function isWallShown(){if("paywall"===articleType){let isPaywallShown=false;setTimeout(function(){element=document.querySelector(".ev-paywall-template");if("undefined"!==typeof element){const hideWhenBoxInView=new IntersectionObserver(entries=>{if(entries[0].intersectionRatio<=0){}else{if(false===isPaywallShown){isPaywallShown=true;var event_value="paywall_seen";triggerGtmEvents(event_value)}}});hideWhenBoxInView.observe(element)}},3e3)}}function triggerGtmEvents(event_value){var dataLayer=window.dataLayer=window.dataLayer||[];dataLayer.push({event:event_value});console.log(event_value+" event triggered successfully")}function prepareAndPrint(evolokData_print){if(false===evolokData_print.storyAccessAllowed&&true===evolokData_print.statusLoggedIn||"undefined"!==typeof evolok_settings&&"undefined"!==typeof evolok_settings.extra_details&&"1"===evolok_settings.extra_details.isArticleMadePremium){jQuery(".btn_print_article").remove();jQuery("li.author-tab.print-article").remove()}jQuery(".btn_print_article").click(function(event){event.preventDefault();if(jQuery(".print-processing").length>0){return}jQuery("body").addClass("print-processing");if(!evolokData_print||!evolokData_print.statusLoggedIn||!evolokData_print.storyAccessAllowed){var followButton=document.getElementById("custom_follow_author_1");if(followButton){followButton.click();jQuery("body").removeClass("print-processing")}}else{loadLazyImages().then(()=>{setTimeout(()=>{window.print();jQuery("body").removeClass("print-processing")},500)})}})}function ieEnablePaywallForRegisteredUsers(e){const changePaywalltext=()=>{let paywall_text="You have exhausted your monthly limit to read free articles.";let paywall_button_cta_url="/subscribe/offer-136031/?utm_source=website&utm_campaign=additional_paywall";if("undefined"!==typeof evolok_settings&&"undefined"!==typeof evolok_settings.extra_details&&""!==evolok_settings.extra_details.paywall_text){paywall_text=evolok_settings.extra_details.paywall_text}if("undefined"!==typeof evolok_settings&&"undefined"!==typeof evolok_settings.extra_details&&""!==evolok_settings.extra_details.paywall_button_cta_url){paywall_button_cta_url=evolok_settings.extra_details.paywall_button_cta_url}setTimeout(()=>{jQuery(".reach-limit").text(paywall_text);jQuery(".sign-up a").attr("href","javascript:void(0);");jQuery(".sign-up a").attr("onclick",`window.open("${paywall_button_cta_url}", ""); return false;`)},2e3)};let userType=ev_getCookie("ev_user_state");if("registered"!==userType){return}if(e.exceededMeter){let max=parseInt(e.exceededMeter.max)||0;let count=parseInt(e.exceededMeter.count)||0;if(!isNaN(max)&&!isNaN(count)&&max>0&&count>=0&&count>=max){changePaywalltext();return}}if(e.activeMeter){let total=parseInt(e.activeMeter.total)||0;let count=parseInt(e.activeMeter.count)||0;if(!isNaN(total)&&!isNaN(count)&&total>0&&count>=0&&count>=total){changePaywalltext();return}}}function ieMyIEstoryWidgetOnArticlePage(e){if("undefined"!==typeof evolok_settings&&"undefined"!==typeof evolok_settings.extra_details&&"undefined"!==typeof evolok_settings.extra_details.is_article&&"1"===evolok_settings.extra_details.is_article&&"undefined"!==typeof evolok_settings.extra_details.article_id&&""!==typeof evolok_settings.extra_details.article_id&&"undefined"!==typeof myie_article_widget_data&&"undefined"!==typeof myie_article_widget_data.myie_article_widget_api_url&&""!==myie_article_widget_data.myie_article_widget_api_url&&"undefined"!==typeof myie_article_widget_data.myie_article_widget_api_key&&""!==typeof myie_article_widget_data.myie_article_widget_api_key){let apiUrl=myie_article_widget_data.myie_article_widget_api_url;let apiKey=myie_article_widget_data.myie_article_widget_api_key;let widget_heading=myie_article_widget_data.myie_article_widget_heading;let widget_heading_link=myie_article_widget_data.myie_article_widget_heading_link;const myHeaders=new Headers;myHeaders.append("X-API-KEY",apiKey);const requestOptions={method:"GET",headers:myHeaders};fetch(apiUrl,requestOptions).then(response=>response.json()).then(result=>{if(result&&result.list&&Array.isArray(result.list)&&result.list[0]&&Array.isArray(result.list[0].items)&&result.list[0].items.length>0){const currentArticleId=parseInt(evolok_settings.extra_details.article_id,10);let filteredItems=result.list[0].items.filter(item=>{const itemId=parseInt(item.ID||item.id,10);return itemId!==currentArticleId});const isMobile=window.innerWidth<=768;const maxItems=isMobile?3:2;filteredItems=filteredItems.slice(0,maxItems);if(filteredItems.length>0){ieRenderMyExpressArticleWidgetHtml(filteredItems,widget_heading,widget_heading_link);ie_load_lazy_images()}else{removeMyIEstoryWidgetContainer()}}else{removeMyIEstoryWidgetContainer()}}).catch(error=>{console.error(error);removeMyIEstoryWidgetContainer()})}}function removeMyIEstoryWidgetContainer(){var containerId="#myie_stories_list_"+evolok_settings.extra_details.article_id;var container=jQuery(containerId);if(container.length>0){container.remove()}}function ieRenderMyExpressArticleWidgetHtml(result,bottomHeading="",bottomLink=""){const containerId="#myie_stories_list_"+evolok_settings.extra_details.article_id;const container=document.querySelector(containerId);if(container&&Array.isArray(result)){container.innerHTML="";if(bottomHeading&&bottomHeading.trim()!==""){const headingEl=document.createElement("span");headingEl.className="stories_fu_heading";if(bottomLink&&bottomLink.trim()!==""){const linkEl=document.createElement("a");linkEl.href=bottomLink.trim();linkEl.textContent=bottomHeading.trim();headingEl.appendChild(linkEl)}else{headingEl.textContent=bottomHeading.trim()}container.appendChild(headingEl)}const listWrapper=document.createElement("div");listWrapper.className="stories_list";result.forEach((item,index)=>{const title=item.title;const linkUrl=item.post_url||"#";const image=item.images&&item.images[1]||{};let imageUrl=image.thumbImage||"";const imageAlt=image.altText||"";if(imageUrl.includes("?")){imageUrl=imageUrl.split("?")[0]}const finalImageUrl=imageUrl?imageUrl+"?w=260":"";const refParam="ref=ReadNext_article_"+(index+1);const finalLink=linkUrl.includes("?")?linkUrl+"&"+refParam:linkUrl+"?"+refParam;let articleId="";try{const urlPath=new URL(finalLink).pathname;const match=urlPath.match(/-(\d+)\/?$/);if(match&&match[1]){articleId=match[1]}}catch(e){}let parentCategory="";if(Array.isArray(item.categories)){const topLevelCategory=item.categories.find(cat=>cat.parent==="0"||cat.parent===0);if(topLevelCategory){parentCategory=topLevelCategory.name}}const anchor=document.createElement("a");anchor.href=finalLink;anchor.className="myie-article-link";if(articleId){anchor.setAttribute("data-article-id",articleId)}anchor.setAttribute("data-article-sequence",index+1);if(parentCategory){anchor.setAttribute("data-parent-section",parentCategory)}const figure=document.createElement("figure");figure.className="img-wrap";const img=document.createElement("img");img.className="lazyloading";img.src="https://indianexpress.com/wp-content/themes/indianexpress/images/default-ie.jpg";img.setAttribute("data-src",finalImageUrl);img.alt=imageAlt;img.setAttribute("height",75);img.setAttribute("width",75);figure.appendChild(img);anchor.appendChild(figure);const span=document.createElement("span");span.className="stories_title";span.textContent=title;anchor.appendChild(span);listWrapper.appendChild(anchor)});container.appendChild(listWrapper)}}function ie_removeInternationalElements(){if(!document.body.classList.contains("ie_country_IN")){const banner_element=document.querySelector(".remove_international");if(banner_element&&banner_element.parentElement){banner_element.parentElement.remove()}}}document.addEventListener("success-evolok-api",function(e){console.log("capturedeventevolok");console.log(e.detail);ieManageGoogleSubscription(e.detail);ieHandleRecommendationUnit(e.detail);ieRemoveContinueReadingSubscriber();ieFireMoengageIncognitoEvent();ieEnableSubscriberNotifier();prepareAndPrint(e.detail);ieEnablePaywallForRegisteredUsers(e.detail);ieMyIEstoryWidgetOnArticlePage(e.detail)});jQuery(window).load(function(){setTimeout(function(){ieSaveSurveyFormData()},1e3)});jQuery(window).ready(function(){setTimeout(function(){ieimployeventonrecommendedwidget();ie_usermobileregistrations();ie_removeInternationalElements()},2e3);ieModifyCustomUaData();ieRemoveOldGoogleSubscriptionCookie();ieAccordionOpenSubscriberNotifier()});function ie_load_lazy_images(){const target=document.querySelectorAll(".lazyloading");const observerCallback=(entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting&&entry.target.getAttribute("data-src")){entry.target.src=entry.target.getAttribute("data-src");entry.target.removeAttribute("data-src");observer.unobserve(entry.target)}})};const observerOptions={threshold:.2};const observer=new IntersectionObserver(observerCallback,observerOptions);if(target){target.forEach(img=>{observer.observe(img)})}}
