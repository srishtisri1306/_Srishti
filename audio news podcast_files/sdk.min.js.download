var PhonePe=(n=>{var i={};function o(e){var t;return(i[e]||(t=i[e]={i:e,l:!1,exports:{}},n[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}return o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=9)})([function(e,t,n){var i;Object.defineProperty(t,"__esModule",{value:!0}),t=t.ExternalConstants||(t.ExternalConstants={}),(i=t.Permission||(t.Permission={})).READ_SMS="READ_SMS",i.LOCATION="LOCATION",i.CAMERA="CAMERA",i.WRITE_EXTERNAL_STORAGE="WRITE_EXTERNAL_STORAGE",i.READ_EXTERNAL_STORAGE="READ_EXTERNAL_STORAGE",(i=t.Species||(t.Species={})).web="web",i.native="native",(i=t.OS||(t.OS={})).ios="ios",i.android="android",(i=t.OSUserAgent||(t.OSUserAgent={})).ios="phonepe-ios",i.android="phonepe-android",(i=t.UserDetail||(t.UserDetail={})).email="email",i.name="name",i.phoneNumber="phoneNumber",i.isEmailVerified="isEmailVerified"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let r=n(4),s=n(5),a=n(3),o=n(10);class c{static callback(e,t,n,i){s.Logger.logd("PhonePe","phonepeCallback called! with callbackName = "+e);var o=c.promiseMapping[e];o&&("1"===t?o[a.PhonePeSDKWebConstants.General.resolve](n):o[a.PhonePeSDKWebConstants.General.reject](i),delete c.promiseMapping[e])}static callNative(e,t,n){var i;o.MethodVersioningHandler.isMethodSupported(e)?(s.Logger.logd("PhonePe","Trying to call methodName = "+e),i=window.webkit,r.PhonePeUtils.isValidMethodOniOS(e)?i.messageHandlers[e].postMessage(n):window[t][e](JSON.stringify(n))):s.Logger.logd("PhonePe","Sorry! This method is not supported with PhonePe app's version")}static storePromiseAndCallNative(i,o,s){return new Promise((e,t)=>{var n=r.PhonePeUtils.createuuid();s[a.PhonePeSDKWebConstants.General.callbackId]=n,this.callNative(i,o,s),this.promiseMapping[n]={resolve:e,reject:t}})}}c.promiseMapping={},t.MessagingHandler=c},function(e,t,n){var i;Object.defineProperty(t,"__esModule",{value:!0}),(t=t.InternalConstants||(t.InternalConstants={})).sdkVersion="0.1",t.PhonePeSDKRNMajorVersion=0,t.PhonePeSDKRNMinorVersion=53,t.data_preferences="database_versions",t.PhonePeSDKVersion=4,(i=t.General||(t.General={})).confirmationScreenDuration=400,i.discoveryContextMode="PEER_TO_MERCHANT",i.paymentScreenName="PAY",i.v1="v1",i.v2="v2",(t.ErrorCode||(t.ErrorCode={})).invalidParams="PARAMS_INVALID_OR_INSUFFICIENT",(i=t.ActivityID||(t.ActivityID={})).payments=103,i.transactionDetails=105,(i=t.PermissionsBridge||(t.PermissionsBridge={})).name="PermissionsBridge",i.seekPermission="seekPermission",i.openSettingsPage="openSettingsPageForPermission",i.androidPrefix="android.permission.",i.locationPermissionName="ACCESS_FINE_LOCATION",i.kPermission="permission",(i=t.AnalyticsBridge||(t.AnalyticsBridge={})).bridgeName="AnalyticsBridge",i.methodName="logMerchantEvent",i.kName="name",i.kMetadata="metadata",i.kGroupingKey="groupingKey",(i=t.AuthBridge||(t.AuthBridge={})).bridgeName="AuthBridge",i.fetchGrantToken="fetchGrantToken",i.fetchAuthToken="fetchAuthToken",(i=t.OrderActionBridge||(t.OrderActionBridge={})).bridgeName="OrderActionBridge",i.reserveOrder="reserveOrder",i.fetchOrderRequestToken="fetchOrderRequestToken",i.openPaymentsPageForReservedOrder="openPaymentsPageForReservedOrder",(i=t.FilePickerBridge||(t.FilePickerBridge={})).bridgeName="FilePickerBridge",i.selectFile="selectFile",i.readFile="readFile",(i=t.CameraBridge||(t.CameraBridge={})).bridgeName="CameraBridge",i.scanQRCode="scanQRCode",i.startCamera="startCamera"},function(e,t,n){var i;Object.defineProperty(t,"__esModule",{value:!0}),t=t.PhonePeSDKWebConstants||(t.PhonePeSDKWebConstants={}),(i=t.General||(t.General={})).reject="reject",i.resolve="resolve",i.callbackId="callbackId",i.prefName="prefName",i.key="key",i.defaultValue="defaultValue",i.value="value",i.min="min",i.max="max",(i=t.Preferences||(t.Preferences={})).androidBridgeName="PreferencesBridge",i.getItem="getItem",i.setItem="setItem",i.removeItem="removeItem",i.removeItemAndroid="removeKey",(i=t.Metadata||(t.Metadata={})).supportedVersion="getSupportedWebSDKVersion",i.androidBridgeName="MetadataBridge",(i=t.Location||(t.Location={})).androidBridgeName="LocationBridge",i.startUpdatingLocation="startUpdatingLocation",i.stopUpdatingLocation="stopUpdatingLocation",i.getCurrentLocation="getCurrentLocation",i.locationSuccessEventKey="locationUpdated",i.locationFailureEventKey="failedToUpdateLocation",i.forceNewLocation="forceNew",i.getAddress="getAddress",(i=t.Navigation||(t.Navigation={})).androidBridgeName="NavigationBridge",i.processRequest="processRequest",i.navigateToPath="navigateToPath",i.navigateToPathForResult="navigateToPathForResult",i.navigateToGenericPaymentForResult="navigateToGenericPaymentForResult",i.navigateToGenericPayment="navigateToGenericPayment",(i=t.NavigationIOS||(t.NavigationIOS={})).navigateToPaymentsView="openPaymentsPage",i.navigateToTransactionDetail="openTransactionDetailsPage",i.navigateToGenericPaymentsView="openGenericPaymentsPage",i.navigateToHelpPage="openHelpPage",i.navigateToReactView="openReactView",(i=t.Payments||(t.Payments={})).merchantId="merchantId",i.discoveryMode="mode",i.discoveryModeValue="PEER_TO_MERCHANT",i.title="Pay",i.transactionType="SENT_PAYMENT",i.timeoutTitle="Payment Expired",i.timeoutMessage="Sorry! Your payment request timed out. Please try again.",i.timeoutActionButtonTitle="OK",i.dismissTitle="Are you sure?",i.dismissMessage="Going back will cancel the payment. Are you sure you want to proceed?",i.dismissPositiveButtonTitle="I'm sure",i.dismissNegativeButtonTitle="Dismiss",(i=t.User||(t.User={})).getUserDetails="getUserDetails",i.androidBridgeName="UserBridge",i.attributes="attributes",(i=t.Camera||(t.Camera={})).androidBridgeName="CameraBridge",i.scanQRCode="scanQRCode",i.startCamera="startCamera"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let s=n(0),r=n(2);var a=s.ExternalConstants.Permission;class i{static assert(e,t){if(!e)throw new Error(t)}static assertString(e,t){i.assertType(e,"string",t)}static assertNumber(e,t){i.assertType(e,"number",t)}static assertBoolean(e,t){i.assertType(e,"boolean",t)}static assertFunction(e,t){i.assertType(e,"function",t)}static assertArray(e,t){if((!t||e)&&e.constructor!==Array)throw new TypeError(r.InternalConstants.ErrorCode.invalidParams)}static assertObject(e,t){i.assertType(e,"object",t)}static assertType(e,t,n){if((!n||e)&&typeof e!==t)throw new TypeError(r.InternalConstants.ErrorCode.invalidParams)}static returnResolution(n){return new Promise((e,t)=>{e(n)})}static returnRejection(n){return new Promise((e,t)=>{t(n)})}static isValidSpecies(e){return e===s.ExternalConstants.Species.web||e===s.ExternalConstants.Species.native}static isValidOS(e){return e===s.ExternalConstants.OS.ios||e===s.ExternalConstants.OS.android}static createuuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}static osSpecificPermissionNames(e,t){var n,i,o=[];for(n of e)t===s.ExternalConstants.OS.ios?o.push(a[n]):(i="",i=n===a.LOCATION?r.InternalConstants.PermissionsBridge.androidPrefix+r.InternalConstants.PermissionsBridge.locationPermissionName:r.InternalConstants.PermissionsBridge.androidPrefix+a[n],o.push(i));return o}static strippedPermissionName(e,t){if(t===s.ExternalConstants.OS.ios)return e;let n=r.InternalConstants.PermissionsBridge.androidPrefix,i=e.replace(new RegExp("^"+n),"");return i=i===r.InternalConstants.PermissionsBridge.locationPermissionName?a.LOCATION:i}static isValidMethodOniOS(e){var t=window.webkit;return t&&t.messageHandlers&&t.messageHandlers[e]&&"function"==typeof t.messageHandlers[e].postMessage}static getReserveOrderPayload(e,t){var n={};return n["X-PROVIDER-ID"]=t,{headers:n,body:e}}}t.PhonePeUtils=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(9);class o{static isLoggingEnabled(){return i.PhonePe.loggingEnabled}static logd(e,t){o.isLoggingEnabled()&&console.log("["+e+"] "+t)}constructor(e){this.tag=e}logd(e){o.logd(this.tag,e)}logAnything(e){console.log(e)}logError(e){}}t.Logger=o},function(e,t,n){var p,i;Object.defineProperty(t,"__esModule",{value:!0}),(i=p=t.NavigationScreenType||(t.NavigationScreenType={})).WebView="WebView",i.ReactView="ReactView",i.PaymentsView="PaymentView",i.GenericPaymentsView="GenericPaymentsView",i.AppScreen="AppScreen",i.ContactPicker="ContactPicker",i.TransactionDetail="TransactionDetail",i.Profile="Profile",i.HelpPage="HelpPage",i.MandateSetup="MandateSetup",i.AddToWallet="AddToWallet",i.MicroApp="MicroApp",i.PWAWebView="PWAWebView";class o{constructor(e,t,n,i){this.screenType=e,this.title=t,this.animated=n,this.showModally=i,this.isNewTask=!1}}t.BaseNavigationRequest=o,t.ReactViewNavigationRequest=class extends o{constructor(e,t,n,i,o,s,r,a,c,l,d,u,h){super(p.ReactView,i,o,s),this.appId=u,this.bundleName=e,this.componentName=t,this.shouldShowToolbar=n,this.toolBarText=i,this.animated=o,this.showModally=s,this.initialProperties=r,this.category=a,this.merchantId=c,this.merchantName=l,this.tAndCUrl=d,this.appUniqueId=h}},t.WebViewNavigationRequest=class extends o{constructor(e,t,n,i,o,s,r,a,c){super(p.WebView,t,a,c),this.url=e,this.title=t,this.shouldShowToolBar=n,this.shouldShowBackButton=i,this.screenName=o,this.shouldAllowWebViewBack=s,this.shouldShowProgressWhileLoading=r}},t.PWAWebViewNavigationRequest=class extends o{constructor(e,t,n,i){super(p.PWAWebView,"",!0,!0),this.merchantId=e,this.deepLinkUrl=t,this.appId=n,this.appUniqueId=i}},t.AppScreenNavigationRequest=class extends o{constructor(e,t,n,i,o,s){super(p.AppScreen,i,o,s),this.screenName=e,this.url=t,this.params=n}},t.PaymentMetaData=class{constructor(e){this.details=e}},t.PaymentNavigationRequest=class extends o{constructor(e,t,n,i,o,s,r,a,c,l){super(p.PaymentsView,t,n,i),this.mode=o,this.microPayRequest=s,this.internalPaymentUiConfig=r,this.transactionType=a,this.metaData=c,this.originInfo=l}},t.GenericPaymentNavigationRequest=class extends o{constructor(e,t,n,i,o){super(p.GenericPaymentsView,e,t,n),this.reservationId=i,o&&(this.fallbackUrl=o)}},t.MandateSetupNavigationRequest=class extends o{constructor(e,t,n,i,o,s){super(p.MandateSetup,n,i,o),this.mandateContext=e,this.mandateUiConfig=t,this.mandateType=s||"MERCHANT"}},t.AddToWalletNavigationRequest=class extends o{constructor(e,t,n,i){super(p.AddToWallet,t,n,i),this.addToWalletUiContext=e}},t.TransactionDetailsNavigationRequest=class extends o{constructor(e,t,n,i,o,s,r){super(p.TransactionDetail,t,n,i),this.transactionId=o,this.transactionType=s,this.info=r}},t.ContactNavigationRequest=class extends o{constructor(e,t,n,i,o,s,r,a,c,l,d,u,h,g){super(p.ContactPicker,t,n,i),this.contactPickerMode=o,this.contactPickerType=s,this.initialContacts=r,this.transactionType=a,this.isVpaEnable=c,this.isSelfEnable=l,this.phoneContact=d,this.vpaContact=u,this.accountContact=h}},t.ProfileNavRequest=class extends o{constructor(e,t,n,i){super(e,t,n,i)}},t.HelpPageNavRequest=class extends o{constructor(e,t,n,i,o,s,r,a,c){super(p.HelpPage,t,n,i),this.transactionId=e,this.screen=r,this.url=a,this.shouldShowToolBar=o,this.shouldAllowWebViewBack=s,this.freshBotIntentData=c}},t.FreshBotIntentData=class{constructor(e){this.freshBotScreens=e,this.queryParams={}}},t.CloseAppNavRequest=class{constructor(e){this.appIdentifier=e}},t.MicroAppNavigationRequest=class extends o{constructor(e,t,n,i,o,s){super(p.MicroApp,i,o,s),this.appId=e,this.appUniqueId=t,this.initialProperties=n}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(11).ExternalPaymentModels.ActionButtonProp;{(t=(n=t.ExternalPaymentsNamespace||(t.ExternalPaymentsNamespace={})).Constant||(n.Constant={})).discoveryModeValue="PEER_TO_MERCHANT",t.title="Pay",t.transactionType="SENT_PAYMENT",t.timeoutTitle="Payment Expired",t.timeoutMessage="Sorry! Your payment request timed out. Please try again.",t.timeoutActionButtonTitle="OK",t.dismissTitle="Are you sure?",t.dismissMessage="Going back will cancel the payment. Are you sure you want to proceed?",t.dismissPositiveButtonTitle="I'm sure",t.dismissNegativeButtonTitle="Dismiss",t.PAYMENT_TIMEOUT="PAYMENT_TIMEOUT",t.PAYMENT_DISMISS="PAYMENT_DISMISS",t.kMerchantId="merchantId",t.kSellingPrice="sellingPrice",t.kPayableAmount="payableAmount",t.kServiceType="serviceType",t.kServiceTypeValue="WEBAPP",t.kReservationId="reservationId",t.kServiceRequestId="serviceRequestId",t.kServiceCategory="serviceCategory",t.kServiceCategoryValue="WEB",t.kServiceContext="serviceContext",t.kQuantity="quantity",t.kValidFor="validFor",t.kMerchantTransactionId="merchantTransactionId",t.kServiceTypeVersion="serviceTypeVersion",t.kKey="key",t.kValue="value",(t=n.CONTACT_TYPE||(n.CONTACT_TYPE={}))[t.CONTACT_TYPE_VPA=1]="CONTACT_TYPE_VPA",t[t.CONTACT_TYPE_PHONE=2]="CONTACT_TYPE_PHONE",t[t.CONTACT_TYPE_MERCHANT=3]="CONTACT_TYPE_MERCHANT",t[t.CONTACT_TYPE_USER_DATA=4]="CONTACT_TYPE_USER_DATA",t[t.CONTACT_TYPE_EXTERNAL_UPI_MERCHANT=5]="CONTACT_TYPE_EXTERNAL_UPI_MERCHANT",t[t.CONTACT_TYPE_RETAIL_MERCHANT=6]="CONTACT_TYPE_RETAIL_MERCHANT",t[t.CONTACT_TYPE_BANK_ACCOUNT=7]="CONTACT_TYPE_BANK_ACCOUNT",t[t.CONTACT_TYPE_WALLET=8]="CONTACT_TYPE_WALLET",t[t.CONTACT_TYPE_MY_ACCOUNT=9]="CONTACT_TYPE_MY_ACCOUNT",(t=n.PAYMENT_MODE||(n.PAYMENT_MODE={}))[t.MODE_SEND_MONEY=1]="MODE_SEND_MONEY",t[t.MODE_SPLIT_MONEY=2]="MODE_SPLIT_MONEY",t[t.REQUEST_MONEY=3]="REQUEST_MONEY",t[t.MODE_RECHARGE_MOBILE=4]="MODE_RECHARGE_MOBILE",t[t.MODE_WALLET_TOP_UP=5]="MODE_WALLET_TOP_UP",t[t.MODE_BLE_PAYMENT=6]="MODE_BLE_PAYMENT",(t=n.TRANSACTION_TYPE||(n.TRANSACTION_TYPE={})).SENT_PAYMENT="SENT_PAYMENT",t.RECEIVED_PAYMENT="RECEIVED_PAYMENT",t.USER_TO_USER_SENT_REQUEST="USER_TO_USER_SENT_REQUEST",t.USER_TO_USER_RECEIVED_REQUEST="USER_TO_USER_RECEIVED_REQUEST",t.ENSEMBLE_SENT_PAYMENT="ENSEMBLE_SENT_PAYMENT",t.MISSED_PAYMENT="MISSED_PAYMENT",t.PHONE_RECHARGE="PHONE_RECHARGE",t.BILL_PAYMENT="BILL_PAYMENT",t.TICKETING="TICKETING",t.COMMUTE="COMMUTE",t.UNKNOWN="UNKNOWN",(t=n.TRANSFER_MODE||(n.TRANSFER_MODE={})).MERCHANT_REVERSAL="MERCHANT_REVERSAL",t.MERCHANT_CASHBACK="MERCHANT_CASHBACK",n.Contact=class{constructor(e,t,n,i){this.type=e,this.name=t,this.displayImageUrl=n,this.lookupId=i}},n.InternalPaymentUiConfig=class{constructor(e,t,n,i,o,s){this.isAmountEditable=!1,this.isInitialContactEditable=!1,this.isNoteEditable=!1,this.showRateMeDialog=!1,this.title=e,this.initialAmount=t,this.initialContactList=n,this.confirmationScreenDuration=i,o?this.confirmationActionButtonProperties=o:(e={PENDING:new r("DONE"),COMPLETED:new r("VIEW BOOKING"),ERRORED:new r("DONE"),DEFAULT:new r("DONE")},this.confirmationActionButtonProperties=e),this.shouldConfirmationCloseOnFailure=s||!1}};class i{constructor(e){this.allowedInstruments=e,this.supportedInstruments=e}}n.PayRequest=i,n.MicroPayRequest=class extends i{constructor(e,t,n,i,o,s){super(t),this.merchantId=e,this.serviceVersion=n,this.fallbackURL=i,this.paymentOptionsContext=o,this.serviceRequestId=s}},n.PaymentTimeOutModel=class{constructor(e,t,n,i,o,s){this.time=e,this.showDialog=t,this.title=n,this.message=i,this.actionButtonName=o,this.errorCode=s}},n.DismissBehaviourModel=class{constructor(e,t,n,i,o,s){this.showDialog=e,this.title=t,this.message=n,this.positiveButton=i,this.negativeButton=o,this.errorCode=s}},n.TopUpConsentContext=class{constructor(e,t,n){this.showDialog=e,this.title=t,this.message=n}},n.AddToWalletUiContext=class{constructor(e,t,n,i,o,s,r,a,c,l,d,u){this.walletPageTitle=e,this.suggestedAmount=t,this.showCloseWalletOption=n,this.hideWalletWithdrawal=i,this.minAmount=o,this.showRateMeDialog=s,this.isAmountEditable=r,this.confirmationScreenDuration=a,this.showTopupConsent=c,this.topUpConsentContext=l,this.paymentDismiss=d,this.paymentOptionsContext=u}},n.MandateConfig=class{constructor(e,t,n,i,o,s){this.type=e,this.merchantId=t,this.serviceProviderIds=n,this.serviceType=i,this.serviceCategory=o,this.entityType=s}},n.MandateVisibleProperties=class{constructor(e,t,n,i,o){this.amount=e,this.frequency=t,this.autoPayDay=n,this.payeeWidget=i,this.toolbar=o}},n.MandateUiConfig=class{constructor(e,t,n,i,o,s,r,a,c,l,d,u,h,g,p){this.visibilityProperty=e,this.analyticsInfo=t,this.successMessage=n,this.actionButtonText=i,this.title=o,this.merchantName=s,this.merchantMandateDescription=r,this.merchantBannerImageId=a,this.merchantBannerImageSection=c,this.merchantImageId=l,this.merchantImageSection=d,this.mandateInfoLink=u,this.confirmationScreenDuration=h,this.dismissButtonDisplayTimeout=g,this.contactId=p}},n.PaymentOptionsContext=class{constructor(e){this.type="FULFILL_SERVICE",this.metaData=e}},n.PaymentOptionsContextMetadata=class{constructor(e,t,n,i){this.merchantId=e,this.serviceCategory=t,this.serviceProviderId=n,this.serviceType=i}}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let o=n(5);class i{static addSubscription(e){let t=this.eventNameToSubscriptionMapping[e.eventName];(t=t||[]).push(e),this.eventNameToSubscriptionMapping[e.eventName]=t}static removeSubscription(e){var t=e.eventName,n=e.callbackName,i=this.eventNameToSubscriptionMapping[t];if(i){let e=[],t=0;for(var o of i)o.callbackName===n&&(e.push(t),t++);for(;e.length;){var s=e.pop();s&&i.splice(s,1)}}}static removeAllSubscriptions(e){this.eventNameToSubscriptionMapping.hasOwnProperty(e)&&delete this.eventNameToSubscriptionMapping[e]}static sendEvent(e,t){var n=this.eventNameToSubscriptionMapping[e];if(n)for(var i of n)i.listener(t);else o.Logger.logd("PhonePe","[Error] No subscribers for eventName = "+e)}}i.eventNameToSubscriptionMapping={},t.EventHandler=i},function(e,t,n){var o=this&&this.__awaiter||function(s,r,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((c=c.apply(s,r||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let i=n(6),s=n(12),r=n(14),a=n(16),c=n(10),d=n(4),u=n(18),l=n(22),h=n(25),g=n(30),p=n(32),m=n(34),P=n(36),v=n(1),f=n(8),y=n(2),_=n(0),b=n(3),C=n(7),T=n(11),N=n(38),E=n(40),S=n(42);var I=_.ExternalConstants.Permission;t.MessagingHandler=v.MessagingHandler,t.EventHandler=f.EventHandler,t.Constants=_.ExternalConstants,t.PaymentModels=T.ExternalPaymentModels;class w{constructor(e,t){this.preferencesModule=g.NativePreferenceBridgeFactory.getNativePreferenceBridge(e,t),this.locationModule=l.LocationBridgeFactory.getNativeLocationBridge(e,t),this.navigationModule=h.NativeNavigationFactory.repository(e,t),this.cameraBridge=E.NativeCameraBridgeFactory.getNativeCameraBridge(e),this.permissionsBridge=a.NativePermissionsBridgeFactory.getPermissionsBridge(e,t),this.analyticsBridge=r.NativeAnalyticsBridgeFactory.getNativeAnalyticsBridge(e,t),this.authBridge=s.NativeOAuthBridgeFactory.bridge(e),this.deviceInfoBridge=p.NativeDeviceInfoBridgeFactory.bridge(e),this.bleManagerBridge=N.default.getBleManagerBridge(e),this.orderActionBridge=m.NativeOrderActionBridgeFactory.bridge(e),this.filePickerBridge=P.NativeFilePickerBridgeFactory.bridge(e),this.species=e}static build(n,i){return o(this,void 0,void 0,function*(){let e=i;var t;if((e=e||this.getOperatingSystem(n))&&(d.PhonePeUtils.isValidSpecies(n)&&d.PhonePeUtils.isValidOS(e)))return t=new w(n,e),n===_.ExternalConstants.Species.web&&(yield c.MethodVersioningHandler.initSupportedVersionFromNative()),t;throw new Error(y.InternalConstants.ErrorCode.invalidParams)})}static getOperatingSystem(e){return e===_.ExternalConstants.Species.web&&-1===navigator.userAgent.search(_.ExternalConstants.OSUserAgent.android)&&(-1!==navigator.userAgent.search(_.ExternalConstants.OSUserAgent.ios)||(e=b.PhonePeSDKWebConstants.NavigationIOS.navigateToPaymentsView,d.PhonePeUtils.isValidMethodOniOS(e)))?_.ExternalConstants.OS.ios:_.ExternalConstants.OS.android}getItem(e,t,n){try{d.PhonePeUtils.assertString(e),d.PhonePeUtils.assertString(t),d.PhonePeUtils.assertString(n,!0)}catch(e){return d.PhonePeUtils.returnRejection(e)}return this.preferencesModule.getString(e,t,n)}setItem(e,t,n){try{d.PhonePeUtils.assertString(e),d.PhonePeUtils.assertString(t),d.PhonePeUtils.assertString(n)}catch(e){return d.PhonePeUtils.returnRejection(e)}return this.preferencesModule.saveString(e,t,n),d.PhonePeUtils.returnResolution(void 0)}removeItem(e,t){try{d.PhonePeUtils.assertString(e),d.PhonePeUtils.assertString(t)}catch(e){return d.PhonePeUtils.returnRejection(e)}return this.preferencesModule.removeItem(e,t),d.PhonePeUtils.returnResolution(void 0)}startUpdatingLocation(){this.locationModule.startUpdatingLocation()}stopUpdatingLocation(){this.locationModule.stopUpdatingLocation()}getCurrentLocation(){return this.locationModule.getCurrentLocation(!0)}registerLocationUpdateSuccessCallback(e,t){try{d.PhonePeUtils.assertString(e),d.PhonePeUtils.assertFunction(t)}catch(e){return d.PhonePeUtils.returnRejection(e)}t=this.locationModule.onLocationUpdateSuccess(e,t);return d.PhonePeUtils.returnResolution(t)}registerLocationUpdateFailureCallback(e,t){try{d.PhonePeUtils.assertString(e),d.PhonePeUtils.assertFunction(t)}catch(e){return d.PhonePeUtils.returnRejection(e)}t=this.locationModule.onLocationUpdateFailure(e,t);return d.PhonePeUtils.returnResolution(t)}openPaymentsPage(e,t,n,i,o,s){return this.makeCommonPaymentsPageCall(y.InternalConstants.General.v1,e,t,n,i,o,s)}openTransactionDetailsPage(e){try{d.PhonePeUtils.assertString(e)}catch(e){return d.PhonePeUtils.returnRejection(e)}var t=u.ExternalNavigationFactory.transactionDetailRequest(e);return this.navigationModule.processNavigationRequestForResultAsync(t)}seekPermission(e){try{d.PhonePeUtils.assertArray(e);for(var t of e)d.PhonePeUtils.assertString(t),d.PhonePeUtils.assert(void 0!==I[t],y.InternalConstants.ErrorCode.invalidParams)}catch(e){return d.PhonePeUtils.returnRejection(e)}return this.permissionsBridge.seekPermission(e)}openSettingsPageForPermission(){return this.permissionsBridge.openSettingsPageForPermission()}scanQRCode(e,t=".*"){return this.cameraBridge.scanQRCode(e,t)}startCamera(){return this.cameraBridge.startCamera()}loadFont(e,t,n){if(this.species===_.ExternalConstants.Species.web)return d.PhonePeUtils.returnRejection(y.InternalConstants.ErrorCode.invalidParams);throw new Error("Wrong species sent")}logMerchantEvent(e,t){try{d.PhonePeUtils.assertString(e),d.PhonePeUtils.assertObject(t,!0)}catch(e){return d.PhonePeUtils.returnRejection(e)}return this.analyticsBridge.logMerchantEvent(e,t)}fetchGrantToken(){return this.authBridge.fetchGrantToken()}fetchAuthToken(){return this.authBridge.fetchAuthToken()}createServiceRequestToken(){return this.orderActionBridge.createServiceRequestToken()}getDeviceInfo(){return this.deviceInfoBridge.getDeviceInfo()}bluetoothRead(e,t,n){return this.bleManagerBridge.read(e,t,n)}bluetoothReadRSSI(e){return this.bleManagerBridge.readRSSI(e)}bluetoothRefreshCache(e){return this.bleManagerBridge.refreshCache(e)}bluetoothRetrieveServices(e,t){return this.bleManagerBridge.retrieveServices(e,t)}bluetoothWrite(e,t,n,i,o=20){return this.bleManagerBridge.write(e,t,n,i,o)}bluetoothWriteWithoutResponse(e,t,n,i,o=20,s=10){return this.bleManagerBridge.writeWithoutResponse(e,t,n,i,o,s)}bluetoothConnect(e){return this.bleManagerBridge.connect(e)}bluetoothCreateBond(e){return this.bleManagerBridge.createBond(e)}bluetoothRemoveBond(e){return this.bleManagerBridge.removeBond(e)}bluetoothDisconnect(e){return this.bleManagerBridge.disconnect(e)}bluetoothStartNotification(e,t,n){return this.bleManagerBridge.startNotification(e,t,n)}bluetoothStopNotification(e,t,n){return this.bleManagerBridge.stopNotification(e,t,n)}bluetoothCheckState(){this.bleManagerBridge.checkState()}bluetoothStart(e){return this.bleManagerBridge.start(e)}bluetoothScan(e,t,n=!1,i={}){return this.bleManagerBridge.scan(e,t,n,i)}bluetoothStopScan(){return this.bleManagerBridge.stopScan()}bluetoothEnableBluetooth(){return this.bleManagerBridge.enableBluetooth()}bluetoothGetConnectedPeripherals(e){return this.bleManagerBridge.getConnectedPeripherals(e)}bluetoothGetBondedPeripherals(){return this.bleManagerBridge.getBondedPeripherals()}bluetoothGetDiscoveredPeripherals(){return this.bleManagerBridge.getDiscoveredPeripherals()}bluetoothRemovePeripheral(e){return this.bleManagerBridge.removePeripheral(e)}bluetoothIsPeripheralConnected(e,t){return this.bleManagerBridge.isPeripheralConnected(e,t)}bluetoothRequestConnectionPriority(e,t){return this.bleManagerBridge.requestConnectionPriority(e,t)}bluetoothRequestMTU(e,t){return this.bleManagerBridge.requestMTU(e,t)}reserveOrder(e,t){let n;try{d.PhonePeUtils.assertString(e),d.PhonePeUtils.assertString(t),n=JSON.parse(S.Base64Client.decode(e)),d.PhonePeUtils.assertObject(n)}catch(e){return d.PhonePeUtils.returnRejection(e)}return this.orderActionBridge.reserveOrder(d.PhonePeUtils.getReserveOrderPayload(n,t))}proceedToPay(e,t){try{this.logMerchantEvent("CATEGORY_PAYMENT_INIT",{}),d.PhonePeUtils.assertString(e),w.getOperatingSystem(this.species)===_.ExternalConstants.OS.ios&&d.PhonePeUtils.assertString(t)}catch(e){return d.PhonePeUtils.returnRejection(e)}t=t?encodeURIComponent(t):"",t=u.ExternalNavigationFactory.genericPaymentNavigationRequest(e,t);return this.navigationModule.processNavigationRequestForResultAsync(t)}openPaymentsPageForReservedOrder(e,t,n,i,o,s){t=JSON.parse(S.Base64Client.decode(t));return this.makeCommonPaymentsPageCall(y.InternalConstants.General.v2,e,t,n,i,o,s)}makeCommonPaymentsPageCall(e,t,s,n,i,o,r){try{d.PhonePeUtils.assertString(t),d.PhonePeUtils.assertObject(s),this.species===_.ExternalConstants.Species.web&&d.PhonePeUtils.assertString(n,!0),d.PhonePeUtils.assertString(i,!0),d.PhonePeUtils.assertArray(o,!0)}catch(e){return d.PhonePeUtils.returnRejection(e)}let a=s[C.ExternalPaymentsNamespace.Constant.kPayableAmount],c=a?{amount:a}:{},l=(this.logMerchantEvent("CATEGORY_PAYMENT_INIT",c),u.ExternalNavigationFactory.paymentNavigationRequest(t,s,e,n,i,o,r));return new Promise((o,t)=>{this.navigationModule.processNavigationRequestForResultAsync(l).then(e=>{var t={},n=C.ExternalPaymentsNamespace.Constant.kMerchantTransactionId,i=s[n];i&&(t[n]=i),o(t)}).catch(e=>{t(e)})})}selectFile(e,t){try{d.PhonePeUtils.assertString(e),d.PhonePeUtils.assertBoolean(t)}catch(e){return d.PhonePeUtils.returnRejection(e)}return this.filePickerBridge.selectFile(e,t)}readFile(e,t,n){try{if(d.PhonePeUtils.assertString(e),d.PhonePeUtils.assertNumber(t),d.PhonePeUtils.assertNumber(n),t<0||n<0)throw new TypeError(y.InternalConstants.ErrorCode.invalidParams)}catch(e){return d.PhonePeUtils.returnRejection(e)}return this.filePickerBridge.readFile(e,t,n)}closeApp(){var e=new i.CloseAppNavRequest("");this.navigationModule.closeAppRequest(e)}openMicroApp(e,t){try{d.PhonePeUtils.assertString(e),d.PhonePeUtils.assertObject(t,!0)}catch(e){return d.PhonePeUtils.returnRejection(e)}t=new i.MicroAppNavigationRequest("",e,t,"",!0,!1);return this.navigationModule.processNavigationRequestAsync(t)}isMethodSupported(e){return c.MethodVersioningHandler.isMethodSupported(e)}}w.loggingEnabled=!1,t.PhonePe=w},function(e,t,n){var i=this&&this.__awaiter||function(s,r,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((c=c.apply(s,r||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let o=n(5),s=n(1),r=n(3),a=n(2);class c{static initSupportedVersionFromNative(){return i(this,void 0,void 0,function*(){yield this.fetchNativeSupportedSDKVersion().then(e=>{o.Logger.logd("PhonePe","Version received from native side = "+e),c.version=Number(e)}).catch(e=>{throw o.Logger.logd("PhonePe","Error found when trying to fetch version = "+e),Error("Something is really wrong here! We should be able to fetch version always. Are you sure you are testing it inside the PhonePe app?")}),this.populateMethodToVersionMapping()})}static isMethodSupported(e){if(e===r.PhonePeSDKWebConstants.Metadata.supportedVersion)return!0;if(!c.version)throw o.Logger.logd("PhonePe","[Error] Can't call isMethodSupported before native has returned the version"),Error("Can't call isMethodSupported before native has returned the version");var t,n,e=c.methodToVersionMapping[e];if(e)return t=e[r.PhonePeSDKWebConstants.General.min],e=e[r.PhonePeSDKWebConstants.General.max],n=c.version,o.Logger.logd("PhonePe","Comparing minVersion = "+t+" maxVersion = "+e+" nativeSDKSupportVersion = "+n),!(n<t||-1!==e&&e<n);throw o.Logger.logd("PhonePe","[Error] Could not find this method in mapping. This should never happen!"),Error("Could not find this method in mapping. This should never happen!")}static fetchNativeSupportedSDKVersion(){return o.Logger.logd("PhonePe","Trying to call supportedVersion method in fetchNativeSupportedSDKVersion"),s.MessagingHandler.storePromiseAndCallNative(r.PhonePeSDKWebConstants.Metadata.supportedVersion,r.PhonePeSDKWebConstants.Metadata.androidBridgeName,{})}static populateMethodToVersionMapping(){var e={min:1,max:-1};this.methodToVersionMapping[r.PhonePeSDKWebConstants.Preferences.getItem]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.Preferences.setItem]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.Preferences.removeItem]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.Preferences.removeItemAndroid]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.Location.startUpdatingLocation]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.Location.stopUpdatingLocation]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.Location.getCurrentLocation]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.Navigation.navigateToPath]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.Navigation.navigateToPathForResult]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.NavigationIOS.navigateToPaymentsView]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.NavigationIOS.navigateToHelpPage]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.NavigationIOS.navigateToTransactionDetail]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.User.getUserDetails]=e,this.methodToVersionMapping[r.PhonePeSDKWebConstants.Metadata.supportedVersion]=e,this.methodToVersionMapping[a.InternalConstants.PermissionsBridge.openSettingsPage]=e,this.methodToVersionMapping[a.InternalConstants.PermissionsBridge.seekPermission]=e,this.methodToVersionMapping[a.InternalConstants.AnalyticsBridge.methodName]=e,this.methodToVersionMapping[a.InternalConstants.AuthBridge.fetchGrantToken]=e,this.methodToVersionMapping[a.InternalConstants.CameraBridge.scanQRCode]=e,this.methodToVersionMapping[a.InternalConstants.CameraBridge.startCamera]=e,this.methodToVersionMapping[a.InternalConstants.OrderActionBridge.reserveOrder]=Object.assign({},e,{min:3}),this.methodToVersionMapping[a.InternalConstants.OrderActionBridge.openPaymentsPageForReservedOrder]=Object.assign({},e,{min:3}),this.methodToVersionMapping[a.InternalConstants.OrderActionBridge.fetchOrderRequestToken]=Object.assign({},e,{min:6}),this.methodToVersionMapping[a.InternalConstants.FilePickerBridge.readFile]=Object.assign({},e,{min:4}),this.methodToVersionMapping[a.InternalConstants.FilePickerBridge.selectFile]=Object.assign({},e,{min:4}),this.methodToVersionMapping[r.PhonePeSDKWebConstants.NavigationIOS.navigateToGenericPaymentsView]=Object.assign({},e,{min:5}),this.methodToVersionMapping[r.PhonePeSDKWebConstants.Navigation.navigateToGenericPayment]=Object.assign({},e,{min:5}),this.methodToVersionMapping[r.PhonePeSDKWebConstants.Navigation.navigateToGenericPaymentForResult]=Object.assign({},e,{min:5}),this.methodToVersionMapping[a.InternalConstants.AuthBridge.fetchAuthToken]=Object.assign({},e,{min:5})}}c.methodToVersionMapping={},t.MethodVersioningHandler=c},function(e,t,n){var i;Object.defineProperty(t,"__esModule",{value:!0}),t=t.ExternalPaymentModels||(t.ExternalPaymentModels={}),(i=t.TransactionState||(t.TransactionState={})).PENDING="PENDING",i.COMPLETED="COMPLETED",i.ERRORED="ERRORED",i.DEFAULT="DEFAULT",t.ActionButtonProp=class{constructor(e,t){this.name=e,this.shouldHide=t}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(13),o=n(0);t.NativeOAuthBridgeFactory=class{static bridge(e){if(e===o.ExternalConstants.Species.web)return new i.WebNativeOAuthBridge;throw new Error("Wrong species sent")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(1),o=n(2).InternalConstants.AuthBridge;t.WebNativeOAuthBridge=class{fetchGrantToken(){return new Promise((t,n)=>{i.MessagingHandler.storePromiseAndCallNative(o.fetchGrantToken,o.bridgeName,{}).then(e=>{t(JSON.parse(e))}).catch(e=>{n(e)})})}fetchAuthToken(){return new Promise((t,n)=>{i.MessagingHandler.storePromiseAndCallNative(o.fetchAuthToken,o.bridgeName,{}).then(e=>{t(JSON.parse(e))}).catch(e=>{n(e)})})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(15),o=n(0);t.NativeAnalyticsBridgeFactory=class{static getNativeAnalyticsBridge(e,t){if(e===o.ExternalConstants.Species.web)return new i.WebNativeAnalyticsBridge;throw new Error("Wrong species sent")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(1),o=n(2);var s=o.InternalConstants.AnalyticsBridge;t.WebNativeAnalyticsBridge=class{logMerchantEvent(e,t){return i.MessagingHandler.storePromiseAndCallNative(s.methodName,s.bridgeName,this.objectForAnalytics(e,t))}objectForAnalytics(e,t){var n={};return n[o.InternalConstants.AnalyticsBridge.kName]=e,t&&(n[o.InternalConstants.AnalyticsBridge.kMetadata]=t),n}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(17),o=n(0);t.NativePermissionsBridgeFactory=class{static getPermissionsBridge(e,t){if(e===o.ExternalConstants.Species.web)return new i.WebPermissionsBridge(t);throw new Error("Wrong species sent")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let o=n(5),s=n(4),r=n(1);var a=n(2).InternalConstants.PermissionsBridge;t.WebPermissionsBridge=class{constructor(e){this.operatingSystem=e}seekPermission(e){let i=s.PhonePeUtils.osSpecificPermissionNames(e,this.operatingSystem);return new Promise((t,n)=>{r.MessagingHandler.storePromiseAndCallNative(a.seekPermission,a.name,{permissions:i}).then(e=>{o.Logger.logd("PhonePe","Unstripped response = "+JSON.stringify(e)),"string"==typeof e?((e=JSON.parse(e)).forEach(e=>{var t=s.PhonePeUtils.strippedPermissionName(e[a.kPermission],this.operatingSystem);e[a.kPermission]=t}),o.Logger.logd("PhonePe","Stripped response = "+JSON.stringify(e)),t(e)):n("Wrong response sent by PhonePe")}).catch(e=>{n(e)})})}openSettingsPageForPermission(){return r.MessagingHandler.storePromiseAndCallNative(a.openSettingsPage,a.name,{})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let P=n(19),v=n(20),f=n(6),y=n(7),_=n(21);var b=y.ExternalPaymentsNamespace.Constant;t.ExternalNavigationFactory=class{static genericPaymentNavigationRequest(e,t){return new f.GenericPaymentNavigationRequest("Pay",!0,!1,e,t)}static paymentNavigationRequest(e,t,n,i,o,s,r){let a=t[y.ExternalPaymentsNamespace.Constant.kPayableAmount],c=t[y.ExternalPaymentsNamespace.Constant.kValidFor];c&&(c*=1e3);var l=t[b.kMerchantId],e=v.ExternalPaymentsRequestFactory.internalPaymentUIConfig(a,e,c,o,r,l),o=v.ExternalPaymentsRequestFactory.microPayRequest(t,n,i),r=new f.PaymentMetaData([{}]);if(void 0!==s){var d,u,h,g=[];for(d of s)for(var p in d)d.hasOwnProperty(p)&&(u=p,p=d[p],(h={})[b.kKey]=u,h[b.kValue]=p,g.push(h));r.details=g}let m=t[b.kServiceCategory];m=m||"JSSDK";l=new P.OriginInfo(new _.AnalyticsInfo(m,m+"_NAVIGATE_TO_PAYMENTS",Math.random().toString(36).substring(7)));return new f.PaymentNavigationRequest("Pay","Pay",!0,!1,y.ExternalPaymentsNamespace.PAYMENT_MODE.MODE_SEND_MONEY,o,e,y.ExternalPaymentsNamespace.TRANSACTION_TYPE.SENT_PAYMENT,r,l)}static transactionDetailRequest(e){var t=new P.OriginInfo(new _.AnalyticsInfo("JSSDK","JSSDK_NAVIGATE_TO_TRANSACTION_DETAILS",Math.random().toString(36).substring(7)));return new f.TransactionDetailsNavigationRequest("Details","Details",!0,!1,e,y.ExternalPaymentsNamespace.TRANSACTION_TYPE.SENT_PAYMENT,t)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OriginInfo=class{constructor(e){this.analyticsInfo=e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),s=i.ExternalPaymentsNamespace.Constant,r=i.ExternalPaymentsNamespace.PaymentOptionsContext,a=i.ExternalPaymentsNamespace.PaymentOptionsContextMetadata,c=i.ExternalPaymentsNamespace.MicroPayRequest,o=i.ExternalPaymentsNamespace.PaymentTimeOutModel,l=i.ExternalPaymentsNamespace.DismissBehaviourModel,d=i.ExternalPaymentsNamespace.InternalPaymentUiConfig,u=i.ExternalPaymentsNamespace.Contact,h=i.ExternalPaymentsNamespace.CONTACT_TYPE;let g=n(2);t.ExternalPaymentsRequestFactory=class{static microPayRequest(e,t,n){var i=e[s.kServiceRequestId],n=new c(e[s.kMerchantId],191,g.InternalConstants.General.v1,n,void 0,i),i=(n.serviceProviderId=n.merchantId,{}),o=(i[s.kSellingPrice]=e[s.kPayableAmount],i[s.kServiceType]=s.kServiceTypeValue,i[s.kReservationId]=e[s.kReservationId],{}),o=(o[s.kServiceCategory]=e[s.kServiceCategory],i[s.kServiceContext]=o,e[s.kQuantity]&&(i[s.kQuantity]=e[s.kQuantity]),i[s.kServiceTypeVersion]=e[s.kServiceTypeVersion],n.fulFillContext=JSON.stringify(i),n.discoveryContext=JSON.stringify(this.discoveryContext(n.merchantId)),new a(n.merchantId,e[s.kServiceCategory],n.merchantId,s.kServiceTypeValue));return n.paymentOptionsContext=JSON.stringify(new r(o)),n}static discoveryContext(e){return{merchantId:e,mode:g.InternalConstants.General.discoveryContextMode}}static internalPaymentUIConfig(e,t,n,i,o,s){t=[new u(h.CONTACT_TYPE_MERCHANT,t,i,s)],i=g.InternalConstants.General.confirmationScreenDuration,s=new d(g.InternalConstants.General.paymentScreenName,e,t,i,o);return null!=n&&0<n&&(s.paymentTimeout=this.paymentTimeoutModel(n)),s.paymentDismiss=this.paymentDismissModel(),s}static paymentTimeoutModel(e){return new o(e,!0,s.timeoutTitle,s.timeoutMessage,s.timeoutActionButtonTitle,s.PAYMENT_TIMEOUT)}static paymentDismissModel(){return new l(!0,s.dismissTitle,s.dismissMessage,s.dismissPositiveButtonTitle,s.dismissNegativeButtonTitle,s.PAYMENT_DISMISS)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsInfo=class{constructor(e,t,n){this.category=e,this.action=t,this.groupingKey=n,this.startTimeStamp=(new Date).getTime(),this.lastTimeStamp=this.startTimeStamp,this.customDimens={},this.isTransactionalEvent=!1,this.value=0,this.isFirstTime=!0}setValue(e){this.value=e}setTransactionalEvent(e){this.isTransactionalEvent=!0,this.value=e}setCustomDimension(e){this.customDimens=e}setLastTimeStamp(e){this.lastTimeStamp=e}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(23),o=n(0);t.LocationBridgeFactory=class{static getNativeLocationBridge(e,t){if(e===o.ExternalConstants.Species.web)return new i.WebLocationBridge;throw new Error("Wrong species sent")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(24),o=n(3),s=n(1),r=n(8);var a=o.PhonePeSDKWebConstants.Location;t.WebLocationBridge=class{getAddress(e,t){return Promise.resolve()}startUpdatingLocation(){s.MessagingHandler.callNative(a.startUpdatingLocation,a.androidBridgeName,{})}stopUpdatingLocation(){s.MessagingHandler.callNative(a.stopUpdatingLocation,a.androidBridgeName,{}),r.EventHandler.removeAllSubscriptions(a.locationSuccessEventKey),r.EventHandler.removeAllSubscriptions(a.locationFailureEventKey)}getCurrentLocation(){var e={};return e[a.forceNewLocation]=!0,s.MessagingHandler.storePromiseAndCallNative(a.getCurrentLocation,a.androidBridgeName,e)}onLocationUpdateSuccess(e,t){e=new i.PhonePeWebSubscription(e,a.locationSuccessEventKey,t);return r.EventHandler.addSubscription(e),e}onLocationUpdateFailure(e,t){e=new i.PhonePeWebSubscription(e,a.locationFailureEventKey,t);return r.EventHandler.addSubscription(e),e}isLocationTurnedOn(){return Promise.resolve()}turnOnLocation(){return Promise.resolve()}setLocationPriority(e){}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(8);t.PhonePeWebSubscription=class{constructor(e,t,n){this.eventName=t,this.listener=n,this.callbackName=e}remove(){i.EventHandler.removeSubscription(this)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(26),o=n(29),s=n(0);t.NativeNavigationFactory=class{static repository(e,t){if(e===s.ExternalConstants.Species.web)return new(t===s.ExternalConstants.OS.ios?o.IOSWebNavigationHandler:i.AndroidWebNavigationHandler);throw new Error("Wrong species sent")}}},function(e,t,n){var o=this&&this.__awaiter||function(s,r,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((c=c.apply(s,r||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let i=n(4),s=n(1),r=n(27),a=n(6),c=n(3),l=n(2);var d=c.PhonePeSDKWebConstants.Navigation,u=l.InternalConstants.ActivityID;class h{processNavigationRequestAsync(e,t){return o(this,void 0,void 0,function*(){return e.screenType===a.NavigationScreenType.PaymentsView?this.navigateToPayment(e,e.isNewTask,t):e.screenType===a.NavigationScreenType.TransactionDetail?this.navigateToTransactionDetail(e,e.isNewTask,t):e.screenType===a.NavigationScreenType.GenericPaymentsView?this.navigateToGenericPayment(e,e.isNewTask,t):i.PhonePeUtils.returnRejection("Unhandled request type")})}processNavigationRequestForResultAsync(e){return o(this,void 0,void 0,function*(){return this.processNavigationRequestAsync(e,!0)})}navigateToPayment(e,t,n){e=r.NativeNavigationRequestFactory.pathFromPaymentRequest(e,t),e=this.objectForNavigation(e,u.payments,t);return n?s.MessagingHandler.storePromiseAndCallNative(d.navigateToPathForResult,d.androidBridgeName,e):s.MessagingHandler.callNative(d.navigateToPath,d.androidBridgeName,e)}navigateToTransactionDetail(t,n,i){return o(this,void 0,void 0,function*(){var e=r.NativeNavigationRequestFactory.pathFromTransactionDetailsRequest(t,n),e=this.objectForNavigation(e,u.transactionDetails,n);return i?s.MessagingHandler.storePromiseAndCallNative(d.navigateToPathForResult,d.androidBridgeName,e):s.MessagingHandler.callNative(d.navigateToPath,d.androidBridgeName,e)})}navigateToGenericPayment(e,t,n){e=r.NativeNavigationRequestFactory.pathFromGenericPaymentRequest(e,t),e=this.objectForNavigation(e,u.payments,t);return n?s.MessagingHandler.storePromiseAndCallNative(d.navigateToPathForResult,d.androidBridgeName,e):s.MessagingHandler.callNative(d.navigateToPath,d.androidBridgeName,e)}objectForNavigation(e,t,n){var i={};return i[h.pathKey]=JSON.stringify(e),i[h.activityIdKey]=t,i[h.isNewTaskKey]=n?268435456:0,i}closeAppRequest(e){}}h.pathKey="path",h.activityIdKey="activityId",h.isNewTaskKey="isNewTask",t.AndroidWebNavigationHandler=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let s=n(28);t.NativeNavigationRequestFactory=class{static pathFromPaymentRequest(e,t){var n=[],i=new s.Node("payment_activity","ACTIVITY",{}),o={},e=(o.mode=JSON.stringify(e.mode),o.internalPaymentUiConfig=JSON.stringify(e.internalPaymentUiConfig),o.microPayRequest=JSON.stringify(e.microPayRequest),o.transactionType=JSON.stringify(e.transactionType),o.info=JSON.stringify(e.originInfo),o.metaData=JSON.stringify(e.metaData),new s.Node("micro_app_payment","FRAGMENT",o));return n.push(i),n.push(e),new s.Path(n)}static pathFromGenericPaymentRequest(e,t){var n=[],i=new s.Node("payment_activity","ACTIVITY",{}),o={},e=(o.reservationId=e.reservationId,o.fallbackUrl=e.fallbackUrl,new s.Node("micro_app_aggregator_payment","FRAGMENT",o));return n.push(i),n.push(e),new s.Path(n)}static pathFromTransactionDetailsRequest(e,t){var n=[],i=new s.Node("transaction_details_activity","ACTIVITY",{}),o={},e=(o.transactionId=JSON.stringify(e.transactionId),o.transactionType=JSON.stringify("TICKETING"),o.info=JSON.stringify(e.info),new s.Node("transaction_details_fragment","FRAGMENT",o));return n.push(i),n.push(e),new s.Path(n)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Node=class{constructor(e,t,n){this.name=e,this.screenType=t,this.data=n}},t.Path=class{constructor(e){this.node=e}}},function(e,t,n){var i=this&&this.__awaiter||function(s,r,a,c){return new(a=a||Promise)(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((c=c.apply(s,r||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let o=n(4),s=n(6),r=n(1),a=n(3);t.IOSWebNavigationHandler=class{processNavigationRequestAsync(e,t){return i(this,void 0,void 0,function*(){return e.screenType===s.NavigationScreenType.PaymentsView?this.navigateToPayment(e,e.isNewTask,t):e.screenType===s.NavigationScreenType.TransactionDetail?this.navigateToTransactionDetail(e,e.isNewTask,t):e.screenType===s.NavigationScreenType.GenericPaymentsView?this.navigateToGenericPayment(e,e.isNewTask,t):o.PhonePeUtils.returnRejection("Unhandled request type")})}processNavigationRequestForResultAsync(e){return i(this,void 0,void 0,function*(){return this.processNavigationRequestAsync(e,!0)})}navigateToPayment(e,t,n){var i=a.PhonePeSDKWebConstants.NavigationIOS.navigateToPaymentsView;return r.MessagingHandler.storePromiseAndCallNative(i,"",e)}navigateToTransactionDetail(n,e,t){return i(this,void 0,void 0,function*(){var e=n,t=a.PhonePeSDKWebConstants.NavigationIOS.navigateToTransactionDetail;return r.MessagingHandler.storePromiseAndCallNative(t,"",e)})}navigateToGenericPayment(n,e,t){return i(this,void 0,void 0,function*(){var e=n,t=a.PhonePeSDKWebConstants.NavigationIOS.navigateToGenericPaymentsView;return r.MessagingHandler.storePromiseAndCallNative(t,"",e)})}closeAppRequest(e){}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(31),o=n(0);t.NativePreferenceBridgeFactory=class{static getNativePreferenceBridge(e,t){if(e===o.ExternalConstants.Species.web)return new i.WebNativePreferenceBridge(t);throw new Error("Wrong species sent")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(5),o=n(1),s=n(0),r=n(3);var a=r.PhonePeSDKWebConstants.Preferences;t.WebNativePreferenceBridge=class{constructor(e){this.operatingSystem=e}getString(e,t,n){e=this.prefObject(e,t,void 0,n);return o.MessagingHandler.storePromiseAndCallNative(a.getItem,a.androidBridgeName,e)}getNumber(e,t,n){return new Promise((e,t)=>{t("This should not be called in case of web pref bridge")})}getDecryptedUserId(){return new Promise((e,t)=>{t("This should not be called in case of web pref bridge")})}saveNumber(e,t,n){i.Logger.logd("PhonePe","[Error] his should not be called in case of web pref bridge")}saveString(e,t,n){e=this.prefObject(e,t,n,void 0);o.MessagingHandler.callNative(a.setItem,a.androidBridgeName,e)}removeItem(e,t){let n=this.prefObject(e,t,void 0,void 0),i=a.removeItem;this.operatingSystem===s.ExternalConstants.OS.android&&(i=a.removeItemAndroid),o.MessagingHandler.callNative(i,r.PhonePeSDKWebConstants.Preferences.androidBridgeName,n)}prefObject(e,t,n,i){var o={};return e&&(o[r.PhonePeSDKWebConstants.General.prefName]=e),t&&(o[r.PhonePeSDKWebConstants.General.key]=t),i&&(o[r.PhonePeSDKWebConstants.General.defaultValue]=i),n&&(o[r.PhonePeSDKWebConstants.General.value]=n),o}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(33),o=n(0);t.NativeDeviceInfoBridgeFactory=class{static bridge(e){if(e===o.ExternalConstants.Species.web)return new i.WebNativeDeviceInfoBridge;throw new Error("Wrong species sent")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebNativeDeviceInfoBridge=class{getDeviceInfo(){return Promise.resolve()}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(35),o=n(0);t.NativeOrderActionBridgeFactory=class{static bridge(e){if(e===o.ExternalConstants.Species.web)return new i.WebNativeOrderActionBridge;throw new Error("Wrong species sent")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(1),o=n(2).InternalConstants.OrderActionBridge;t.WebNativeOrderActionBridge=class{reserveOrder(e){return new Promise((t,n)=>{i.MessagingHandler.storePromiseAndCallNative(o.reserveOrder,o.bridgeName,e).then(e=>{t(JSON.parse(e))}).catch(e=>{n(e)})})}createServiceRequestToken(){return new Promise((t,n)=>{i.MessagingHandler.storePromiseAndCallNative(o.fetchOrderRequestToken,o.bridgeName,{}).then(e=>{t(JSON.parse(e))}).catch(e=>{n(e)})})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(37),o=n(0);t.NativeFilePickerBridgeFactory=class{static bridge(e){if(e===o.ExternalConstants.Species.web)return new i.WebNativeFilePickerBridge;throw new Error("Wrong species sent")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let s=n(1),r=n(2).InternalConstants.FilePickerBridge;t.WebNativeFilePickerBridge=class{selectFile(e,i){return new Promise((t,n)=>{s.MessagingHandler.storePromiseAndCallNative(r.selectFile,r.bridgeName,{mimeType:e,allowMultiple:i}).then(e=>{t(JSON.parse(e))}).catch(e=>{n(e)})})}readFile(e,i,o){return new Promise((t,n)=>{s.MessagingHandler.storePromiseAndCallNative(r.readFile,r.bridgeName,{uri:e,offset:i,length:o}).then(e=>{t(JSON.parse(e))}).catch(e=>{n(e)})})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(0),o=n(39);t.default=class{static getBleManagerBridge(e){if(e===i.ExternalConstants.Species.web)return new o.WebPPBleManager;throw new Error("Wrong species sent")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebPPBleManager=class{read(e,t,n){throw new Error("Wrong species sent")}readRSSI(e){throw new Error("Wrong species sent")}refreshCache(e){throw new Error("Wrong species sent")}retrieveServices(e,t){throw new Error("Wrong species sent")}write(e,t,n,i,o){throw new Error("Wrong species sent")}writeWithoutResponse(e,t,n,i,o,s){throw new Error("Wrong species sent")}connect(e){throw new Error("Wrong species sent")}createBond(e){throw new Error("Wrong species sent")}removeBond(e){throw new Error("Wrong species sent")}disconnect(e){throw new Error("Wrong species sent")}startNotification(e,t,n){throw new Error("Wrong species sent")}stopNotification(e,t,n){throw new Error("Wrong species sent")}checkState(){throw new Error("Wrong species sent")}start(e){throw new Error("Wrong species sent")}scan(e,t,n,i){throw new Error("Wrong species sent")}stopScan(){throw new Error("Wrong species sent")}enableBluetooth(){throw new Error("Wrong species sent")}getConnectedPeripherals(e){throw new Error("Wrong species sent")}getBondedPeripherals(){throw new Error("Wrong species sent")}getDiscoveredPeripherals(){throw new Error("Wrong species sent")}removePeripheral(e){throw new Error("Wrong species sent")}isPeripheralConnected(e,t){throw new Error("Wrong species sent")}requestConnectionPriority(e,t){throw new Error("Wrong species sent")}requestMTU(e,t){throw new Error("Wrong species sent")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(41),o=n(0);t.NativeCameraBridgeFactory=class{static getNativeCameraBridge(e){if(e===o.ExternalConstants.Species.web)return new i.WebNativeCameraBridge;throw new Error("Wrong species sent")}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let o=n(1);var s=n(3).PhonePeSDKWebConstants.Camera;t.WebNativeCameraBridge=class{scanQRCode(e,i){return new Promise((t,n)=>{o.MessagingHandler.storePromiseAndCallNative(s.scanQRCode,s.androidBridgeName,{showGallery:e,validator:i}).then(e=>{t(e)}).catch(e=>{n(e)})})}startCamera(){return new Promise((t,n)=>{o.MessagingHandler.storePromiseAndCallNative(s.startCamera,s.androidBridgeName,{}).then(e=>{t(e)}).catch(e=>{n(e)})})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});let i=n(43);t.Base64Client=class{static encode(e){return i.Base64.encode(e)}static decode(e){return i.Base64.decode(e)}}},function(module,exports,__webpack_require__){!function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(global,factory){module.exports=function(global){var _Base64=(global=global||{}).Base64,version="2.5.1",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=(e=>{for(var t={},n=0,i=e.length;n<i;n++)t[e.charAt(n)]=n;return t})(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){var t;return e.length<2?(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t):(t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320),fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t))},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],e=e.charCodeAt(0)<<16|(1<e.length?e.charCodeAt(1):0)<<8|(2<e.length?e.charCodeAt(2):0);return[b64chars.charAt(e>>>18),b64chars.charAt(e>>>12&63),2<=t?"=":b64chars.charAt(e>>>6&63),1<=t?"=":b64chars.charAt(63&e)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,n=t%4,t=(0<t?b64tab[e.charAt(0)]<<18:0)|(1<t?b64tab[e.charAt(1)]<<12:0)|(2<t?b64tab[e.charAt(2)]<<6:0)|(3<t?b64tab[e.charAt(3)]:0),e=[fromCharCode(t>>>16),fromCharCode(t>>>8&255),fromCharCode(255&t)];return e.length-=[0,0,2,1][n],e.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e},noEnum;return global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty&&(noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}),global.Meteor&&(Base64=global.Base64),module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}}(global)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this)}.call(this,__webpack_require__(44))},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}]),ssoUI={init:function(){var e=[],t=(this.PhonePeCall=!1,this.PhonePeRedirectUrl="",this.errorFlg=!1,this.site_url="https://accounts.indianexpress.com",this.api_host=this.site_url+"/api/v2",this.headerPayload={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-API-KEY":"ydDxstlJCp7a0CwCKqkwtpeptJidV6fkCnaxj51xYN7jAsgdoDtZgwVsML3Zfs9ktc9j7nlgfMEdyP3m3llagEsRAxF6rtTYeCSZ7jpg+x/gTX3htkBYttdr38Y5W2zdMN0eHyt+Qje4AWI6xog1gsJelA90VNtnm3XH3JN1LGbP3BbPUdSShWhoTYvKr9xiktc1s9r98LNI9CSBFtnA/lUZi1UzC3oQvPUmqwFzyvyb25tRKse6GVBZifWibZ1LBAgqDws9YJGG9gfAbsQKvdGeI3Fw7FJAlYkaFknq5Lmgyi9ej05/X8nMzS+L3mf1OTPuMXNOmab2W+umCrJDZg=="},"undefined"==typeof IESSO||null===IESSO||""==IESSO?(console.error("SSO sdk initialisation failed."),this.errorFlg=!0):(e=IESSO.pop(),this.qparams=ssoUI.QParams()),this.ssoDivObj=document.getElementsByClassName("iesso-login"),null!=this.ssoDivObj&&""!=this.ssoDivObj||(console.error("SSO div tag not found."),this.errorFlg=!0),this.subBanDiv=document.getElementsByClassName("epaper-banner"),this.subcribedbanner=!0,(null==this.subBanDiv||this.subBanDiv.length<1)&&(this.subcribedbanner=!1),this.subcribedbanner&&(null!==(t=document.getElementById("subscribed_banner"))&&(t.style.display="none"),document.getElementById("non_subscribed_banner").style.display="block"),this.client_id=ssoUI.ValidParams(e.client_id),this.client_secret=ssoUI.ValidParams(e.client_secret),this.response_type=ssoUI.ValidParams("code"),this.redirect_uri=ssoUI.ValidParams(e.redirect_uri),this.request_uri=encodeURIComponent(ssoUI.ValidParams(e.request_uri)),this.state=ssoUI.randomState().toString(),!1!==this.qparams.hasOwnProperty("renewal")&&"1"===this.qparams.renewal?this.subrenewal=!0:this.subrenewal=!1,this.auto_renwal=ssoUI.qparams,!1!==this.qparams.hasOwnProperty("ack")&&50<this.qparams.ack.length?this.access_token=this.qparams.ack:this.access_token=ssoUI.CookieRead("access_token"),this.fingerprint_uid=ssoUI.getFingerprint(),navigator.userAgent||navigator.vendor||window.opera),e=((/phonepe-webview/i.test(t)||!1!==this.qparams.hasOwnProperty("utm_source")&&"phonepe"===this.qparams.utm_source)&&(this.PhonePeCall=!0,this.errorFlg=!1),this.sso_oauthuser=ssoUI.CookieRead("oauth_user"),this.sso_checkPluuid=ssoUI.CookieRead("pluuid"),""!==this.access_token&&null!=this.access_token),t=""!==this.sso_oauthuser&&null!=this.sso_oauthuser,n=""!==this.sso_checkPluuid&&null!=this.sso_checkPluuid,i={},n=(t&&(i=JSON.parse(this.sso_oauthuser)),""==this.access_token&&""!==this.fingerprint_uid&&null!=this.fingerprint_uid&&!1===this.errorFlg?(o="?pluuid="+ssoUI.CookieRead("pluuid"),ssoUI.ajaxRequest("GET",this.api_host+"/sso/user/evtkn/"+this.fingerprint_uid+o,this.headerPayload,"","fingerprint")):""!==this.access_token&&null!=this.access_token&&""==this.sso_oauthuser||e&&t&&(!n||i.hasOwnProperty("user_per_refsid")&&""==i.user_per_refsid)?(this.headerPayload.Authorization="Bearer "+this.access_token,o="?pluuid="+ssoUI.CookieRead("pluuid"),ssoUI.ajaxRequest("GET",this.api_host+"/sso/user/"+o,this.headerPayload,"","fixpluuid")):""!==this.access_token&&null!=this.access_token&&!1===this.errorFlg&&(0<this.ssoDivObj.length||this.PhonePeCall)?(this.headerPayload.Authorization="Bearer "+this.access_token,o="?pluuid="+ssoUI.CookieRead("pluuid"),ssoUI.ajaxRequest("GET",this.api_host+"/sso/user/"+o,this.headerPayload,"",""),ssoUI.ProfileUI(),ssoUI.IeLoginBtn()):(ssoUI.LoginUI(),ssoUI.IeLoginBtn(),t=-1<(e=window.location.hostname).indexOf("xpresstechie.com")||-1<e.indexOf("lighthousejournalism.com")?"valid":this.ssoDivObj,!this.errorFlg&&0<t.length&&!this.PhonePeCall&&e.indexOf("indianexpress.com")<0&&setTimeout(function(){ssoUI.getGoogleOneTapAPI()},5e3)),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),i=(this.is_mobile_ssoie=!1,n&&(this.is_mobile_ssoie=!0),document.getElementById("top_cus_signlogin")),o=(null!=i&&(console.log("Event Top Login IN"),i.addEventListener("click",this.getSingleLogin,!1)),document.getElementById("cus_signlogin")),t=(null!=o&&(console.log("Event Login IN"),o.addEventListener("click",this.getSingleLogin,!1)),document.getElementById("cus_emaillogin")),e=(null!=t&&(console.log("Event IN"),t.addEventListener("click",this.getEmailLogin,!1)),document.getElementById("cus_gmaillogin")),n=(null!=e&&(this.getGmailLogin("redirect"),e.addEventListener("click",this.getGmailLogin("redirect"),!1)),document.getElementById("cus_FBlogin"));null!=n&&(i=document,o="facebook-jssdk",t=i.getElementsByTagName("script")[0],i.getElementById(o)||((i=i.createElement("script")).id=o,i.src="//connect.facebook.net/en_US/sdk.js",t.parentNode.insertBefore(i,t)),window.fbAsyncInit=function(){FB.init({appId:"2223144168011709",cookie:!0,status:!0,xfbml:!0,version:"v3.2"})},n.addEventListener("click",this.getFBLogin("redirect"),!1))},ValidParams:function(e){return null!=e&&""!==e?e.toString():""},QParams:function(){var e=(/code|token|error/.test(window.location.hash)?location.hash:location.search).substring(1),t=e.split("&");return t.forEach(function(e,t,n){-1!=e.indexOf("=")?n[t]='"'+e.replace("=",'":"')+'"':n[t]='"k":"v"'}),e=e?JSON.parse("{"+t.join()+"}",function(e,t){return""===e?t:decodeURIComponent(t)}):{}},qstring:function(){return"?client_id="+this.client_id+"&response_type="+this.response_type+"&redirect_uri="+this.redirect_uri+"&request_uri="+this.request_uri+"&state="+this.state},ProfileUI:function(){this.subrenewal&&(e=ssoUI.qstring(),location.href=this.site_url+"/account/order/"+e),ssoUI.PhonePeCall?(t='style="display:none"',0<document.getElementsByTagName("footer").length&&void 0!==document.getElementsByTagName("footer").style&&(document.getElementsByTagName("footer").style.display="none")):t='style="display:block"';for(var e,t,n='<div id="sso-ui" class="sso-ui"></div><a href="javascript:ssoUI.ProfileEV();" class="sso-link" '+t+'><button class="account-button" type="button">My Account</button></a></div>',i=0;i<this.ssoDivObj.length;i++)this.ssoDivObj[i].innerHTML="",this.ssoDivObj[i].innerHTML=n;return!0},ProfileEV:function(){localStorage.removeItem("user_hit");var e=encodeURIComponent(window.location.href);window.open(this.site_url+"/account/?siteReferrer="+e,"_self")},LoginUI:function(){for(var e,t=ssoUI.qstring(),n=(this.subrenewal&&(location.href=this.site_url+"/oauth2/authorize/"+t),ssoUI.PhonePeCall?(e='style="display:none"',0<document.getElementsByTagName("footer").length&&void 0!==document.getElementsByTagName("footer").style&&(document.getElementsByTagName("footer").style.display="none")):e='style="display:block"','<div id="sso-ui" class="sso-ui"></div><a href="javascript:ssoUI.LoginEV();" class="sso-link" '+e+'><button class="login-button" type="button">Sign in</button></a></div>'),i=0;i<this.ssoDivObj.length;i++)this.ssoDivObj[i].innerHTML="",this.ssoDivObj[i].innerHTML=n},LoginEV:function(e){void 0!==e&&"m-links-btm__link-block"===e.className&&this.subscriptionGaEvent("Subscription Activity","Login","",""),"undefined"!=typeof clevertap&&clevertap.event.push("EXU_Login_Initiated");e=ssoUI.qstring();this.access_token=ssoUI.CookieRead("access_token"),""!==this.access_token&&null!=this.access_token&&!1===this.errorFlg?location.href=window.location.href:location.href=this.site_url+"/oauth2/authorize/"+e},CookieWrite:function(e,t,n,i,o){var s=new Date;n=n||730,o=o||"/",s.setTime(s.getTime()+24*n*60*60*1e3);n=e+"="+t+("; expires="+s.toGMTString())+"; path="+o;i&&(n+="; domain="+i),document.cookie=n},CookieRead:function(e){var t,n=""+document.cookie,i=n.indexOf(e);return void 0===e||""===e||-1===i||(-1==(t=n.indexOf(";",i))&&(t=n.length),n=unescape(n.substring(i+e.length+1,t)),"access_token"===e&&n.length<50)?"":n},CookieRemove:function(e){var t;""!==e&&this.CookieRead(e)&&(t="exp_token_jwt"===e||"pluuid"===e?ssoUI.getParentDomainName():window.location.hostname,document.cookie=e+"=;path=/;max-age=-1; domain="+t)},ajaxRequest:function(e,t,n,i,a){var o,c=new XMLHttpRequest;for(o in c.open(e,t,!0),"personlization"===a&&(c.withCredentials=!0),n)n.hasOwnProperty(o)&&c.setRequestHeader(o,n[o]);c.onload=function(){if(200<=c.status&&c.status<400){var e=JSON.parse(this.responseText),t="",n=[],i=ssoUI.getParentDomainName(),o={channel:ssoUI.getPersChannelID(),source:ssoUI.is_mobile_ssoie?2:1,type:2},s={"Content-Type":"application/json",Accept:"application/json"};if(e.hasOwnProperty("pluuid")&&""!==e.pluuid)ssoUI.CookieWrite("pluuid",e.pluuid,30,i,"/");else if(e.hasOwnProperty("token")&&""!==e.token)if(""!=a)switch(a){case"fingerprint":ssoUI.CookieWrite("access_token",e.token,30,window.location.hostname,"/"),ssoUI.CookieWrite("oauth_user",JSON.stringify(e.data.user),1,window.location.hostname,"/"),ssoUI.CookieWrite("exp_token_jwt",e.token,30,i,"/"),ssoUI.CookieWrite("oauth_ssoid",e.data.user.refs_id,30,i,"/");ssoUI.CookieRead("pluuid");ssoUI.ajaxRequest("POST","https://ua."+i+"/api/resolve/uuid",s,JSON.stringify(o),"personlization"),ssoUI.ProfileUI(),ssoUI.IeLoginBtn();break;case"redirect":ssoUI.CookieWrite("access_token",e.token,30,window.location.hostname,"/"),ssoUI.CookieWrite("exp_token_jwt",e.token,30,i,"/"),ssoUI.CookieWrite("oauth_user",JSON.stringify(e.data.user),1,window.location.hostname,"/"),ssoUI.CookieWrite("oauth_ssoid",e.data.user.refs_id,30,i,"/"),ssoUI.ajaxRequest("POST","https://ua."+i+"/api/resolve/uuid",s,JSON.stringify(o),"personlization");var r=ssoUI.qparams.request_uri;return 1<e.data.extra.migration&&0<r.search("express-plus")&&r.search("product/epaper")<0?(n=["created","authenticated","pending","halted","active"],void 0!==(t=e.data.user).plan_status&&-1<n.indexOf(t.plan_status)?location.href="/express-plus/today-newsstand/":location.href=r):-1<r.indexOf("//www.google.com/amp/s")?(r=r.split("//www.google.com/amp/s/"),location.href="https://"+r[1]):-1<r.indexOf("/lite")?(r=r.split("/lite"),location.href=r[0]):location.href=r,!1;default:ssoUI.CookieWrite("oauth_user",JSON.stringify(e.data.user),1,window.location.hostname,"/"),ssoUI.CookieWrite("exp_token_jwt",e.token,30,i,"/"),ssoUI.CookieWrite("oauth_ssoid",e.data.user.refs_id,30,i,"/"),ssoUI.ajaxRequest("POST","https://ua."+i+"/api/resolve/uuid",s,JSON.stringify(o),"personlization"),ssoUI.ProfileUI(),n=["created","authenticated","pending","halted","active"],void 0!==(t=e.data.user).plan_status&&-1<n.indexOf(t.plan_status)?("undefined"!=typeof clevertap&&clevertap.event.push("User_Subscribed_Sign-in_Status",{logged_status:"Yes"}),ssoUI.getExpressionIndianexpress()):"undefined"!=typeof clevertap&&clevertap.event.push("User_Subscribed_Sign-in_Status",{logged_status:"No"})}else!1!==ssoUI.qparams.hasOwnProperty("ack")&&50<ssoUI.qparams.ack.length&&(ssoUI.CookieWrite("access_token",e.token,30,window.location.hostname,"/"),ssoUI.CookieWrite("exp_token_jwt",e.token,30,i,"/"),ssoUI.CookieWrite("oauth_ssoid",e.data.user.refs_id,30,i,"/")),ssoUI.CookieWrite("oauth_user",JSON.stringify(e.data.user),1,window.location.hostname,"/"),n=["created","authenticated","pending","halted","active"],void 0!==(t=e.data.user).plan_status&&-1<n.indexOf(t.plan_status)?("undefined"!=typeof clevertap&&clevertap.event.push("User_Subscribed_Sign-in_Status",{logged_status:"Yes"}),ssoUI.getExpressionIndianexpress()):"undefined"!=typeof clevertap&&clevertap.event.push("User_Subscribed_Sign-in_Status",{logged_status:"No"}),ssoUI.ProfileUI();else if(""!=a)switch(a){case"redirect":return location.href=ssoUI.qparams.request_uri,!1;case"personlization":return!1;default:ssoUI.GetAjax()}else ssoUI.GetAjax()}else"personlization"!=a&&ssoUI.GetAjax()},c.onerror=function(){"personlization"!=a&&ssoUI.GetAjax()},c.send(i)},GetAjax:function(){ssoUI.CookieRemove("access_token"),ssoUI.CookieRemove("oauth_user"),ssoUI.CookieRemove("exp_token_jwt"),ssoUI.CookieRemoveWTD("ieCentralServicesToken"),ssoUI.CookieRemoveWTD("follow_email_id"),ssoUI.CookieRemoveWTD("custom_follow_author"),ssoUI.CookieRemoveWTD("author_unfollow_id"),ssoUI.CookieRemove("pluuid"),ssoUI.CookieRemove("ieCommentingServicesToken"),ssoUI.CookieRemoveWTD("ieCentralServicesToken"),ssoUI.removeLocalStorageCompatabile("get_pref_api_button_data"),ssoUI.removeLocalStorageCompatabile("getprefapidata"),ssoUI.CookieRemoveWTD("oauth_ssoid"),ssoUI.CookieRemove("oauth_ssoid"),ssoUI.CookieRemoveWTD("exp_token_jwt"),ssoUI.CookieRemoveWTD("access_token"),ssoUI.LoginUI()},randomState:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,i=0;i<6;i++)e+=t.charAt(Math.floor(Math.random()*n));return ssoUI.CookieRead("ssostate")?e=ssoUI.CookieRead("ssostate"):ssoUI.CookieWrite("ssostate",e,1,window.location.hostname,"/"),e},oAuth2Redirect:function(){var e=this.client_id,t=this.client_secret,n=ssoUI.redirect_uri,i=ssoUI.qparams.code,o=ssoUI.qparams.state,s=ssoUI.qparams.request_uri,e="code="+i+"&client_id="+e+"&client_secret="+t+"&grant_type=authorization_code&scope=userinfo&redirect_uri="+n,t=ssoUI.CookieRead("ssostate");return console.log("cookie deleted: ssostate"+ssoUI.CookieRemove("ssostate")),(n=!(n=!(n=!(n=o===t)&&-1<s.indexOf("/lite")?!0:n)&&-1<o.indexOf("autoredirect")?!0:n)&&-1<o.indexOf("moengageOSMRedirect")?!0:n)?null==i||""==i||null==s||""==s?(alert("[Authorization failed]: no accessCode received from the server"),window.location.href=s):ssoUI.ajaxRequest("POST",this.site_url+"/oauth2/authorize/token",this.headerPayload,e,"redirect"):(console.log("Authorization may be unsafe, passed state was changed in server Passed state wasn't returned from auth server"),-1<s.search("subscription-plan")?window.location.href="/express-plus/today-newsstand/":window.location.href=s),!1},getFingerprint:function(){var e,t="";return t="undefined"!=typeof Storage&&null!=(e=localStorage.getItem("evolok:ev_session"))?(ev_profile=JSON.parse(e)).guid:t},IeLoginBtn:function(){var e=document.getElementById("login_lnik");e&&(""!==ssoUI.CookieRead("access_token")||ssoUI.PhonePeCall?e.style.display="none":e.style.display="block")},subscriptionListingCheck:function(){var e=this.CookieRead("oauth_user");return""!==e&&void 0!==(e=JSON.parse(e)).plan_status&&-1<["created","authenticated","pending","halted","active"].indexOf(e.plan_status)?(this.subscriptionGaEvent("Subscription Activity","Epaper viewed","",""),location.href="/express-plus/today-newsstand/"):(this.subscriptionGaEvent("Subscription Activity","Plans viewed","",""),"1"!==this.CookieRead("subscription_popup")?location.href="/express-plus/subscription-plan/#goofy":location.href="/express-plus/subscription-plan/"),!1},subscriptionGaEvent:function(e,t,n,i){return"undefined"!=typeof ga&&ga("send",{hitType:"event",eventCategory:e,eventAction:t,eventLabel:n,useBeacon:!0,hitCallback:function(){googleSent=!0}}),!0},trueSDKEvent:function(e){this.access_token=ssoUI.CookieRead("access_token"),""!==this.access_token&&null!=this.access_token&&void 0!==e?location.href=e:void 0!==e&&(location.href=this.site_url+"/?truesdk=1&request_uri="+e)},getParentDomainName:function(){var e=window.location.hostname;return-1<e.indexOf("financialexpress")?"financialexpress.com":-1<e.indexOf("indianexpress")?"indianexpress.com":-1<e.indexOf("jansatta")?"jansatta.com":-1<e.indexOf("loksatta")?"loksatta.com":e},getExpressionIndianexpress:function(){var e;"undefined"!=typeof story_id&&0!=story_id&&("undefined"!=typeof clevertap&&clevertap.event.push("Subscriber_Visit_RegularSite",{article_id:story_id}),null!==document.head.querySelector("meta[itemprop=articleSection]"))&&(e=document.head.querySelector("meta[itemprop=articleSection]").content,"undefined"!=typeof clevertap)&&clevertap.event.push("Subscriber_Visit_RegularSite",{section_name:e}),"https://vipgo.indianexpress.com/"!=window.location.href&&"https://indianexpress.com/"!=window.location.href||"undefined"!=typeof clevertap&&clevertap.event.push("Subscriber_Visit_RegularSite",{home_page:"home"})},getPhonepeAuthToken:function(t){try{PhonePe.PhonePe.build(PhonePe.Constants.Species.web).then(e=>{e.fetchAuthToken().then(e=>{console.log("Grant token data received = "+e);e=t+"&grantauth="+e.grantToken;window.location.href=encodeURI(e)}).catch(e=>{console.log("Error occurred while fetching the grant token: "+e),window.location.href=encodeURI(t)})}).catch(e=>{console.log(e)})}catch(e){console.log(e.message)}},getGoogleOneTapAPI:function(){var t="375995930384-dtr93riq8dq7ainlrrod84ve55f4qdgb.apps.googleusercontent.com";"undefined"!=typeof google?(google.accounts.id.initialize({client_id:t,cancel_on_tap_outside:!1,prompt_parent_id:"g_id_onload",callback:function(e){t==e.clientId&&""!=e.credential||""!=e.credential?window.location.href=ssoUI.site_url+"/oauth2/authorize/"+ssoUI.qstring()+"&credential="+e.credential:window.location.href=ssoUI.site_url+"/oauth2/authorize/"+ssoUI.qstring()}}),google.accounts.id.prompt(e=>{(e.isNotDisplayed()||e.isSkippedMoment())&&console.log("onetap"+e.getNotDisplayedReason())})):console.log("onetap google sdk not loaded")},getSingleLogin:function(){var e=ssoUI.site_url+"/oauth2/authorize/"+ssoUI.qstring();return ssoUI.is_mobile_ssoie?e+="&is_premium=yes&premium_mode=premium_mobile":e+="&is_premium=yes&premium_mode=premium_desktop",window.location.href=e,!1},getEmailLogin:function(){var e=document.getElementById("cust_user_email");return""==e.value?alert("Please fill the email address."):(e=ssoUI.site_url+"/oauth2/authorize/"+ssoUI.qstring()+"&stype=email&user_login="+e.value,ssoUI.is_mobile_ssoie?e+="&is_premium=yes&premium_mode=premium_mobile":e+="&is_premium=yes&premium_mode=premium_desktop",window.location.href=e),!1},getGmailLogin:function(e){return"undefined"!=typeof gapi?gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"375995930384-dtr93riq8dq7ainlrrod84ve55f4qdgb.apps.googleusercontent.com",cookiepolicy:"single_host_origin"}),ssoUI.attachSignin(document.getElementById("cus_gmaillogin"),e)}):console.log("singlesign google sdk not loaded"),!1},getFBLogin:function(n,e){return e.preventDefault(),"undefined"!=typeof FB?FB.login(function(e){var t;e.authResponse&&(e=FB.getAuthResponse().accessToken,"append"==n?window.facebookGetUserData(e):(t=ssoUI.is_mobile_ssoie?"&is_premium=yes&premium_mode=premium_mobile":"&is_premium=yes&premium_mode=premium_desktop",window.location.href=ssoUI.site_url+"/oauth2/authorize/"+ssoUI.qstring()+"&fbcredential="+e+t))},{scope:"email,public_profile",return_scopes:!0}):console.log("singlesign FB sdk not loaded"),!1},attachSignin:function(i){auth2.attachClickHandler(i,{},function(e){var t,n=gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token;"cus_gmaillogin"==i.id?(t=gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse(!0).access_token,window.googleGetUserData(n,t)):(t=ssoUI.is_mobile_ssoie?"&is_premium=yes&premium_mode=premium_mobile":"&is_premium=yes&premium_mode=premium_desktop",window.location.href=ssoUI.site_url+"/oauth2/authorize/"+ssoUI.qstring()+"&credential="+n+t)},function(e){console.log(JSON.stringify(e,void 0,2))})},removeLocalStorageCompatabile:function(e){"undefined"!=typeof Storage&&localStorage.removeItem(e)},CookieRemoveWTD:function(e){""!==e&&ssoUI.CookieRead(e)&&(document.cookie=e+"=;path=/;max-age=-1;")},getPersChannelID:function(){var e=window.location.hostname;return-1<e.indexOf("financialexpress")?1:-1<e.indexOf("tamil")?4:-1<e.indexOf("bengali")?5:-1<e.indexOf("malayalam")?6:-1<e.indexOf("indianexpress")?2:-1<e.indexOf("jansatta")?7:-1<e.indexOf("loksatta")?8:-1<e.indexOf("myinsuranceclub")?3:2}};ssoUI.init();