(window.webpackChunksmart_tag=window.webpackChunksmart_tag||[]).push([[695],{3820:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.clearShouldSampleBidCache=function(){o=void 0},t.shouldSampleBid=function(){if((0,a.visitorTestMode)("bxdev"))return!0;if(void 0!==o)return o;return o=r.default.appliesToTrafficPercentageBasedOnDeviceId(50)};var a=i(2481),r=n(i(5003)),o=void 0},1871:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(9974)),r=(i(2481),n(i(5754))),o=n(i(8658)),s={init:function(){var e,t=bouncex.getBounceVisitCookie(),i=bouncex.getBounceCookie();if(bouncex.segments=bouncex.segments||[],null!==(e=bouncex.state)&&void 0!==e&&e.gdpr)s.clearSegments();else{var n=bouncex.calling_url.match(/wkseg(\d+)/g);if(n)bouncex.segments=n.map((function(e){return parseInt(e.replace("wkseg",""))}));else if(i.softID){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){r.default.error("could not parse visit cookie for segments")}t&&t.seg?bouncex.segments=t.seg:s.downloadSegments(i.softID),bouncex.segments=bouncex.segments.filter((function(e,t,i){return i.indexOf(e)===t}))}}},downloadSegments:function(e){if(e){var t=Math.random()<.5?"https://".concat(o.default.getDomain("dfp.bouncex.net"),"/pub/v3/segment/").concat(bouncex.website.id,"/").concat(e):"https://".concat(o.default.getDomain("dfp.bouncex.net"),"/pub/v2/segment/").concat(e);a.default.get({url:t,error:function(){s.clearSegments()},success:function(e){var t=e;if("string"==typeof t)try{t=JSON.parse(t)}catch(e){r.default.error("segments service response was invalid JSON"),t=[]}bouncex.updateBounceVisitCookie({seg:t}),bouncex.segments=t}})}else s.clearSegments()},clearSegments:function(){bouncex.updateBounceVisitCookie({seg:[]}),bouncex.segments=[]}};t.default=s},8658:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(2481),a={getDomain:function(e){var t=bouncex.website.tag_state_domain_enabled||!1,i=bouncex.website.tag_state_sst_enabled||!1,a=bouncex.website.tag_state_domain||!1;return i&&a&&t&&!(0,n.hasFeatureFlag)("DISABLE_SERVER_SIDE_TRACKING")?bouncex.website.tag_state_domain:e}};t.default=a},8660:(e,t,i)=>{var n=i(4836),a=i(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(8416)),o=n(i(8772)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=z(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,i&&i.set(e,n);return n}(i(3036)),d=i(5432),c=i(5708),u=i(7392),l=i(2678),p=i(9436),g=i(9648),f=n(i(5390)),v=n(i(1618)),m=n(i(1634)),h=n(i(1660)),b=n(i(8066)),y=i(2481),_=n(i(2501)),x=i(1418),w=i(4744),I=n(i(8646)),P=i(1915),O=n(i(4172)),S=i(1964),A=n(i(2261)),C=n(i(9446)),k=i(4554),D=i(1555),j=i(8309),T=n(i(5754)),R=n(i(6105)),E=n(i(8723)),q=n(i(6950)),M=i(6487),V=n(i(3723)),B=i(1847),N=i(7352),L=i(7504),F=n(i(4675)),U=n(i(1836)),W=n(i(3455)),H=n(i(3160)),X=n(i(8067)),G=i(3820);function z(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(z=function(e){return e?i:t})(e)}function Q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function J(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(i),!0).forEach((function(t){(0,r.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Q(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var K={init:function(){var e;A.default.gbi2Enabled()&&(K.syncUsers(),m.default.injectIntoPage(),null!==(e=bouncex.website)&&void 0!==e&&e.uid2&&(h.default.getToken()&&h.default.isTokenExpired()&&h.default.refreshToken(),h.default.setExpirationCheck()),V.default.supportsContextual()&&V.default.Fetch(),F.default.setHighEntropyValues(),U.default.init(),W.default.init())},_activateBehavioralTriggers:function(e){A.default.activateInstruments(e)},_activateCampaign:function(e){this.log(e,"activating campaign");var t=bouncex.campaigns[e];t.prestructured=!1,t.gbi.ready=!0,t.gbi.hasActivatedOnce||((0,S.event_js_eval)(e,"activation"),t.dispatchEvent("activation.bx"),t.gbi.hasActivatedOnce=!0),t.triggerUponActivation&&A.default.triggerAd(t.triggerUponActivation,e,{},!1)},_activateCreative:function(e,t){this.log(e,"activating creative");var i=bouncex.campaigns[e],n=bouncex.creatives[t],a=/{bpcid}/g;if(i.html=n.html.replace(a,e),i.styles=n.styles.replace(a,e),!C.default.setCalloutTarget(i))return bouncex.ads.error(e,"no anchor found"),void this._failCampaign(e);A.default.placeCampaign(e),A.default.assignDomReferencesToCampaign(e),A.default.cacheCreativeForm(e,1),R.default.setProperties(e),A.default.setTransitionEffect(e),this.applySSPAttributes(e),this.applySSPStyles(e),A.default.applyCampaignStyles(e),i.supportsPrestructure&&E.default.initPrestructure(i)},applySSPAttributes:function(e){var t=bouncex.campaigns[e];t.winningBid&&t.obj1&&(t.obj1.attr("data-ssp",t.winningBid.provider),t.winningBid.isMultiPanel&&t.obj1.attr("data-multipanel",""))},applySSPStyles:function(e){var t,i=bouncex.campaigns[e];i.styles+=(0,M.getSSPStyles)(null===(t=i.winningBid)||void 0===t?void 0:t.provider)},_activatePlacement:function(e,t){var i=bouncex.website.id,n=bouncex.campaigns[e],a=t.placementId,r=n.gbi.placements[a],o=this;if(this.log(e,"activating placement #".concat(a," (").concat(r.mediaType,")")),n.winningBid=t,n.activePlacementId=a,n.activeAdUnitId=r.adUnitId,this._activateCreative(e,r.creativeId),bouncex.recirc.populateCreative(e),"display"==r.mediaType){var d=-1!==s.default.PRELOAD_PROVIDERS.indexOf(t.provider),c=s.default.PRELOAD_ENABLED,u=s.default.PRERENDER_ENABLED,l=(0,x.shouldPreventPreload)(n,i),p={};n.onImpression=function(i){o._populateDisplayAd(e,J({trigger:n.trigger,content:t.adHtml,width:r.width,height:r.height,deployment:r.deployment,onReady:i,mode:"default"},p))},this._activateCampaign(e),(0,x.preconnect)(t.adHtml),d&&u&&!n.dynamic_anchor&&!l?setTimeout(this._populateDisplayAd.bind(this),0,e,J(J({content:t.adHtml,width:r.width,height:r.height,deployment:r.deployment},p),{},{mode:"prerenderOnly"})):d&&c&&!l&&setTimeout(n.preloadDisplayAd.bind(n,t.adHtml),0)}else if("video"==r.mediaType){var g={vast:t.vastData,width:r.width,height:r.height},f=n.obj1.find('video[id*="bx-video-player"]');f&&f.length>0?(n.gbi.isVideo=!0,bouncex.video.init(e,g.vast,t.provider,r)):this._prepareVideo(e,g,(function(){o._activateCampaign(e)})),(0,x.preconnect)(t.vastData)}},_adjustPosition:function(e){var t=this._getDeploymentType(e),i=bouncex.campaigns[e];if("masthead"===t&&!i.preventAdjustPosition){var n=this._getScrollPosition(i);bouncex.window.scrollTop(n)}"masthead"===t&&i.preventAdjustPosition&&T.default.debug({group:"Ads",campaignId:e,message:"Adjust position on impression prevented by bouncex.preventAdjustPositionOnImpression"})},_getScrollPosition:function(e){var t=e.obj1[0].getBoundingClientRect(),i=this._getStickySiblingDimensions(e.obj1[0]);return!!i&&i.top<t.height?Math.max(t.top-i.height,0):t.top},_getStickySiblingDimensions:function(e){return e.previousElementSibling&&"sticky"===(0,y.getCssAttribute)(e.previousElementSibling,"position")?e.previousElementSibling.getBoundingClientRect():e.nextElementSibling&&"sticky"===(0,y.getCssAttribute)(e.nextElementSibling,"position")?e.nextElementSibling.getBoundingClientRect():void 0},_allRequestsAreComplete:function(e){var t=bouncex.campaigns[e].gbi.requests;if(!t)return!1;for(var i=0;i<t.length;i++)if(!t[i].endTime)return!1;return!0},_attachClickReporting:function(e,t){bouncex.on(t,"mouseenter.gbi_click_events_"+e,(function(){bouncex.on(bouncex.window,"blur.gbi_click_events_"+e,(function(){bouncex.report(e,"click",{value:"ad"})}))})),bouncex.events[e].gbi_click=function(){bouncex.off(bouncex.window,"blur.gbi_click_events_"+e)},bouncex.on(t,"mouseleave.gbi_click_events_"+e,bouncex.events[e].gbi_click)},_compose:function(){var e=Array.prototype.slice.call(arguments),t={};return e.forEach((function(e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})),t},_constants:{auctionDelayInMilliseconds:2e3,defaultReloadDelayInMilliseconds:3e5,bidEvents:{fill:"bid_fill",none:"bid_none",empty:"bid_empty",error:"bid_error",cancelled:"bid_cancel",selected:"bid_selected"},targetSelector:".bx-group-placeholder:eq(0)",mobileFullWidthMinRatio:.85},auctionHandler:null,_createAndSendAuction:function(){if(null===this.auctionHandler){var e={auctionCheckpoint:this._constants.auctionDelayInMilliseconds,auctionTimeout:2*this._constants.auctionDelayInMilliseconds};this.auctionHandler=new f.default(e)}return this.auctionHandler.getOrCreateAuction()},_createAndSendRequests:function(e,t){var i=this;this.log(e,"sending bid requests");var n=[],a=function(a){if(t.hasOwnProperty(a)){var r=t[a];r.providers.forEach(function(t){var i=this._createBidRequest(t,{campaignId:e,placementId:a,adUnitId:r.adUnitId,type:r.mediaType,width:r.width,height:r.height,deployment:r.deployment});n.push(i),i.init()}.bind(i))}};for(var r in t)a(r);return n},_createBid:function(e){return{provider:e.provider,campaignId:e.campaignId,placementId:e.placementId,adUnitId:e.adUnitId,price:e.price,adHtml:e.adHtml,vastData:e.vastData,dealId:e.dealId,dealName:e.dealName,arrivalTime:e.arrivalTime||Date.now(),targeting:e.targeting}},_createBidRequest:function(e,t){return this._requestIndex[e](t)},_createDisplayFrame:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{delayContent:!1},i=t.delayContent,n=A.default.createIframe({target:"_blank",class:"bx-gbi-frame",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no",width:"100%",height:"100%",vspace:"0",hspace:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowTransparency:"true",srcdoc:i?"":e});return i&&setTimeout((function(){n.srcdoc=e}),100),n},_customizations:{anchor:{updateDynamicAnchor:function(e){var t=bouncex.campaigns[e];if(t.dynamic_anchor&&!t.gbi.contentLoaded){var i=(0,k.parseSiteElementSelector)(t.callout_t),n=this._getBidDimensions(t);t.visibleAnchors=I.default.viewport.getVisibleElements(i,{domPlacementMethod:t.dom_placement_method,height:n.height,width:n.width,voffset:t.callout_voffset,visibilityThreshold:t.visibilityThreshold}),t.visibleAnchors.length>0&&(C.default.setCampaignCalloutTargetToIndex(t,t.visibleAnchors[0].index),A.default.placeCampaign(e))}},passesViewabilityTest:function(e){var t=bouncex.campaigns[e],i=this._getMinimumHeight(t)||250;return I.default.viewport.distanceToBottom(t.calloutTarget[0],t.dom_placement_method,t.callout_voffset)>i},_getMinimumHeight:function(e){var t=this._getBidDimensions(e);return("prepend"===e.dom_placement_method||"append"===e.dom_placement_method?e.calloutTarget.innerWidth():e.calloutTarget.parent().innerWidth())*(t.height/t.width)/2},_getBidDimensions:function(e){var t=e.winningBid?e.winningBid.placementId:Object.keys(e.gbi.placements)[0],i=e.gbi.placements[t];return{height:Number(i.height),width:Number(i.width)}}}},_deactivateCampaign:function(e,t){this.log(e,"deactivating campaign");var i=bouncex.campaigns[e];return A.default.deactivate_campaign(i,t)},_restartCampaign:function(e){var t=this.initCampaign.bind(this,e);this._deactivateCampaign(e,t)},_endAllRequests:function(e){var t=bouncex.campaigns[e];t&&t.gbi&&t.gbi.requests&&bouncex.campaigns[e].gbi.requests.forEach((function(e){(!e.campaigns||Object.keys(e.campaigns).length<=1)&&e.end()}))},_exceedsFrequencyCap:function(){var e=bouncex.website.adsConfig;if(!e)return!1;if(!e.freqCapEnabled)return!1;if(!e.freqCapImpressions)return!1;switch(e.freqCapInterval){case"pageview":return this._pageImpressions>=e.freqCapImpressions;case"visit":return bouncex.visit_cookie.pci>=e.freqCapImpressions}return!1},_failCampaign:function(e){var t=bouncex.campaigns[e];if(t.failed)return!1;bouncex.close_ad(e,!0),this.log(e,"campaign failed");var i=this._getDeploymentType(e);return this._failedDeployments.push(i),t.failed=!0,t.gbi.ready=!1,!1},_failedDeployments:[],_getAdUnitIds:function(e){var t=bouncex.campaigns[e],i=t.gbi&&t.gbi.placements;return Object.keys(i).map((function(e){return i[e].adUnitId}))},_getDeploymentType:function(e){var t=bouncex.campaigns[e],i=t.gbi&&t.gbi.placements;if(i)for(var n in i)if(i.hasOwnProperty(n))return i[n].deployment;return""},_getProviderConfig:function(e,t){var i=bouncex.website.sspConfig;return i&&i[e]&&i[e][t]},_getReportablePrice:function(e){return Number(e).toFixed(5)},_getResizeData:function(e,t){t.width=Number(t.width),t.height=Number(t.height);var i=bouncex.campaigns[e],n=i.obj1,a=1,r=2*((parseInt(n.find(".bx-wrap").css("padding-left"),10)||0)+(parseInt(n.find(".bx-align").css("padding-left"),10)||0)),o=bouncex.wndsize(),s=0;if("agilityzone"===i.type&&i.calloutTarget.length){var d=i.calloutTarget.width()||i.calloutTarget.parents(":visible").width();if(["before","after"].includes(i.dom_placement_method)&&(d=i.calloutTarget.parents(":visible").width()),a=((d=d>0?Math.min(d,o.width):o.width)-r)/t.width,bouncex.state.mobile&&0===n.find(".no-mobile-full-width").length)(d-r)/o.width>this._constants.mobileFullWidthMinRatio&&(s=(d-o.width)/2,a=((d=o.width)-r)/t.width)}else if("overlay"===i.type){var c=(o.width-r)/t.width,u=(o.height-r)/t.height;a=c>u?u:c}return{scaleRatio:a,scaledWidth:t.width*a,scaledHeight:t.height*a,scaledMargin:s}},_incrementImpressionCounters:function(){"number"==typeof this._pageImpressions?this._pageImpressions++:this._pageImpressions=1,bouncex.updateBounceVisitCookie((function(e){"number"==typeof e.pci?e.pci++:e.pci=1}))},_initAuction:function(e){var t=bouncex.campaigns[e];if(t&&t.isReadyForAuction()){this.log(e,"initializing auction");var i=t.gbi.bids,n=q.default.getDefaultAdsFilters();if(0==i.length)return this.log(e,"no bids were returned"),this._failCampaign(e);var a=t.updateWinningBids(n);if(this._reportWinningBids(e,a),!C.default.setCalloutTarget(t))return this.error(e,"no anchor found"),this._failCampaign(e);var r=t.adformats.video||t.adformats.all;r&&r.winningBid&&this._activatePlacement(e,r.winningBid);var o=this,s=bouncex.ads._getProviderConfig(r.winningBid.provider,"reload")||this._constants.defaultReloadDelayInMilliseconds;(0,P.setTimeoutWrapper)((function(){t.isReadyForAuction(!0)&&o._restartCampaign(e)}),s)}else T.default.debug({group:"Ads",message:"_initAuction: Auction already initialized or failed",campaignId:e,metadata:{campaignId:e,campaign:t}})},_initRequests:function(e,t){var i=bouncex.campaigns[e],n=i.gbi.placements;i.gbi.hasBegunAuction=!0,i.gbi.bids=[];var a=decodeURIComponent(bouncex.calling_url);if(i.qbxtest&&-1!==a.indexOf("bxssp="))for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];o.providers=o.providers.filter((function(e){return-1!==a.indexOf("bxssp=".concat(e))}))}this._isForceTest(e)&&!t?this._prefetchBids(e,"aqbx",n):(i.gbi.auction=this._createAndSendAuction(),this._setAuctionTimeout(e))},_getSegmentInjectionHTML:function(){var e="";return bouncex.calling_url.indexOf("perfadssample")>-1?e="sample-feed":bouncex.cookie&&bouncex.cookie.softID&&(e=bouncex.cookie.softID),e?'\n      <script type="text/javascript">\n        window.wkndSegment = {\n          audienceID: '.concat(JSON.stringify(e),",\n          segments: ").concat(JSON.stringify(bouncex.segments||[]),"\n        };\n      <\/script>\n    "):""},_integrations:{tag:{intermediaryId:"869cff86d1c453c1",generateId:function(){return this.intermediaryId+":"+bouncex.website.id}},jwplayer:{key:"o8z/iG2QyTbuWcdH2vCzMM0waC0nOAeJ9/gVcpFiPZ+tv1+5",createPlayerConfig:function(e){var t=/^[\s]*<VAST/i.test(e.vastData)?"vastxml":"tag",i={};return i.file="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/blank.mp4",i.mute=!0,i.width=e.width,i.height=e.height,i.advertising={},i.advertising.client="vast",i.advertising.vpaidcontrols=!0,i.advertising[t]=e.vastData,i},createPlayerInstance:function(e,t,i,n){bouncex.ads.log(e,"creating video player instance");var a="//"+bouncex.website.biu+"/assets/global/plugins/jwplayer/8.3.0/jwplayer.js",r=this._getSegmentInjectionHTML(),o="<html><head>".concat(r,'</head><body style="margin: 0px; overflow: hidden;"><div id="bx-video"></div></body></html>'),s=A.default.createIframe({class:"bx-gbi-frame",style:"border: 0; width: "+t.width()+"px; height: "+t.height()+"px;"}),d=this;t.append(s);var c=s.contentWindow;bouncex.browser.firefox&&(c.oldGetComputedStyle=c.getComputedStyle,c.getComputedStyle=function(e,t){var i=c.oldGetComputedStyle(e,t);return null===i?{}:i}),c.document.write(o);var u=c.document.createElement("script");u.setAttribute("src",a),u.onload=function(){bouncex.ads.log(e,"jwplayer script loaded"),c.jwplayer?(bouncex.ads.log(e,"jwplayer executed"),c.jwplayer.key=d.key,c.player=c.jwplayer("bx-video"),c.player.setup(i),c.player.on("adClick",(function(){bouncex.ads.report(e,"click",{value:"ad"})})),c.player.on("adError",(function(t){bouncex.ads.error(e,t.message?"video error: "+t.message:"video error")})),n(c.player)):(bouncex.ads.error(e,"jwplayer failed to execute"),bouncex.ads._failCampaign(e))},u.onerror=function(){bouncex.ads.error(e,"jwplayer script failed to load"),bouncex.ads._failCampaign(e)},c.document.body.appendChild(u)}}},_isForceTestLiveConditions:function(e){var t="abxtest".concat(e),i="abxtestall";return bouncex.updateBounceCookie((function(e){e.hcs_abxtest=e.hcs_abxtest||[],bouncex.calling_url.indexOf(t)>-1&&-1===e.hcs_abxtest.indexOf(t)&&e.hcs_abxtest.push(t),bouncex.calling_url.indexOf(i)>-1&&-1===e.hcs_abxtest.indexOf(i)&&e.hcs_abxtest.push(i)})),bouncex.cookie.hcs_abxtest.indexOf(t)>-1||bouncex.cookie.hcs_abxtest.indexOf(i)>-1},_isForceTest:function(e){return bouncex.calling_url.indexOf("aqbxtest"+e)>-1||this._isForceTestLiveConditions(e)},resizeAd:function(e,t){var i=bouncex.campaigns[e],n=i.obj1||jQuery("#".concat(i.domElementID)),a=n.find(bouncex.ads._constants.targetSelector);a||(a=jQuery("#bx-video-player-".concat(e)).closest(".bx-group"));var r=bouncex.ads._getResizeData(e,{width:t.width,height:t.height});return r.scaleRatio>=1?1:(a&&a.css({width:r.scaledWidth+"px",height:r.scaledHeight+"px",overflow:"hidden"}),n&&n.css({width:r.scaledWidth+"px",marginLeft:"".concat(r.scaledMargin,"px"),marginRight:"".concat(r.scaledMargin,"px")}),r.scaleRatio)},_populateDisplayAd:function(e,t){this.log(e,"populating display ad: ".concat(t.mode||"pop"));var i=bouncex.campaigns[e],n=i.obj1.find(bouncex.ads._constants.targetSelector),a=(0,N.ReplaceMacros)(t.content,i),r=t.onReady,o=t.mode,s="prerenderOnly"===o,d="loadAdOnShow"===o,c=t.undoRgx||(0,x.getLoadOnPopRgx)(e),u=t.interceptRgx||(0,x.getLoadOnShowRgx)(e),l="transform-origin: 0 0; max-width: 100%; max-width: 100vw; max-height: 100%; max-height: 100vh;";if(0===n.length)return bouncex.ads.error(e,"creative is missing an ad stack placeholder group"),bouncex.ads._failCampaign(e),!1;var p=i.isPrerendered(a);if(p&&s)return!0;if(p){i.frameWatcher.impressionStart();var g=i.frameWatcher.frameElement.contentDocument;return x.adjustPreloadContent.undo(g,c),i.frameWatcher.unwrapInterceptor(c),r&&!i.frameWatcher.loadComplete?i.frameWatcher.addEventListener("loadComplete.bx",r,!1):r&&setTimeout(r,0),!0}i.clearContainer(),a=(0,x.adjustPreloadContent)(a,u,e);var f=bouncex.ads.resizeAd(e,t);f&&f<1&&(l+=" transform: scale(".concat(f,");"));var v="window.parent.bouncex.campaigns[".concat(e,"].frameWatcher.interceptElements(").concat(u.toString(),");"),m="<script>\n      ".concat("var inDapIF = true;","\n      ").concat(v,"\n      ").concat(w.doubleVerifyWriteAsyncPatch,"\n    <\/script>");m+=this._getSegmentInjectionHTML();var h={"debug:ads:deal_id":i.winningBid.dealId,"debug:ads:deal_name":i.winningBid.dealName,"debug:ads:campaign_id":i.winningBid.campaignId,"debug:ads:ad_unit_id":i.winningBid.adUnitId,"debug:ads:provider":i.winningBid.provider,campaignid:i.winningBid.campaignId},_="";(0,y.hasFeatureFlag)("ADS_CSP_ON_IFRAME")&&(_="\n        <meta http-equiv=\"Content-Security-Policy\" content=\"upgrade-insecure-requests; default-src https: data: blob: 'self' 'unsafe-inline' 'unsafe-hashes' 'unsafe-eval'; object-src 'none'\">\n      "),a='<html>\n  <head>\n    <base target="_blank"/>\n    '.concat(_,"\n    <script>\n      window.parent.bouncex.integrations.csp.initErrorDetection(document, true, ").concat(JSON.stringify(h),", 10)\n    <\/script>\n    ").concat(m,'\n  </head>\n  <body marginwidth="0" marginheight="0" style="').concat(l,'">').concat(a,"</body>\n</html>");try{var I=this._createDisplayFrame(a,{delayContent:(0,y.hasFeatureFlag)("PREVENT_IFRAME_CONTENT_ADDED_TWICE")}),P=this.watchCreativesLoad(e,I);P.sourceContent=t.content,P.loadedContent=a,i.once("impression.bx",(function(){if(i.frameWatcher===P){d&&n.append(I);var e=i.frameWatcher.frameElement.contentDocument;P.unwrapInterceptor(),x.adjustPreloadContent.undo(e);var a=b.default.display.getScriptTag({trigger:i.trigger,placement:t.deployment,ssp:i.winningBid.provider,websiteId:bouncex.website.id,adUnitId:i.winningBid.adUnitId,adsPath:"#".concat(i.getContainer().id)});a&&(0,y.createElement)("script",{src:a},document.head)}}),!1),d||(0,L.displayAd)(i,I,n)}catch(t){return bouncex.ads.error(e,"error populating ad: "+t),bouncex.ads._failCampaign(e),!1}this._attachClickReporting(e,n);var O=I.contentDocument;(0,j.loadImages)(jQuery(O).find("img").filter(":visible"),(function(){bouncex.ads.log(e,"images loaded successfully"),r&&r()})),i.removePreloader()},watchCreativesLoad:function(e,t){var i=bouncex.campaigns[e];if(i.frameWatcher&&i.frameWatcher.frameElement===t)return i.frameWatcher;i.frameWatcher=new o.default(t),i.frameWatcher.campaignId=e;var n=this._reportCreativesLoaded.bind(this,i.frameWatcher);i.frameWatcher.addEventListener("loadComplete.bx",n,!1);var a=this._reportAdIntervention.bind(this,e,"browser");return i.frameWatcher.addEventListener("adIntervention.bx",a,!1),i.frameWatcher},watchVideoLoad:function(e){var t=document.getElementById("bx-video-player-"+e);this.watchCreativesLoad(e,t)},_reportCreativesLoaded:function(e){var t=e.campaignId,i=t&&bouncex.campaigns[t];i&&e.loadComplete&&!e.reportData&&(e.reportData={loaded:1*e.loadSucceeded,failed:1*e.loadFailed,load_delay:e.loadDelay},this.report(t,"creatives_loaded",e.reportData),bouncex.clientEvents.activateCreativeLoadedEvent({id:i.id,purpose:i.purpose,sub_purpose:i.sub_purpose}),e.loadFailed&&this.error(t,"creatives failed to load"))},_reportAdIntervention:function(e,t){var i=e&&bouncex.campaigns[e];if(i&&!i.ad_closed){this._failCampaign(e),this.error(e,"Ad Intervened: ".concat(t));var n={reason:t};this.report(e,"ad_intervention",n)}},_prefetchBids:function(e,t,i){this.log(e,"prefetching "+t);var n=bouncex.campaigns[e],a={};for(var r in i)i.hasOwnProperty(r)&&(a[r]=this._compose(i[r]),a[r].providers=[t]);n.gbi.requests=this._createAndSendRequests(e,a),(0,P.setTimeoutWrapper)(function(){this._endAllRequests(e),n.gbi.bids.length>0?this._initAuction(e):this._initRequests(e,!0)}.bind(this),1e3)},_prepareVideo:function(e,t,i){this.log(e,"preparing video ad");var n=bouncex.campaigns[e],a=n.obj1.find(bouncex.ads._constants.targetSelector),r=bouncex.ads._integrations.jwplayer,o=a.width(),s=a.height(),d=bouncex.ads._getResizeData(e,{width:o,height:s});d.scaleRatio<1&&(o=d.scaledWidth,s=d.scaledHeight,a.css({width:o+"px",height:s+"px"}),n.obj1.css({width:o+"px",marginLeft:"".concat(d.scaledMargin,"px"),marginRight:"".concat(d.scaledMargin,"px")}));var c=r.createPlayerConfig({vastData:t.vast,width:o,height:s});r.createPlayerInstance(e,a,c,(function(e){n.gbi.player=e,n.gbi.isVideo=!0,n.gbi.config=n.gbi.config||{},n.gbi.config.playOnImpression=!0,n.gbi.contentLoaded=!0,i()}))},_userSyncRequests:{__isSynced:function(e){return!!sessionStorage.getItem("bx".concat(e,"synced"))},__setAsSynced:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";bouncex.ads.log("SYNC","".concat(e," was synced")),sessionStorage.setItem("bx".concat(e,"synced"),t)},__fecthSync:function(e,t){this.__isSynced(e)||bouncex.utils.doAjaxRequest({url:t,method:"GET",withCredentials:!0,success:function(t){t?this.__setAsSynced(e,JSON.stringify(t)):bouncex.ads.error(this.campaignId,"error fetching ".concat(e," user sync: ").concat(t))}.bind(this),error:function(t){bouncex.ads.error(this.campaignId,"error fetching ".concat(e," user sync: ").concat(t))}.bind(this)})},__insertSyncElement:function(e,t,i){var n=(0,y.createElement)(t,{style:"display: none;",width:"1",height:"1",src:i}),a=this;n.onload=function(){a.__setAsSynced(e)},(0,y.hasFeatureFlag)("USER_SYNC_PIXEL_DEFER")?"complete"===document.readyState?document.body.appendChild(n):window.addEventListener("load",(function(){document.body.appendChild(n)})):document.body.appendChild(n)},pbm:function(){if(!this.__isSynced("pbm")){var e=bouncex.ads._getProviderConfig("pbm","user_sync_endpoint"),t=bouncex.ads._getProviderConfig("pbm","publisher_id");e?t?this.__insertSyncElement("pbm","iframe","//"+e+"?p="+t):bouncex.ads.error(this.campaignId,"no publisher id found for pubmatic user sync"):bouncex.ads.error(this.campaignId,"no endpoint found for pubmatic user sync")}},index:function(){if(!this.__isSynced("index")){this.__insertSyncElement("index","iframe","https://js-sec.indexww.com/um/ixmatch.html")}},magnite:function(){if(!this.__isSynced("magnite")){this.__insertSyncElement("magnite","iframe","".concat("https://eus.rubiconproject.com/usync.html","?p=").concat(20986,"&endpoint=").concat("us-east"))}},openpath:function(){if(!this.__isSynced("openpath")){var e=X.default.getInstance().getValues(),t=e.gdprApplies,i=e.tcString,n={fmt:"json",ttd_tpi:1,ttd_pid:g.SSP_OPENPATH_PARTNER_ID,gdpr:t?1:0};t&&(n.gdpr_consent=i);var a="https://match.adsrvr.org/track/rid?".concat((0,B.qs)(n));this.__fecthSync("openpath",a)}}},_requestIndex:{aqbx:function(e){return new s.SSP_Request(e,{getManualVastOverride:function(){var e,t;if(!bouncex.manualVastOverride)return"";var i=new URLSearchParams(decodeURIComponent(bouncex.calling_url)).get("manualVastOverride"),n=null!==(e=null===(t=bouncex)||void 0===t?void 0:t.manualVastOverride[i])&&void 0!==e?e:"",a=n&&bouncex.utils&&bouncex.utils.validate.url(decodeURIComponent(n));return n.length>0&&a&&bouncex.calling_url.indexOf("aqbxovrd")>-1?decodeURIComponent(n):""},makeAqbxOverrideRequest:function(e){var t=this,i={url:e,complete:function(e,i){t.handleResponse(e,i),t.done()},xhrFields:{withCredentials:!1}};this.fetch(i)},init:function(){this.startTime=(0,y.getTimeMs)(),this.done();var e=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content,t=e&&"vast"===e.type,i=e&&e.value&&bouncex.utils&&bouncex.utils.validate.url(e.value),n=this.getManualVastOverride();(null==n?void 0:n.length)>0?this.makeAqbxOverrideRequest(n):t&&i&&bouncex.calling_url.indexOf("aqbxovrd")>-1?this.makeAqbxOverrideRequest(e.value):this.handleResponse()},handleResponse:function(e,t){var i=this,n=bouncex.campaigns[this.campaignId],a=null;"success"===t&&e&&e.responseText&&(a=e.responseText);var r=bouncex.ads._createBid({provider:"aqbx",campaignId:i.campaignId,placementId:i.placementId,adUnitId:i.adUnitId,price:0,adHtml:i.getDisplayHtml(i.width,i.height),vastData:i.getVastXml(a),arrivalTime:i.endTime,dealId:i.getAqbxDealId(),dealName:i.getAqbxDealId()});n.gbi.bids.push(r),bouncex.ads.log(this.campaignId,"bid simulated for force testing")},getAqbxDealId:function(){var e;return null===(e=/aqbxdealid\[([\w-]+)\]/.exec(decodeURIComponent(bouncex.calling_url)))||void 0===e?void 0:e[1]},getDisplayHtml:function(e,t){var i=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content;if(i&&"html"===i.type&&bouncex.calling_url.indexOf("aqbxovrd")>-1)return i.value;var n="https://".concat(bouncex.website.biu,"/assets/global/images/pub/demo").concat(e,"x").concat(t,".gif");return'<a><img src="'.concat(n,'" width="').concat(e,'" height="').concat(t,'"/></a>')},getVastXml:function(e){var t=bouncex.campaigns[this.campaignId].gbi.placements[this.placementId].override_content,i=t&&"vast"===t.type,n=t&&t.value&&"vastxml"===v.default.isVastOrTag(t.value);return i&&n&&bouncex.calling_url.indexOf("aqbxovrd")>-1?t.value:e||'<VAST version="2.0">\n  <Ad>\n    <InLine>\n      <AdSystem>Acudeo Compatible</AdSystem>\n      <AdTitle>VAST 2.0 AQBX</AdTitle>\n      <Description>VAST 2.0 AQBX</Description>\n      <Creatives>\n        <Creative>\n          <Linear>\n            <Duration>00:00:21</Duration>\n            <MediaFiles>\n                <MediaFile\n                    delivery="progressive"\n                    type="video/mp4"\n                    bitrate="500"\n                    width="720"\n                    height="480"\n                    scalable="true"\n                    maintainAspectRatio="true">https://'.concat(bouncex.website.biu,"/assets/global/videos/pub/demo/ads_demo_video.mp4</MediaFile>\n            </MediaFiles>\n          </Linear>\n        </Creative>\n      </Creatives>\n    </InLine>\n  </Ad>\n</VAST>")}})},index:function(e){return(0,y.hasFeatureFlag)("INDEX_MULTIFORMAT")?new c.SSP_INDEX_Request(e):new d.SSP_INDEX_Request(e)},pbm:function(e){return new u.SSP_PBM_Request(e)},criteo:function(e){return new l.SSP_Criteo_Request(e)},magnite:function(e){return new p.SSP_Magnite_Request(e)},openpath:function(e){return new g.SSP_OpenPath_Request(e)}},_reportWinningBids:function(e,t){var i=this,n=bouncex.campaigns[e],a=this._constants.bidEvents.selected,r=m.default.hasIDfromIdentityHub()?1:0;if(T.default.debug({campaignId:e,group:"Ads",message:"Winning Bids",metadata:{winningBids:t}}),(0,G.shouldSampleBid)()){var o,s=Array.from(t).map((function(t){return i._selectWinningBid(e,t)})),d={auction_number:n.gbi.auctionCount,bids:JSON.stringify(s),has_uid:h.default.isValid()?1:0,has_uid_identity_hub:r,has_uid_prebid:H.default.getUserIds(["uid2"]).length>0?1:0,has_iiq:(null===(o=bouncex)||void 0===o||null===(o=o.ads)||void 0===o||null===(o=o.iiq)||void 0===o||null===(o=o.ids)||void 0===o?void 0:o.length)>0?1:0};this.report(e,a,d)}},_selectWinningBid:function(e,t){var i=bouncex.campaigns[e],n=i.gbi.placements[t.placementId];return this.log(e,"selecting ".concat(n.mediaType," bid from ").concat(t.provider)),{media_type:n.mediaType,partner:t.provider,deployment:n.deployment,deal_id:t.dealId||"NA",price:bouncex.ads._getReportablePrice(t.price),auction_number:i.gbi.auctionCount,ad_unit_id:t.adUnitId}},_setAuctionTimeout:function(e){var t=this._constants.auctionDelayInMilliseconds,i=this;(0,P.setTimeoutWrapper)((function(){bouncex.campaigns[e].gbi.bids.length>0||i._allRequestsAreComplete(e)?(i.log(e,"one or more bids received, or all requests have resolved; ending wait period"),i._endAllRequests(e),i._initAuction(e)):(i.log(e,"no bids after first wait period; some requests still pending; trying again"),(0,P.setTimeoutWrapper)((function(){i.log(e,"ending wait period"),i._endAllRequests(e),i._initAuction(e)}),t))}),t)},hasSuppressedLineItem:function(){return bouncex.integrations.gam.hasSuppressedLineItem()},shouldDfpPreventShowing:function(e){return this.isDfpLoaded()?!!this.hasSuppressedLineItem()&&(this.log(e,"GAM Suppressed Lineitem on page",!0),!0):(this.log(e,"GAM not loaded",!0),!0)},canShowPubCampaign:function(e,t,i){var n=bouncex.campaigns[t];if(!this._isForceTest(t)){if(this._exceedsFrequencyCap())return!1;if(i&&this.shouldDfpPreventShowing(t))return!1}if(n.dynamic_anchor){if(this._customizations.anchor.updateDynamicAnchor(t),0===n.visibleAnchors.length)return this.log(t,"dynamic anchor - no visible anchors",!0),!1;if(!this._customizations.anchor.passesViewabilityTest(t))return this.log(t,"dynamic anchor - fails visibility test",!0),!1}if(n.trigger&&n.winningBid)return e===n.trigger||n.activationBid(e)===n.winningBid;if(n.deployment_type&&!n.deployment_type.canShow())return!1;var a=this.readyCampaignAd(e,t);return this.tryPop(t,e),!n.failed&&(n.gbi.ready?!(!n.trypopTriggered||!a)&&(this.log(t,"passes canShowPubCampaign criteria"),"floater"===n.deployment&&sessionStorage.setItem("wk-smart-header","impressed"),!0):(this.log(t,"gbi.ready is false",!0),!1))},readyCampaignAd:function(e,t){var i=bouncex.campaigns[t],n=i.activationBid(e);return!!n&&(n!==i.winningBid&&(i.obj1&&(i.obj1.add(i.obj2).remove(),delete i.video,delete i.gbi.isVideo),this._activatePlacement(t,n)),!0)},error:function(e,t){this.log(e,t,!0)},getDeploymentType:function(e){return this._getDeploymentType(e)},getFailedDeployments:function(){return this._failedDeployments},initCampaign:function(e){this.log(e,"initializing campaign");var t=bouncex.campaigns[e];if(t.adformats=t.winningBid=null,t.gbi.auctionCount?t.gbi.auctionCount++:t.gbi.auctionCount=1,this.log(e,"initCampaign run #".concat(t.gbi.auctionCount)),t.gbi.auctionCount>13&&this._failCampaign(e),C.default.isMissingTarget(t))return this.error(e,"no anchor found"),this._failCampaign(e);t.activated||(this.report(e,"eligible"),t.listeners=new O.default,(0,S.event_js_eval)(e,"preactivation"),this.log(e,"activating behavioral triggers"),this._activateBehavioralTriggers(e),t.activated=!0),this._initRequests(e)},syncUsers:function(){Object.keys(bouncex.website.sspConfig||{}).forEach((function(e){"function"==typeof K._userSyncRequests[e]&&((0,y.hasFeatureFlag)("DISABLE_USER_SYNC_".concat(e.toUpperCase()))||K._userSyncRequests[e]())}),this)},initDfp:function(){bouncex.integrations.gam.init()},isDfpLoaded:function(){return bouncex.integrations.gam.getDfpIsLoaded()},getDfpEndPageViewEvent:function(){return bouncex.integrations.gam.getDfpEndPageViewEvent()},getDfpLineItemIds:function(){return bouncex.integrations.gam.lineItems.getAll()},handleImpression:function(e){this._adjustPosition(e),this._incrementImpressionCounters()},log:function(e,t,i){var n={group:"Ads",message:t,campaignId:e};i?T.default.error(n):T.default.info(n)},report:function(e,t,i){if(0!==t.indexOf("bid_")||!bouncex.vars.block_bid_events){var n=bouncex.campaigns[e],a=(i=i||{}).partner||n.winningBid&&n.winningBid.provider;switch(a?this.log(e,"provider ".concat(a.toUpperCase(),' reporting event "').concat(t,'"')):this.log(e,'reporting event "'+t+'"'),t){case"pop":var r=n.winningBid;i.ad_unit_id=n.activeAdUnitId||0,r?(i.targeting="NA",i.partner=r.provider,i.deal_id=r.dealId,i.deal_name=r.dealName,i.price=this._getReportablePrice(r.price),i.deployment=this._getDeploymentType(e),i.auction_number=n.gbi.auctionCount,i.is_performance_ads=_.default.bidIsPerformanceAd(r),W.default.reportImpression(r)):this.error(e,'unable to find bid data to report on "pop"');break;case"trypop":case"eligible":i.ad_units=this._getAdUnitIds(e).join(",");break;case"click":n.winningBid&&(i.deal_id=n.winningBid.dealId,i.deal_name=n.winningBid.dealName);var o=this._getDeploymentType(e);o&&(i.deployment=o),i.value=i.value||"nonad";break;case"ad_intervention":if(n.winningBid){i=Object.assign({},n.winningBid,{adHtml:null,vastData:null},i)}}var s;if(["pop","trypop","click","eligible"].includes(t))i.has_uid=h.default.isValid()?1:0,i.has_uid_identity_hub=m.default.hasIDfromIdentityHub()?1:0,i.has_uid_prebid=H.default.getUserIds(["uid2"]).length>0?1:0,i.has_iiq=(null===(s=bouncex)||void 0===s||null===(s=s.ads)||void 0===s||null===(s=s.iiq)||void 0===s||null===(s=s.ids)||void 0===s?void 0:s.length)>0?1:0;i.source="ads",(0,D.buildReport)(e,t,i)}},tryPop:function(e,t){var i=bouncex.campaigns[e];if(!i.trypopTriggered){if("overlay"!==this._getDeploymentType(e)&&!i.dynamic_anchor){var n=(0,k.parseSiteElementSelector)(i.callout_t);if(!(!!n&&!!jQuery(n).length))return}this.report(e,"trypop",{activation:t}),i.trypopTriggered=!0}}};t.default=K},5390:(e,t,i)=>{var n=i(4836),a=i(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.Auction=h,t.default=m;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=f(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,i&&i.set(e,n);return n}(i(3036)),o=i(5708),s=i(5432),d=i(7392),c=i(2678),u=i(9436),l=i(9648),p=n(i(4223)),g=i(2481);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(f=function(e){return e?i:t})(e)}var v={aqbx:r.SSP_Request,index:s.SSP_INDEX_Request,pbm:d.SSP_PBM_Request,criteo:c.SSP_Criteo_Request,magnite:u.SSP_Magnite_Request,openpath:l.SSP_OpenPath_Request};function m(e){this.__init(e||{})}function h(e,t){this.auctionHandler=e,this.campaigns=t,this.__init()}m.impid=0,m.SSP_factory=function(e,t){var i=(0,g.hasFeatureFlag)("INDEX_MULTIFORMAT")&&"index"===e?o.SSP_INDEX_Request:v[e],n=new(i&&i.__SSP_Class||r.default)(t);return n.provider=e,i&&(n.__Request_Class=i||r.SSP_Request),n},Object.assign(m.prototype,{activeAuction:null,auctions:null,auctionTimeout:null,auctionCheckpoint:null,__init:function(e){this.auctions=[],this.auctionTimeout=e.auctionTimeout||null,this.auctionCheckpoint=e.auctionCheckpoint||null},getOrCreateAuction:function(){return null===this.activeAuction||this.activeAuction.checkBidRequestsDone()?this.createAndSendNewAuction():this.activeAuction},createAndSendNewAuction:function(){var e=this.createNewAuction();return null!==e&&setTimeout(e.sendBidRequests.bind(e),100),e},createNewAuction:function(){var e=this.getAuctionableCampaigns();return Object.keys(e).length?(this.activeAuction=new h(this,e),this.auctions.push(this.activeAuction),this.activeAuction):null},getAuctionableCampaigns:function(){var e={};for(var t in bouncex.campaigns){var i=bouncex.campaigns[t];i.isGBI2&&i.isReadyForAuction(!0)&&(e[t]=i)}return e}}),Object.assign(h.prototype,{campaigns:null,providerCampaigns:null,bidRequests:null,SSPList:null,startTime:null,endTime:null,durationTime:null,__init:function(){this.SSPList={}},__initBidRequests:function(){return null!==this.campaigns&&this.__initCampaigns()&&(this.providerCampaigns=this.getProviderCampaigns(),this.bidRequests=this.createBidRequests()),this.bidRequests&&Object.keys(this.bidRequests).length>0},__initCampaigns:function(){for(var e in this.campaigns){var t=this.campaigns[e];t.isReadyForAuction()?this.__initCampaign(t):delete this.campaigns[e]}return Object.keys(this.campaigns).length>0},__initCampaign:function(e){e.gbi.hasBegunAuction=!0,e.gbi.bids=[],e.gbi.requests=[],e.adformats=null,e.winningBid=null},__initSSP:function(e,t){var i={auction:this,campaign_ids:Object.keys(t),campaign_placement_ids:t};return this.SSPList[e]=m.SSP_factory(e,i)},getProviderCampaigns:function(){var e={};for(var t in this.campaigns){var i=this.campaigns[t].getProviders();for(var n in i)(e[n]||(e[n]={}))[t]=i[n]}return e},createBidRequests:function(){var e={};for(var t in this.providerCampaigns){var i=this.providerCampaigns[t],n=this.__initSSP(t,i),a=n.createBidRequests();e[t]={ssp:n,campaign_placement_ids:i,requests:a}}return e},sendBidRequests:function(){var e=this.auctionHandler.auctionTimeout,t=this.auctionHandler.auctionCheckpoint;if(null===this.startTime){if(this.startTime=new Date,!this.__initBidRequests())return this.failed=!0,void this.__bidRequestsDone();Object.values(this.bidRequests).forEach(p.default.tryCatch((function(e){e.ssp.sendBidRequests(e.requests),e.timeSent=new Date}))),null!==e&&setTimeout(this.__timeout.bind(this),e),null!==t&&setTimeout(this.__checkpoint.bind(this),t)}},getIncompleteBidRequests:function(){return Object.values(this.bidRequests).filter((function(e){return e.timeSent&&!e.ssp.checkIfDone()}))},checkBidRequestsDone:function(){return null!==this.startTime&&(null!==this.endTime||null===this.bidRequests||0===this.getIncompleteBidRequests().length&&(this.__bidRequestsDone(),!0))},__timeout:function(){null===this.endTime&&(this.__bidRequestsDone(),this.abortFutileRequests())},__checkpoint:function(){this.updateWinningBids(),this.abortFutileRequests()},__bidRequestsDone:function(){null===this.endTime&&(this.endTime=new Date,this.durationTime=this.endTime-this.startTime,this.updateWinningBids())},updateWinningBids:function(){for(var e in this.campaigns){var t=this.campaigns[e];if(this.endTime||t.gbi.bids.length)try{this.updateCampaignWinningBids(t)}catch(e){}}},abortFutileRequests:function(){return Object.values(this.bidRequests).reduce((function(e,t){return e.concat(t.ssp.abortFutileRequests())}),[])},updateCampaignWinningBids:function(e){return bouncex.ads._initAuction(e.id),e.winningBid}}),Object.defineProperties(r.default.prototype,{auctionHandler:{writable:!0}})},6950:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(861)),r={hasDealId:function(e){var t=e.filter((function(e){return!!e.dealId}));return t.length?t:e},hasHighestPriority:function(e){var t=/p([1-9][0-9]?)/i,i=0;return e.reduce((function(e,n){var a=[n.dealName,n.dealId].join(),r=t.exec(a);if(null===r)return e;var o=Number(r[1]);return o>i?(i=o,[n]):(o===i&&e.push(n),e)}),e)},hasHighestPrice:function(e){var t=[],i=0;return e.forEach((function(e){e.price>i?(i=e.price,t=[e]):e.price==i&&t.push(e)})),t.length?t:e},deprioritizeBackfill:function(e){var t=e.filter((function(e){return!e.isBackfill}));if(t.length)return t;var i=bouncex.website.sspConfig,n=e.map((function(e){var t,n=e.provider;return null===(t=i[n])||void 0===t?void 0:t.ssp_priority})),r=Math.max.apply(Math,(0,a.default)(n)),o=e.filter((function(e){var t,n=e.provider;return(null===(t=i[n])||void 0===t?void 0:t.ssp_priority)===r}));return o.length?o:e},arrivedFirst:function(e){var t=[],i=0;return e.forEach((function(e){0===i||e.arrivalTime<i?(i=e.arrivalTime,t=[e]):e.arrivalTime==i&&t.push(e)})),t.length?t:e},dealIdManualOverride:function(e){var t=new Date(2024,9,2);if(Date.now()>=t)return e;var i=[],n=e.filter((function(e){return i.includes(e.dealId)||i.includes(e.dealName)}));return n.length?n:e},getDefaultAdsFilters:function(){return[r.dealIdManualOverride,r.deprioritizeBackfill,r.hasHighestPriority,r.hasHighestPrice,r.arrivedFirst]}};t.default=r},2678:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(4836),_typeof=__webpack_require__(8698);Object.defineProperty(exports,"__esModule",{value:!0}),exports.SSP_Criteo_Request=SSP_Criteo_Request,exports.Zones=void 0,exports.default=SSP_Criteo;var _defineProperty2=_interopRequireDefault(__webpack_require__(8416)),_ssp=_interopRequireWildcard(__webpack_require__(3036)),_helpers=__webpack_require__(6487),_helpers2=__webpack_require__(2481),_logger=_interopRequireDefault(__webpack_require__(5754)),_wkndEval=_interopRequireDefault(__webpack_require__(952));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(_getRequireWildcardCache=function(e){return e?i:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var i=_getRequireWildcardCache(t);if(i&&i.has(e))return i.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}return n.default=e,i&&i.set(e,n),n}var Zones=exports.Zones={display:{global:{"300x250":1668820,"300x600":1639940,"320x480":1639944,"480x320":1639941,"600x500":1639943,"720x480":1639939,"800x1100":1639937,"800x1200":1639942,"900x550":1639936,"900x600":1639935,"970x250":1639934,"728x90":1760190,"320x50":1760191,"1920x480":1826333},GB:{"300x250":1684286,"300x600":1684296,"320x480":1684287,"480x320":1684289,"600x500":1684288,"720x480":1684290,"800x1100":1684293,"800x1200":1684294,"900x550":1684295,"900x600":1684292,"970x250":1685692,"728x90":1760192,"320x50":1760193,"1920x480":1826346}},video:{global:{default:1699741}}},sspCriteoBaseObject={__Request_Class:SSP_Criteo_Request,provider:"criteo",__init:function __init(){var _window,_window$Criteo,_ref,_ref$events;null!==(_window$Criteo=(_window=window).Criteo)&&void 0!==_window$Criteo||(_window.Criteo={});var isCriteoLoaded=Object.keys(window.Criteo).length>0;(0,_helpers2.hasFeatureFlag)("DISABLE_CRITEO_NAMESPACE")||!isCriteoLoaded||document.getElementById("wknd-criteo")||(window.CriteoWknd={},fetch("https://static.criteo.net/js/ld/publishertag.js").then((function(response){response.ok?response.text().then((function(criteoScript){var criteoScriptNamespaced=criteoScript.replace(/window.Criteo/g,"window.CriteoWknd"),criteoScriptNamespaced2=criteoScriptNamespaced.replace(/window.criteo_pubtag/g,"window.criteo_pubtagWknd");_wkndEval.default.enabled()?_wkndEval.default.exec(criteoScriptNamespaced2,{},{source:"ssp.criteo.js"},"",!0):eval(criteoScriptNamespaced2)})):_logger.default.warn({group:"Ads",message:"Nok response while requesting Criteo script."})})).catch((function(e){_logger.default.warn({group:"Ads",message:"Failed to fetch Criteo script.",metadata:{error:e}})}))),!(0,_helpers2.hasFeatureFlag)("DISABLE_CRITEO_NAMESPACE")&&isCriteoLoaded||document.getElementById("wknd-criteo")||(0,_helpers2.createElement)("script",{async:"async",type:"text/javascript",src:"https://static.criteo.net/js/ld/publishertag.js",id:"wknd-criteo"},document.head),null!==(_ref$events=(_ref=window.CriteoWknd||window.Criteo).events)&&void 0!==_ref$events||(_ref.events=[]),_ssp.default.prototype.__init.apply(this,arguments)}};function SSP_Criteo(e){_ssp.default.call(this,e)}SSP_Criteo.prototype=Object.create(_ssp.default.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_Criteo.prototype,"constructor")}),Object.assign(SSP_Criteo.prototype,sspCriteoBaseObject);var sspCriteoRequestBaseObject={provider:"criteo",init:function(){this.setIdentifiers();var e=this.getRequestData(),t=this.getOptions(e);return this.fetch(t)},setIdentifiers:function(){var e;if(null===(e=bouncex.ads)||void 0===e||!e.criteoHasUpdatedIds){var t=this.getExtraIds().map((function(e){var t;return null!=e&&null!==(t=e.uids)&&void 0!==t&&t.length&&e.uids.forEach((function(e){var t;null!=e&&e.ext||(e.ext={}),null!=e&&null!==(t=e.ext)&&void 0!==t&&t.stype||(e.ext.stype="ppuid")})),e}));t.length&&(this.isCriteoInitialized()||_logger.default.warn({group:"Ads",message:"Criteo not initialized. Ids may not be updated.",metadata:{identifiers:t}}),bouncex.ads.criteoHasUpdatedIds=!0,(window.CriteoWknd||window.Criteo).events.push((function(){_logger.default.debug({group:"Ads",message:"Criteo setting user IDs.",metadata:{identifiers:t}}),(window.CriteoWknd||window.Criteo).SetIdentities(t)})))}},getScriptVersion:function(){return window.CriteoWknd?"Criteo with WKND namespace":"Criteo original script"},isCriteoInitialized:function(){var e,t;return window.CriteoWknd&&window.criteo_pubtagWknd?null===(e=window.criteo_pubtagWknd)||void 0===e||null===(e=e.context)||void 0===e||null===(e=e.serviceProvider)||void 0===e?void 0:e.initialized:!window.CriteoWknd&&window.criteo_pubtag?null===(t=window.criteo_pubtag)||void 0===t||null===(t=t.context)||void 0===t||null===(t=t.serviceProvider)||void 0===t?void 0:t.initialized:void 0},fetch:function(e){this.startTime=Date.now();var t=this.handleResponse.bind(this),i=this.getScriptVersion(),n=this.isCriteoInitialized;(window.CriteoWknd||window.Criteo).events.push((function(){_logger.default.debug({group:"Ads",message:"Criteo bids requested using ".concat(i,"."),metadata:{request:e.data}}),n()||_logger.default.warn({group:"Ads",message:"Criteo not initialized. Bid request may not be sent.",metadata:{request:e.data}}),(window.CriteoWknd||window.Criteo).RequestBids(e.data,t,5e3)}))},handleResponse:function(e){var t=this,i=bouncex.campaigns[this.campaignId],n=bouncex.ads._constants.bidEvents,a=n.error;if(i){var r={partner:"criteo",partner_site_id:"wunderkind",deployment:this.deployment||"unknown",requested_ad_units:"display"===this.type?this.width+"x"+this.height:"video",request_timestamp:this.startTime,price:"NA",deal_id:"NA",auction_number:i.gbi.auctionCount,ad_unit_id:this.adUnitId};_logger.default.debug({group:"Ads",message:"Criteo bids retrieved",metadata:{impid:"".concat(this.placementId),bids:e}});var o=e.filter((function(e){return e.impressionId==="".concat(t.placementId)}));if(o.length){var s=this.handleSuccessfulResponse(o[0]);a=s.status,r.creative_type=(0,_helpers.getCreativeType)(s.bid.vastData,this.type)}else a=n.empty;void 0!==e.nbr&&(r.nbr=e.nbr),this.reportResult(a,r)}else _logger.default.debug({group:"Ads",message:"Criteo Bid Response received for a campaign that is no longer available",metadata:{impid:"".concat(this.placementId),bids:e,campaignId:this.campaignId}})},handleSuccessfulResponse:function(e){var t=bouncex.campaigns[this.campaignId],i=bouncex.ads._constants.bidEvents,n=this.getCreativeFromBid(e),a=bouncex.ads._createBid({provider:"criteo",campaignId:this.campaignId,placementId:this.placementId,adUnitId:this.adUnitId,price:e.cpm,adHtml:null,dealId:e.dealCode,vastData:null,arrivalTime:this.endTime,isBackfill:!1});return"video"===this.type?a.vastData=n:a.adHtml=n,t.gbi.bids.push(a),{status:i.fill,bid:a}},getCreativeFromBid:function(e){return"video"===this.type?e.vastXml||e.vastUrl:window.CriteoWknd?'\n        <script type="text/javascript">\n        var w = window;\n        var doc = window.document;\n        for (i = 0; i < 10; i++) {\n          w = w.parent;\n          if (w.CriteoWknd) {\n            try {\n              w.CriteoWknd.RenderAd("'.concat(e.id,'", doc);\n              break;\n            } catch (e) {\n              continue;\n            }\n          }\n        }\n        <\/script>\n      '):'\n        <script type="text/javascript">\n        var w = window;\n        var doc = window.document;\n        for (i = 0; i < 10; i++) {\n          w = w.parent;\n          if (w.Criteo) {\n            try {\n              w.Criteo.RenderAd("'.concat(e.id,'", doc);\n              break;\n            } catch (e) {\n              continue;\n            }\n          }\n        }\n        <\/script>\n      ')},getSiteId:function(){return this._getProviderConfig("network_id")},getOptions:function(e){var t=this;return{data:e,timeout:5e3,complete:function(){t.handleResponse(),t.done()}}},getRequestData:function(){var e="".concat(this.width,"x").concat(this.height),t={slotid:"".concat(this.placementId),zoneid:this.getZoneID(),publishersubid:"".concat(bouncex.website.id),sizes:[e],ext:{gpid:this._getImpressionGPID(this)}},i="video"===this.type;i&&(t.mediaTypes={video:{context:"outstream",placement:"overlay"===this.deployment?5:4,playerSize:[this.width,this.height],mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6],api:[1,2],playbackmethod:[2],skip:0,startdelay:0,maxduration:150,videoCallback:function(){}}});var n=this._getFloorValue();n&&(t.ext.floors=(0,_defineProperty2.default)({},i?"video":"banner",{"*":{floor:n,currency:"USD"}})),_logger.default.debug({group:"Ads",message:"Calculating Criteo Request Data",metadata:{placement:t}});var a={networkId:this.getSiteId(),placements:[t]},r=this._getProviderConfig("publisher_id");return r&&(a.publisherId=r),a},getZoneID:function(){var e,t,i=this.getZones(),n="".concat(this.width,"x").concat(this.height);return _logger.default.debug({group:"Ads",message:"Calculating Criteo Zone",metadata:{zoneMap:i,dimensions:n,result:null!==(e=i[n])&&void 0!==e?e:i.default}}),null!==(t=i[n])&&void 0!==t?t:i.default},getZones:function(){var e,t,i,n,a,r=Zones[this.type];return _logger.default.debug({group:"Ads",message:"Calculating Criteo Zones",metadata:{type:this.type,baseZoneMap:Zones[this.type],country:null===(e=bouncex.state)||void 0===e||null===(e=e.geo)||void 0===e?void 0:e.country_code,result:null!==(t=r[null===(i=bouncex.state)||void 0===i||null===(i=i.geo)||void 0===i?void 0:i.country_code])&&void 0!==t?t:r.global}}),null!==(n=r[null===(a=bouncex.state)||void 0===a||null===(a=a.geo)||void 0===a?void 0:a.country_code])&&void 0!==n?n:r.global}};function SSP_Criteo_Request(e){_ssp.SSP_Request.call(this,e)}SSP_Criteo_Request.__SSP_Class=SSP_Criteo,SSP_Criteo_Request.prototype=Object.create(_ssp.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(SSP_Criteo_Request.prototype,"constructor")}),Object.assign(SSP_Criteo_Request.prototype,sspCriteoRequestBaseObject)},6487:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.getCreativeType=function(e,t){if(!t)return;if("video"!==t)return"html";if(!e)return;if("vastxml"===a.default.isVastOrTag(e))return"vast_xml";return"vast_url"},t.getSSPStyles=function(e){var t;return null!==(t=o[e])&&void 0!==t?t:""},t.getSchainObject=function(e){var t,i,n={ver:"1.0",complete:1,nodes:[{asi:"wunderkind.co",sid:s(),hp:1}]};if(e){var a=n.nodes[0];a.rid=e,a.name=bouncex.website.name,a.domain=bouncex.website.domain}if(null!==(t=bouncex.website)&&void 0!==t&&null!==(t=t.ads)&&void 0!==t&&t.schainSellerDomain&&null!==(i=bouncex.website)&&void 0!==i&&null!==(i=i.ads)&&void 0!==i&&i.schainSellerId){var r={asi:bouncex.website.ads.schainSellerDomain,sid:bouncex.website.ads.schainSellerId,hp:1};n.nodes.unshift(r)}return n},t.getWunderkindSiteIDForSchain=s;var a=n(i(1618)),r=n(i(5754)),o={};function s(){var e,t,i,n=null!==(e=null===(t=bouncex.website)||void 0===t||null===(t=t.ads)||void 0===t?void 0:t.IABPubAccountID)&&void 0!==e?e:bouncex.website.id;return null!==(i=bouncex.website)&&void 0!==i&&null!==(i=i.ads)&&void 0!==i&&i.IABPubAccountID||r.default.info({group:"Ads: getWunderkindSiteIDForSchain",message:"IABPubAccountID not found. Falling back to website id."}),"".concat(n)}},5708:(e,t,i)=>{var n=i(4836),a=i(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_INDEX_Request=m,t.default=f;var r,o=n(i(861)),s=n(i(8416)),d=i(2481),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=l(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,i&&i.set(e,n);return n}(i(8897)),u=n(i(3723));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(l=function(e){return e?i:t})(e)}function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){(0,s.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function f(e){c.default.call(this,e)}r={__Request_Class:m,provider:"index"},f.prototype=Object.create(c.default.prototype,{constructor:Object.getOwnPropertyDescriptor(f.prototype,"constructor")}),Object.assign(f.prototype,r);var v={provider:"index",intermediaryId:"869cff86d1c453c1",openRTBVersion:"2.5",getOptions:function(e){var t=this.isVideo(e),i={url:bouncex.ssl?"https://as-sec.casalemedia.com/cygnus":"http://as.casalemedia.com/cygnus",data:{v:t?"8.8":"7",cb:Date.now(),s:this.getSiteId(),r:JSON.stringify(e)},dataType:"text",contentType:"application/x-www-form-urlencoded",global:!1,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(t,i){this.handleResponse(t,i,e),this.done()}};return t&&(i.data.fn="jsonp"),i},getSiteId:function(){var e=this._getProviderConfig("s"),t=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&t||e},getRequestData:function(e){var t,i,n,a=this.getBaseSite(),r=(bouncex.segments||[]).map((function(e){return"".concat(e)}));a.ext=g(g({},null==a?void 0:a.ext),{},{data:g(g({},null==a||null===(t=a.ext)||void 0===t?void 0:t.data),{},{segment:r})}),a.page=this.getUrlWithParams();var s={id:String((0,d.getEpochSeconds)()),imp:e||[],site:a,device:this.getDevice(),source:{pchain:"".concat(this.intermediaryId,":").concat(bouncex.website.id),ext:{schain:this.schainObject()}},user:{eids:this.getExtraIds()}};this.appendCompliance(s),this.appendPmp(s);var c=u.default.GetData();if(null!=c&&c.dataAvailable){var l,p,f,v,m,h,b,y;null!==(p=(l=s.site).ext)&&void 0!==p||(l.ext={}),null!==(v=(f=s.site.ext).data)&&void 0!==v||(f.data={}),c.keywords&&(s.site.ext.data.keywords=c.keywords);var _=null!==(m=null==c||null===(h=c.iab)||void 0===h||null===(h=h.v1)||void 0===h?void 0:h.map((function(e){return e.id})))&&void 0!==m?m:[],x=null!==(b=null==c||null===(y=c.iab)||void 0===y||null===(y=y.v3)||void 0===y?void 0:y.map((function(e){return e.id})))&&void 0!==b?b:[];s.site.ext.data.iab=[].concat((0,o.default)(_),(0,o.default)(x))}if(null!==(i=s.imp[0])&&void 0!==i&&i.id&&null!==(n=s.site)&&void 0!==n&&null!==(n=n.ext)&&void 0!==n&&n.data){var w=this.lookupPlacementSettings[s.imp[0].id];s.site.ext.data.placement=[null==w?void 0:w.deployment]}return s},isVideo:function(e){var t;return null==e||null===(t=e.imp)||void 0===t?void 0:t.some((function(e){return e.video}))},getResponseBidData:function(e){var t=e.ext||{},i=this.getImpressionGroup(e),n=this.getBidPlacementSettings(e,i),a=n.placementID,r=n.placement,o=n.campaignID,s=this.auction.campaigns[o],d="video"===n.type,c="".concat(n.width,"x").concat(n.height),u=this.convertPrice(t.pricelevel)||e.price||0;return{provider:this.provider,campaignId:o,placementId:a,adUnitId:r.adUnitId,price:Number(u),adHtml:e.adm,vastData:t.vasturl||e.adm,dealId:e.dealid,dealName:e.dealname,arrivalTime:this.endTime,requestedAdUnits:d?"video":c,deployment:s.deployment||"unknown",auctionNumber:s.gbi.auctionCount}},getBidsFromResponse:function(e){try{var t=e.responseJSON;if(!t&&e.responseText){var i=e.responseText,n=i.substring(i.indexOf("(")+1,i.lastIndexOf(")"));t=JSON.parse(n)}return t.seatbid[0].bid}catch(e){return!1}},getUrlWithParams:function(){var e=this.getCampaign().type,t=document.location.protocol+"//"+document.location.hostname+document.location.pathname,i=bouncex.state.mobile?"mobile":"desktop",n=(bouncex.segments||[]).map((function(e){return"(".concat(e,")")}));return t+"?deployment=".concat(e,"&device=").concat(i,"&segments=").concat(n.join(","))},createDisplayImpression:function(e,t){var i=this.__createDisplayImpression(e,t);return i.banner.format=[{w:i.banner.w,h:i.banner.h}],i},convertPrice:function(e){if(!e)return 0;var t=e.length-2,i=e.split("");i.splice(t,0,".");var n=i.join("").replace(/[^0-9.]/g,"");return Number(n).toFixed(5)}};function m(e){c.SSP_CONSOLIDATED_Request.call(this,e)}m.__SSP_Class=f,m.prototype=Object.create(c.SSP_CONSOLIDATED_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(m.prototype,"constructor")}),Object.assign(m.prototype,v)},5432:(e,t,i)=>{var n=i(4836),a=i(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_INDEX_Request=h,t.default=v;var r=n(i(861)),o=n(i(8416)),s=i(2481),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=l(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,i&&i.set(e,n);return n}(i(3036)),c=n(i(3723)),u=i(6487);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(l=function(e){return e?i:t})(e)}function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){(0,o.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var f={__Request_Class:h,provider:"index",__createAllBidRequests:function(e){var t=[];return this.__groupBidRequests().forEach((function(i){var n=Object.assign(i,e),a=this.__instantiateBidRequest(n);t.push(a)}),this),t},__groupBidRequests:function(){var e=this,t=new Map,i=function(i){(e.campaign_placement_ids[i]||[]).forEach((function(e){var n={campaignID:i,placementID:e};this.addRequestGroupPlacement(t,n)}),e)};for(var n in this.auction.campaigns)i(n);return t},addRequestGroupPlacement:function(e,t){var i=t.campaignID,n=t.placementID,a=this.getRequestGroup(e,t);if(void 0!==a){var r=(0,s.getOrSet)(a.campaigns,i,this.auction.campaigns[i]),o=r.gbi.placements[n],d=(0,s.getOrSet)(a.campaignSettings,i,{campaignID:i,deployment:r.deployment,placementSettings:{}});Object.assign(t,this.__createPlacementBidRequest(i,o,n)),d.placementSettings[n]=t;var c=this.getPlacementLookupKey(t);a.lookupPlacementSettings[c]=t}},getRequestGroup:function(e,t){var i=this.getRequestKey(t);return(0,s.getOrSet)(e,i,{requestKey:i,campaigns:{},campaignSettings:{},lookupPlacementSettings:{}})},getRequestKey:function(e){var t=e.campaignID;return[t,this.auction.campaigns[t].gbi.placements[e.placementID].mediaType].join("|")},getPlacementLookupKey:function(e){if((0,s.hasFeatureFlag)("INDEX_MULTIFORMAT")){var t="video"===e.type?["video"]:[e.width,e.height];return[e.impid].concat(t).join("|")}var i=e.campaignID;this.auction.campaigns[i];return[e.impid].join("|")},__createPlacementBidRequest:function(e,t,i){return{impid:this.getUniqueImpressionID(),campaignID:e,placement:t,placementID:i,adUnitId:t.adUnitId,type:t.mediaType,width:t.width,height:t.height,deployment:t.deployment}}};function v(e){this.__init(e||{})}Object.assign(v.prototype=Object.create(d.default.prototype,{constructor:Object.getOwnPropertyDescriptor(v.prototype,"constructor")}),f);var m={provider:"index",intermediaryId:"869cff86d1c453c1",openRTBVersion:"2.5",init:function(){var e=this.getRequestData(),t=this.getOptions(e);return this.fetch(t)},getOptions:function(e){var t=this.isVideo(),i={url:bouncex.ssl?"https://as-sec.casalemedia.com/cygnus":"http://as.casalemedia.com/cygnus",data:{v:t?"8.8":"7",cb:Date.now(),s:this.getSiteId(),r:JSON.stringify(e)},dataType:"text",contentType:"application/x-www-form-urlencoded",global:!1,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(t,i){this.handleResponse(t,i,e),this.done()}};return t&&(i.data.fn="jsonp"),i},isVideo:function(){var e=Object.values(this.campaignSettings)[0];return"video"===Object.values(e.placementSettings)[0].type},getSiteId:function(){var e=this._getProviderConfig("s"),t=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&t||e},getRequestData:function(e){var t,i,n,a=this.getBaseSite(),o=(bouncex.segments||[]).map((function(e){return"".concat(e)}));a.ext=g(g({},null==a?void 0:a.ext),{},{data:g(g({},null==a||null===(t=a.ext)||void 0===t?void 0:t.data),{},{segment:o})}),a.page=this.getUrlWithParams();var d={id:String((0,s.getEpochSeconds)()),imp:e||[],site:a,device:this.getDevice(),source:{pchain:"".concat(this.intermediaryId,":").concat(bouncex.website.id),ext:{schain:this.schainObject()}},user:{eids:this.getExtraIds()}};if(!e)for(var u in this.campaignSettings)this.__getCampaignRequestData(d,this.campaignSettings[u]);this.appendCompliance(d),this.appendPmp(d);var l=c.default.GetData();if(null!=l&&l.dataAvailable){var p,f,v,m,h,b,y,_;null!==(f=(p=d.site).ext)&&void 0!==f||(p.ext={}),null!==(m=(v=d.site.ext).data)&&void 0!==m||(v.data={}),l.keywords&&(d.site.ext.data.keywords=l.keywords);var x=null!==(h=null==l||null===(b=l.iab)||void 0===b||null===(b=b.v1)||void 0===b?void 0:b.map((function(e){return e.id})))&&void 0!==h?h:[],w=null!==(y=null==l||null===(_=l.iab)||void 0===_||null===(_=_.v3)||void 0===_?void 0:_.map((function(e){return e.id})))&&void 0!==y?y:[];d.site.ext.data.iab=[].concat((0,r.default)(x),(0,r.default)(w))}if(null!==(i=d.imp[0])&&void 0!==i&&i.id&&null!==(n=d.site)&&void 0!==n&&null!==(n=n.ext)&&void 0!==n&&n.data){var I=this.lookupPlacementSettings[d.imp[0].id];d.site.ext.data.placement=[null==I?void 0:I.deployment]}return d},getUrlWithParams:function(){var e=this.getCampaign().type,t=document.location.protocol+"//"+document.location.hostname+document.location.pathname,i=bouncex.state.mobile?"mobile":"desktop",n=(bouncex.segments||[]).map((function(e){return"(".concat(e,")")}));return t+"?deployment=".concat(e,"&device=").concat(i,"&segments=").concat(n.join(","))},__getCampaignRequestData:function(e,t){var i=e.imp;for(var n in t.placementSettings){var a=this.__getPlacementRequestData(t,t.placementSettings[n]);i.push(a)}return i},__getPlacementRequestData:function(e,t){return"video"===t.type?this.createVideoImpression(t):this.createDisplayImpression(t)},schainObject:function(e){return(0,u.getSchainObject)(e)},handleResponse:function(e,t,i){var n=bouncex.ads._constants.bidEvents,a=n.error,r={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime};if(200===e.status){var o=this.getBidsFromResponse(e),s=o.nbr,d=o.bids;if(void 0!==s&&(r.nbr=s),d&&d.length){var c=this.handleResponseBid.bind(this,r);return d.map((function(e){return c(e,i)}))}a=n.empty}else"abort"===t||"timeout"===t?a=n.none:0===e.status?a=n.cancelled:204===e.status&&(a=n.empty);this.reportResult(a,r,i)},getBidsFromResponse:function(e){try{var t=e.responseJSON;if(!t&&e.responseText){var i=e.responseText,n=i.substring(i.indexOf("(")+1,i.lastIndexOf(")"));t=JSON.parse(n)}return{nbr:t.nbr,bids:t.seatbid.length>0?t.seatbid[0].bid:[]}}catch(e){return!1}},getBidPlacementSettings:function(e){if((0,s.hasFeatureFlag)("INDEX_MULTIFORMAT")){var t,i,n="video"===(1===(null===(t=e.ext)||void 0===t?void 0:t.bidtype)||Object.keys((null===(i=e.ext)||void 0===i?void 0:i.video)||{}).length>0||!e.w?"video":"display")?["video"]:[e.w,e.h],a=[e.impid].concat(n).join("|");return this.lookupPlacementSettings[a]}return this.lookupPlacementSettings[e.impid]},handleResponseBid:function(e,t,i){var n=bouncex.ads._constants.bidEvents.fill,a=this.getBidPlacementSettings(t),r=a.placementID,o=a.placement,s=a.campaignID,d=this.auction.campaigns[s];bouncex.ads.log(s,"placement #".concat(r," received a bid from ").concat(this.provider));var c=t.ext||{},l=c.dealid||t.dealid,p=c.dealname||t.dealname,g=this.convertPrice(c.pricelevel)||t.price||0,f=c.vasturl||t.adm,v="display"===a.type?a.width+"x"+a.height:"video",m=bouncex.ads._createBid({provider:this.provider,campaignId:s,placementId:r,adUnitId:o.adUnitId,arrivalTime:this.endTime,adHtml:t.adm,vastData:f,dealId:l,dealName:p,price:Number(g)});d.gbi.bids.push(m);var h=Object.assign({campaign_id:s,deployment:d.deployment||"unknown",requested_ad_units:v,deal_id:l||"NA",deal_name:p||"NA",price:this._getReportablePrice(g)||"NA",auction_number:d.gbi.auctionCount,ad_unit_id:o.adUnitId,creative_type:(0,u.getCreativeType)(m.vastData,v)},e);return this.reportResult(n,h,i),m},convertPrice:function(e){if(!e)return 0;var t=e.length-2,i=e.split("");i.splice(t,0,".");var n=i.join("").replace(/[^0-9.]/g,"");return Number(n).toFixed(5)}};function h(e){d.SSP_Request.apply(this,arguments)}h.__SSP_Class=v,Object.assign(h.prototype=Object.create(d.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(h.prototype,"constructor")}),m)},9436:(e,t,i)=>{var n=i(4836),a=i(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_Magnite_Request=m,t.default=f;var r=n(i(8416)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=d(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,i&&i.set(e,n);return n}(i(8897)),s=i(2481);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(d=function(e){return e?i:t})(e)}function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){(0,r.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var l={"900x600":626,"800x1200":630,"1920x480":628,"300x250":15,"300x600":10,"320x50":43,"720x480":148,"728x90":2,"970x250":57,"480x320":101},p={overlay:202,infeed:203,masthead:203,endcap:203},g={__Request_Class:m,provider:"magnite",getImpressionKey:function(e){var t=e.campaignID,i=e.placement,n="video"===e.type?"video":"display",a=[t,n];return"display"===n&&a.push(i.width,i.height),a.join("|")},getRequestKey:function(e){var t=e.campaignID,i=this.auction.campaigns[t].gbi.placements[e.placementID],n=[t,i.mediaType];return"display"===i.mediaType&&n.push(i.width,i.height),n.join("|")}};function f(e){o.default.call(this,e)}(0,s.hasFeatureFlag)("MAGNITE_MULTISIZE")&&(delete g.getImpressionKey,delete g.getRequestKey),f.prototype=Object.create(o.default.prototype,{constructor:Object.getOwnPropertyDescriptor(f.prototype,"constructor")}),Object.assign(f.prototype,g);var v={provider:"magnite",accountId:20986,openRTBVersion:"2.5",getSiteId:function(){var e;return null!==(e=this._getProviderConfig("site_id"))&&void 0!==e?e:""},shouldIncludeSchainField:function(){var e=this._getProviderConfig("account_id");return!e||e.toString()===this.accountId.toString()},getOptions:function(e){return{method:"POST",type:"POST",url:"https://ssp.wknd.ai/magnite",data:JSON.stringify(e),dataType:"json",contentType:"application/json",global:!1,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(t,i){this.handleResponse(t,i,e),this.done()}}},getRequestData:function(e){var t="".concat(bouncex.cookie.vid,"_").concat(bouncex.cookie.sid),i={id:t,site:this.getBaseSite(),device:this.getDevice(),imp:e,at:1,tmax:300,user:{eids:this.getExtraIds()}};this.shouldIncludeSchainField()&&(i.source={ext:{schain:this.schainObject(t)}});var n=this.applyCustomBidProperties(i);return this.appendCompliance(n),this.appendPmp(i),n},applyCustomBidProperties:function(e){var t,i,n,a,r=this,o=JSON.parse(JSON.stringify(e)),s=null===(t=o.imp[0])||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.w,d=null===(i=o.imp[0])||void 0===i||null===(i=i.banner)||void 0===i?void 0:i.h,c=null===(n=o.imp[0])||void 0===n?void 0:n.id,g=l["".concat(s,"x").concat(d)]||0;if(null!==(a=o.imp[0])&&void 0!==a&&a.hasOwnProperty("video")){var f=this.lookupPlacementSettings["".concat(c,"|video")];g=p[f.deployment]||0}var v={impExt:function(){var e;if(o.imp[0]){var t=null!==(e=o.imp[0].ext)&&void 0!==e?e:{};o.imp[0].ext=u(u({},t),{},{rp:{zone_id:Number(r._getProviderConfig("zone_id"))||"",target:{website_id:[bouncex.website.id]}}})}},impBannerExt:function(){var e;null!==(e=o.imp[0])&&void 0!==e&&e.banner&&(o.imp[0].banner.ext={rp:{size_id:g,mime:"text/html"}})},impVideoExt:function(){var e;null!==(e=o.imp[0])&&void 0!==e&&e.video&&(o.imp[0].video.ext={rp:{size_id:g}})},siteExt:function(){o.site&&(o.site.ext={rp:{site_id:Number(r.getSiteId())||r.getSiteId()}})},sitePubExt:function(){var e;if(null!==(e=o.site)&&void 0!==e&&e.publisher){var t=r._getProviderConfig("account_id")||r.accountId;o.site.publisher.ext={rp:{account_id:Number(t)||t}}}}};return Object.values(v).forEach((function(e){return e()})),o}};function m(e){o.SSP_CONSOLIDATED_Request.call(this,e)}(0,s.hasFeatureFlag)("MAGNITE_MULTISIZE")&&(v.createDisplayImpression=function(e,t){var i=this.__createDisplayImpression(e,t);return i.banner.format=[{w:i.banner.w,h:i.banner.h}],i}),m.__SSP_Class=f,m.prototype=Object.create(o.SSP_CONSOLIDATED_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(m.prototype,"constructor")}),Object.assign(m.prototype,v)},9648:(e,t,i)=>{var n=i(4836),a=i(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_OPENPATH_PARTNER_ID=void 0,t.SSP_OpenPath_Request=g,t.default=l;var r=n(i(8416)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=d(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,i&&i.set(e,n);return n}(i(8897)),s=n(i(1264));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(d=function(e){return e?i:t})(e)}function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){(0,r.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e){o.default.call(this,e)}!function(){l.prototype=Object.create(o.default.prototype,{constructor:Object.getOwnPropertyDescriptor(l.prototype,"constructor")});var e={__Request_Class:g,provider:"openpath"};Object.assign(l.prototype,e)}();t.SSP_OPENPATH_PARTNER_ID=1e3;var p={provider:"openpath",accountId:0,openRTBVersion:"2.6",getSiteId:function(){var e;return null!==(e=this._getProviderConfig("site_id"))&&void 0!==e?e:""},getOptions:function(e){return{method:"POST",type:"POST",url:"https://direct.adsrvr.org/bid/bidder/wunderkind",data:JSON.stringify(e),dataType:"json",contentType:"text/plain; charset=utf-8",global:!1,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(t,i){this.handleResponse(t,i,e),this.done()}}},getRequestData:function(e){var t="".concat(bouncex.cookie.vid,"_").concat(bouncex.cookie.sid),i=this.getBaseSite(),n=this.getSiteId(),a={id:t,site:i,device:this.getDevice(),imp:e,at:1,tmax:300,user:{eids:this.getExtraIds()},source:{pchain:this.pchainString(),schain:this.schainObject(t)}},r=this.getUserSyncData();return r&&(a.user.eids=a.user.eids||[],a.user.eids.push({source:"adserver.org",uids:[{id:r.TDID,atype:1,ext:{rtiPartner:"TDID"}}]})),a.site.publisher=u(u({},a.site.publisher),{},{id:bouncex.website.id.toString()}),n&&(a.site.id=n),this.appendCompliance(a),this.appendPmp(a),a},getUserSyncData:function(){var e=sessionStorage.getItem("bxopenpathsynced");return e?s.default.parseJSON(e):null},createDisplayImpression:function(e,t){var i=this.__createDisplayImpression(e,t);return i.banner.format=[{w:i.banner.w,h:i.banner.h}],i}};function g(e){o.SSP_CONSOLIDATED_Request.call(this,e)}g.__SSP_Class=l,g.prototype=Object.create(o.SSP_CONSOLIDATED_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(g.prototype,"constructor")}),Object.assign(g.prototype,p)},7392:(e,t,i)=>{var n=i(4836),a=i(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_PBM_Request=p,t.default=u;var r,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=c(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,i&&i.set(e,n);return n}(i(8897)),s=n(i(3723)),d=i(2481);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(c=function(e){return e?i:t})(e)}function u(e){o.default.call(this,e)}r={__Request_Class:p,provider:"pbm"},u.prototype=Object.create(o.default.prototype,{constructor:Object.getOwnPropertyDescriptor(u.prototype,"constructor")}),Object.assign(u.prototype,r);var l={provider:"pbm",openRTBVersion:"2.5",getOptions:function(e){var t=this;return{url:document.location.protocol+"//"+this._getProviderConfig("endpoint"),data:JSON.stringify(e),method:"POST",type:"POST",contentType:"text/plain; charset=utf-8",dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},timeout:5e3,context:this,complete:function(i,n){t.handleResponse(i,n,e),t.done()}}},getSiteId:function(){var e=bouncex.state.mobile?"mobile_id":"desktop_id",t=this._getProviderConfig(e),i=this._getProviderConfig("qa_site_id");return this.getCampaign().qbxtest&&i||t},getRequestData:function(e){var t,i,n,a,r=bouncex.cookie.vid+"_"+bouncex.cookie.sid,o=this._getProviderConfig("publisher_id"),d=s.default.GetData(),c="",u=this.getBaseSite();u.id=this.getSiteId(),u.publisher.id=o;var l={id:r,site:u,device:this.getDevice(),imp:e,source:{pchain:this.pchainString(),ext:{schain:this.schainObject(r)}},user:{eids:this.getExtraIds()},at:1,tmax:300};if(null!==(t=l.imp[0])&&void 0!==t&&t.id&&null!==(i=l.imp[0])&&void 0!==i&&i.banner){var p,g,f=l.imp,v="".concat(f[0].id,"|").concat(f[0].banner.w,"|").concat(f[0].banner.h);c=null!==(p=null===(g=this.lookupPlacementSettings[v])||void 0===g?void 0:g.deployment)&&void 0!==p?p:""}var m=this.constructKeyValProperty(d,bouncex.segments,c);return null!==(a=(n=l.site).ext)&&void 0!==a||(n.ext={}),l.site.ext.key_val=m,this.appendCompliance(l),this.appendPmp(l),l},constructKeyValProperty:function(e,t){var i,n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=null!==(i=null==e||null===(n=e.iab)||void 0===n||null===(n=n.v3)||void 0===n?void 0:n.map((function(e){return e.id})))&&void 0!==i?i:[],o=r.join(","),s=(t||[]).map((function(e){return"".concat(e)})).join(","),c=o.length>0?"iabV3=".concat(o):"",u=o.length>0?"negativeTargeted=".concat(o):"",l=s.length>0?"segments=".concat(s):"",p=a.length?"placement=".concat(a):"";(0,d.hasFeatureFlag)("PUBMATIC_MULTIFORMAT")&&(p="");var g=[c,u,l,p].filter((function(e){return e.length>0})).join("|");return g},getPlacementRequestData:function(e){var t={secure:bouncex.ssl?1:0,tagid:this.getSiteId()||""};return this.__getPlacementRequestData(e,t)},createDisplayImpression:function(e,t){var i=this.__createDisplayImpression(e,t);return i.banner.format=[{w:i.banner.w,h:i.banner.h}],i}};function p(e){o.SSP_CONSOLIDATED_Request.call(this,e)}p.__SSP_Class=u,p.prototype=Object.create(o.SSP_CONSOLIDATED_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(p.prototype,"constructor")}),Object.assign(p.prototype,l)},8897:(e,t,i)=>{var n=i(4836),a=i(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_CONSOLIDATED_Request=m,t.default=f;var r=n(i(8416)),o=i(2481),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=u(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,i&&i.set(e,n);return n}(i(3036)),d=i(6487),c=n(i(7686));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(u=function(e){return e?i:t})(e)}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){(0,r.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var g={__Request_Class:m,provider:null,__createAllBidRequests:function(e){var t=[];return this.__groupBidRequests().forEach((function(i){var n=Object.assign(i,e),a=this.__instantiateBidRequest(n);t.push(a)}),this),t},__groupBidRequests:function(){var e=this,t=new Map,i=function(i){(e.campaign_placement_ids[i]||[]).forEach((function(e){var n={campaignID:i,placementID:e};this.addRequestGroupPlacement(t,n)}),e)};for(var n in this.auction.campaigns)i(n);return t},addRequestGroupPlacement:function(e,t){var i=t.campaignID,n=t.placementID,a=this.getRequestGroup(e,t);if(void 0!==a){var r=(0,o.getOrSet)(a.campaigns,i,this.auction.campaigns[i]),s=r.gbi.placements[n];(0,o.getOrSet)(a.campaignSettings,i,{campaignID:i,deployment:r.deployment});Object.assign(t,this.__createPlacementBidRequest(i,s,n)),this.getImpressionGroup(a,t).placementSettings[n]=t;var d=this.getPlacementLookupKey(t);a.lookupPlacementSettings[d]=t}},getRequestGroup:function(e,t){var i=this.getRequestKey(t);return(0,o.getOrSet)(e,i,{requestKey:i,campaigns:{},campaignSettings:{},lookupPlacementSettings:{},impressionGroups:{},lookupImpressionGroups:{}})},getRequestKey:function(e){var t=e.campaignID;return[t,this.auction.campaigns[t].gbi.placements[e.placementID].mediaType].join("|")},getImpressionGroup:function(e,t){var i=this,n=e.impressionGroups,a=this.getImpressionID(e,t);return(0,o.getOrSet)(n,a,(function(){var e=t.campaignID,n=i.getImpressionKey(t);return{impid:a,impressionKey:n,campaignID:e,placementSettings:{}}}))},getImpressionID:function(e,t){var i=this.getImpressionKey(t),n=t.impid;if(n)return e.lookupImpressionGroups[i]=n,n;var a=(0,o.getOrSet)(e.lookupImpressionGroups,i,this.getUniqueImpressionID);return t.impid=a},getImpressionKey:function(e){var t=e.campaignID;e.placement;return[t,"video"===e.type?"video":"display"].join("|")},getPlacementLookupKey:function(e){var t="video"===e.type?["video"]:[e.width,e.height];return[e.impid].concat(t).join("|")},__createPlacementBidRequest:function(e,t,i){return{campaignID:e,placement:t,placementID:i,adUnitId:t.adUnitId,type:t.mediaType,width:t.width,height:t.height,deployment:t.deployment}}};function f(e){s.default.call(this,e)}f.prototype=Object.create(s.default.prototype,{constructor:Object.getOwnPropertyDescriptor(f.prototype,"constructor")}),Object.assign(f.prototype,g);var v={provider:null,intermediaryId:"869cff86d1c453c1",init:function(){var e=this.__getImpressionRequestData(),t=this.getRequestData(e),i=this.getOptions(t);return this.fetch(i)},getOptions:function(e){throw new Error("Must be implemented in subclass")},getSiteId:function(){throw new Error("Must be implemented in subclass")},getRequestData:function(e){throw new Error("Must be implemented in subclass")},__getImpressionRequestData:function(){return Object.values(this.impressionGroups).map(this.__mergeImpressionGroupData,this)},__mergeImpressionGroupData:function(e){return this.getImpressionGroupData(e).reduce(this.mergeImpressionGroupData.bind(this))},mergeImpressionGroupData:function(e,t){var i,n;return(null===(i=e.banner)||void 0===i||null===(i=i.format)||void 0===i?void 0:i.length)&&(null===(n=t.banner)||void 0===n||null===(n=n.format)||void 0===n?void 0:n.length)&&Array.prototype.push.apply(e.banner.format,t.banner.format),p(p({},t),e)},getImpressionGroupData:function(e){return Object.values(e.placementSettings).map(this.getPlacementRequestData,this)},getPlacementRequestData:function(e){return this.__getPlacementRequestData(e)},__getPlacementRequestData:function(e,t){return this["video"===e.type?"createVideoImpression":"createDisplayImpression"](e,t)},pchainString:function(){return"".concat(this.intermediaryId,":").concat(bouncex.website.id)},schainObject:function(e){return(0,d.getSchainObject)(e)},handleResponse:function(e,t){var i,n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=bouncex.ads._constants.bidEvents,o=r.error;if(200===e.status){var s=this.getBidsFromResponse(e);if(s.errMsg)o=r.error,i="getBidsFromResponse error: ".concat(s.errMsg);else if(s&&s.length){this.checkAndReplaceAuctionPriceMacro(s);try{return s.map((function(e){return n.handleResponseBid(e,a)}),this)}catch(e){o=r.error,i=e}}else o=r.empty}else if("abort"===t||"timeout"===t)o=r.none;else if(0===e.status)o=r.cancelled;else if(204===e.status)o=r.empty;else{var d=e.responseJSON||JSON.parse(e.responseText),u={"debug:code":"bid_error","debug:message":t,"debug:status_code":e.status,"debug:body_length":JSON.stringify(d).length,"debug:url":decodeURIComponent(bouncex.calling_url),"debug:ssp":this.provider};c.default.report("debug",u)}var l={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime};o===r.error&&(l.errMsg=i);var p=this.getNbrField(e);null!==p&&(l.nbr=p),this.reportResult(o,l,a)},getBidsFromResponse:function(e){try{return(e.responseJSON||JSON.parse(e.responseText)).seatbid.flatMap((function(e){return e.bid}))}catch(e){return{errMsg:e}}},getNbrField:function(e){try{return(e.responseJSON||JSON.parse(e.responseText)).nbr}catch(e){return null}},getImpressionGroup:function(e){var t=this.getImpressionID(e);return this.impressionGroups[t]},getImpressionID:function(e){var t=e.impid;if(t)return t;var i=this.getImpressionKey(e);return this.lookupImpressionGroups[i]},getMediaType:function(e){var t,i;return 1===(null===(t=e.ext)||void 0===t?void 0:t.bidtype)||Object.keys((null===(i=e.ext)||void 0===i?void 0:i.video)||{}).length>0||!e.w?"video":"display"},getImpressionKey:function(e){return[e.campaignID,this.getMediaType(e)].join("|")},getPlacementLookupKey:function(e){var t="video"===this.getMediaType(e)?["video"]:[e.w,e.h];return[e.impid].concat(t).join("|")},getBidPlacementSettings:function(e,t){var i=this.getPlacementLookupKey(e),n=this.lookupPlacementSettings[i],a=t&&Object.values(t.placementSettings)[0];return n||a},handleResponseBid:function(e,t){var i=bouncex.ads._constants.bidEvents.fill,n=this.getResponseBidData(e),a=this.auction.campaigns[n.campaignId],r=bouncex.ads._createBid(n);a.gbi.bids.push(r),a.log("placement #".concat(r.placementId," received a bid from ").concat(r.provider));var o={partner:this.provider,partner_site_id:this.getSiteId()||"NA",request_timestamp:this.startTime,campaign_id:n.campaignId,deployment:n.deployment||"unknown",requested_ad_units:n.requestedAdUnits,deal_id:n.dealId||"NA",deal_name:n.dealName||"NA",price:this._getReportablePrice(n.price)||"NA",auction_number:n.auctionNumber,ad_unit_id:n.adUnitId,creative_type:(0,d.getCreativeType)(r.vastData,n.requestedAdUnits)};return this.reportResult(i,o,t),r},getResponseBidData:function(e){var t=this.getImpressionGroup(e),i=this.getBidPlacementSettings(e,t),n=i.placementID,a=i.placement,r=i.campaignID,o=this.auction.campaigns[r],s="video"===i.type,d="".concat(i.width,"x").concat(i.height);return{provider:this.provider,campaignId:r,placementId:n,adUnitId:a.adUnitId,price:Number(e.price||0),adHtml:e.adm,vastData:e.adm,dealId:e.dealid,dealName:e.dealname,arrivalTime:this.endTime,requestedAdUnits:s?"video":d,deployment:o.deployment||"unknown",auctionNumber:o.gbi.auctionCount}},checkAndReplaceAuctionPriceMacro:function(e){var t=/\${AUCTION_PRICE}/g;return e.map((function(e){return e.adm&&t.test(e.adm)&&(e.adm=e.adm.replace(t,e.price)),e}))}};function m(e){s.SSP_Request.call(this,e)}m.__SSP_Class=f,m.prototype=Object.create(s.SSP_Request.prototype,{constructor:Object.getOwnPropertyDescriptor(m.prototype,"constructor")}),Object.assign(m.prototype,v)},3036:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.SSP_Request=_,t.default=b;var a=n(i(8416)),r=n(i(861)),o=i(2481),s=i(5295),d=n(i(5754)),c=n(i(3723)),u=n(i(1634)),l=n(i(8067)),p=n(i(1660)),g=n(i(3160)),f=i(3820),v=n(i(4003));function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){(0,a.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function b(e){this.__init(e||{})}!function(){b.PRELOAD_ENABLED=!0,b.PRELOAD_PROVIDERS=["aqbx"],b.PRERENDER_ENABLED=(0,o.hasFeatureFlag)("PRELOAD_BSW_ADS"),b.getUniqueImpressionID=function(){return String(++b.getUniqueImpressionID.counter)},b.getUniqueImpressionID.counter=0;var e={__Request_Class:_,provider:null,requests:null,startTime:null,endTime:null,durationTime:null,supportedOpenRTBVersion:null,campaign_ids:null,campaign_placement_ids:null,__init:function(e){Object.assign(this,e)},sendBidRequests:function(e){var t,i,n;return this.startTime=Date.now(),"pbm"===(null==e||null===(t=e[0])||void 0===t?void 0:t.provider)&&(0,o.hasFeatureFlag)("PUBMATIC_MULTIFORMAT")||"openpath"===(null==e||null===(i=e[0])||void 0===i?void 0:i.provider)&&(0,o.hasFeatureFlag)("OPENPATH_MULTIFORMAT")||"index"===(null==e||null===(n=e[0])||void 0===n?void 0:n.provider)&&(0,o.hasFeatureFlag)("INDEX_MULTIFORMAT")?this.sendMultiformatBidRequest(e):e.map((function(e){return e.send()}))},sendMultiformatBidRequest:function(e){var t={},i={},n={},a={};e.forEach((function(e){var o=e.requestKey.split("|")[0],s=e.__getImpressionRequestData();if(s&&s[0]){var d;if(a[o])(d=a[o]).push.apply(d,(0,r.default)(s));else a[o]=(0,r.default)(s);i=h(h({},i),e.impressionGroups),n=h(h({},n),e.lookupImpressionGroups),t=h(h({},t),e.lookupPlacementSettings)}})),e[0].lookupPlacementSettings=t,e[0].impressionGroups=i,e[0].lookupImpressionGroups=n;var o=[];Object.values(a).forEach((function(t){var i=t.filter((function(e){return!!e.video})),n=t.filter((function(e){return!!e.banner}));if(1===i.length&&1===n.length){var a=i[0],s=n[0],d="".concat(a.id,"|video"),c="".concat(s.id,"|video");e[0].lookupPlacementSettings[c]=e[0].lookupPlacementSettings[d],delete e[0].lookupPlacementSettings[d];var u=h(h({},s),{},{video:a.video});o.push(u)}else o.push.apply(o,(0,r.default)(t))}));var s=e[0].getRequestData(o),d=e[0].getOptions(s);return[e[0].fetch(d)]},createBidRequests:function(){var e={auction:this.auction,ssp:this,provider:this.provider};return this.requests=this.__createAllBidRequests(e)},__createAllBidRequests:function(e){var t=[];return this.campaign_ids.forEach((function(i){var n=this.__createCampaignBidRequests(e,i);n&&n.length&&Array.prototype.push.apply(t,n)}),this),t},__createCampaignBidRequests:function(e,t){var i={campaign:this.auction.campaigns[t],campaignId:t},n=this.campaign_placement_ids[t],a=this.__createPlacementBidRequest.bind(this,e,i);return n.map(a)},__createPlacementBidRequest:function(e,t,i){var n=t.campaign.gbi.placements[i],a=Object.assign({placement:n,placementId:i,adUnitId:n.adUnitId,type:n.mediaType,width:n.width,height:n.height,deployment:n.deployment},t,e);return this.__instantiateBidRequest(a)},__instantiateBidRequest:function(e){return _.factory(this,e)},getIncompleteRequests:function(){return this.requests.filter((function(e){return!e.isComplete()}))},checkIfDone:function(){return null!==this.endTime||null===this.requests||0===this.getIncompleteRequests().length&&(this.__done(),!0)},abortFutileRequests:function(){var e=this.getIncompleteRequests();if(0===e.length)return[];var t=!!this.auction.endTime;return e.filter((function(e){return!(!t&&e.isViable())&&(e.abort(),!0)}))},__done:function(){null===this.endTime&&(this.endTime=new Date,this.durationTime=this.endTime-this.startTime,this.auction.checkBidRequestsDone())},getUniqueImpressionID:b.getUniqueImpressionID};Object.assign(b.prototype,e),Object.defineProperties(b.prototype,{__Request_Prototype:{writable:!0},auction:{writable:!0}})}();var y={aborted:!1,startTime:null,endTime:null,duration:null,__init:function(){this.auction||(this.auction=bouncex),this.ssp||(this.ssp=Object.create(this.constructor.__SSP_Class.prototype)),this.__initCampaigns()},__initCampaigns:function(){this.campaigns?Object.values(this.campaigns).forEach(this.__initCampaign,this):(this.campaign||this.campaignId)&&(this.campaign?this.campaignId||(this.campaignId=this.campaign.id):this.campaign=this.auction.campaigns[this.campaignId]||{},(this.campaigns={})[this.campaignId]=this.campaign,this.__initCampaign(this.campaign))},__initCampaign:function(e){e.gbi||(e.gbi={}),e.gbi.requests||(e.gbi.requests=[]),e.gbi.requests.push(this)},send:function(){return this.init()},fetch:function(e){return this.startTime=Date.now(),this.request=bouncex.utils.doAjaxRequest(e),this.request},done:function(){this.endTime||(this.endTime=Date.now(),this.duration=this.endTime-this.startTime,this.ssp&&this.ssp.checkIfDone())},reportResult:function(e,t){var i,n,a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(t||(t={}),t.partner||(t.partner=this.provider),t.has_uid2)||(t.has_uid=p.default.isValid()?1:0,t.has_uid_identity_hub=u.default.hasIDfromIdentityHub()?1:0,t.has_uid_prebid=g.default.getUserIds(["uid2"]).length>0?1:0,t.has_iiq=(null===(n=bouncex)||void 0===n||null===(n=n.ads)||void 0===n||null===(n=n.iiq)||void 0===n||null===(n=n.ids)||void 0===n?void 0:n.length)>0?1:0);null!=r&&null!==(i=r.source)&&void 0!==i&&null!==(i=i.ext)&&void 0!==i&&null!==(i=i.schain)&&void 0!==i&&i.nodes&&(t.num_schain=(null===(a=r.source)||void 0===a||null===(a=a.ext)||void 0===a||null===(a=a.schain)||void 0===a||null===(a=a.nodes)||void 0===a?void 0:a.length)||0);var o=t.campaign_id||this.getCampaignId(),s=(0,f.shouldSampleBid)();s&&(d.default.debug({message:"Reporting Result (".concat(e,")"),group:"Ads Auction (".concat(t.partner,")"),campaignId:o,metadata:t}),bouncex.ads.report(o,e,t))},end:function(){this.request&&!this.endTime&&(this.aborted=!0,this.request.abort())},abort:function(){this.end()},getCampaignId:function(){return this.campaignId||Object.keys(this.campaigns||this.campaignSettings)[0]||null},getCampaign:function(e){var t=e||this.getCampaignId();return t&&(this.campaigns||this.auction.campaigns)[t]},getCampaigns:function(){return this.campaigns?Object.values(this.campaigns):this.campaignSettings?Object.keys(this.campaignSettings).map((function(e){return this.auction.campaigns[e]}),this):[this.auction.campaigns[this.campaignId]]},_getProviderConfig:function(e){return bouncex.ads._getProviderConfig(this.provider,e)},getUniqueImpressionID:b.getUniqueImpressionID,_getImpressionGPID:function(e){return e.deployment},_getFloorValue:function(){var e,t=null!==(e=this._getProviderConfig("floor"))&&void 0!==e?e:"";return t&&!isNaN(Number(t))?Number(t):null},createDisplayImpression:function(e,t){return this.__createDisplayImpression(e,t)},__createDisplayImpression:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign({id:e.impid||this.getUniqueImpressionID(),banner:{w:Number(e.width),h:Number(e.height)}},t||{});i.ext=h(h({},null==t?void 0:t.ext),{},{gpid:this._getImpressionGPID(e)});var n=this._getFloorValue();return n&&(i.bidfloor=n),i},createVideoImpression:function(e,t){return this.__createVideoImpression(e,t)},__createVideoImpression:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="overlay"===e.deployment,n={id:e.impid||this.getUniqueImpressionID(),video:{mimes:["video/mp4","application/javascript"],minduration:3,maxduration:250,protocols:[2,3,5,6],linearity:1,api:[1,2],startdelay:0,placement:i?5:4,plcmt:i?3:4,playbackmethod:[2],maxbitrate:16e3,minbitrate:40,skip:1}};e.width&&(n.video.w=Number(e.width)),e.height&&(n.video.h=Number(e.height));var a=this._getFloorValue();return a&&(n.bidfloor=a),(n=Object.assign(n,t||{})).ext=h(h({},null==t?void 0:t.ext),{},{gpid:this._getImpressionGPID(e)}),n},appendPmp:function(e){(bouncex.website.adsConfig||{}).pmpPrivateAuction&&(e.pmp={private_auction:1})},appendCompliance:function(e){var t,i,n;null!==(t=e.regs)&&void 0!==t||(e.regs={}),null!==(n=(i=e.regs).ext)&&void 0!==n||(i.ext={});var a,r,o,s,d=l.default.getInstance().getValues(),c=d.tcf,u=d.gdprApplies,p=d.tcString,g=d.usPrivacy;(e.regs.ext.gdpr=u?1:0,c)&&(null!==(a=e.user)&&void 0!==a||(e.user={}),null!==(o=(r=e.user).ext)&&void 0!==o||(r.ext={}),e.user.ext.consent=p,e.user.ext.consented_providers_settings={consented_providers:(null!==(s=c.consented_providers)&&void 0!==s?s:[]).map(Number)});g&&(e.regs.ext.us_privacy=g),this.appendComplianceOpenRTB(this.openRTBVersion,e)},appendComplianceOpenRTB:function(e,t){var i=l.default.getInstance().getValues(),n=i.gpp,a=i.gdprApplies,r=i.tcString;if("2.6"===e)n&&(t.regs.gpp=n.gppString,t.regs.gpp_sid=n.sectionId),r&&(t.regs.gdpr=a?1:0,t.user.consent=r)},getExtraIds:function(){var e,t=window.bouncex.ads.deviceOptedStatus,i=[];t&&i.push({source:"wunderkind.co",uids:[{id:t,atype:1}]});var n=p.default.getToken();if(n&&!p.default.isTokenExpired()&&i.push({source:"uidapi.com",uids:[{id:n,atype:1}]}),u.default.getIDsForBidRequests().forEach((function(e){i.push(e)})),(0,o.hasFeatureFlag)("GET_LOCAL_STORAGE_IDENTITY")&&"criteo"===this.provider){var a=v.default.getIDs();a&&i.push(a)}return i.push.apply(i,(0,r.default)(g.default.getUserIds(["uid2"]))),null!==(e=bouncex)&&void 0!==e&&null!==(e=e.ads)&&void 0!==e&&null!==(e=e.iiq)&&void 0!==e&&null!==(e=e.ids)&&void 0!==e&&e.length&&i.push.apply(i,(0,r.default)(bouncex.ads.iiq.ids)),i},getDevice:function(){return{ua:navigator.userAgent,ip:bouncex.state.vip,js:1,language:(0,s.getDeviceLanguage)().toUpperCase()}},getBaseSite:function(){var e,t={mobile:bouncex.state.mobile?1:0,page:decodeURIComponent(bouncex.calling_url),name:bouncex.website.name,domain:window.location.hostname,privacypolicy:1};bouncex.referrer&&(t.ref=decodeURIComponent(bouncex.referrer));var i,n=c.default.GetData();null!=n&&n.dataAvailable&&(n.keywords&&(t.keywords=n.keywords.map((function(e){return(null!=e?e:"").replace(/_/g," ")})).join(",")),null!==(i=n.iab)&&void 0!==i&&i.v1&&(t.pagecat=n.iab.v1.map((function(e){return e.id}))));return t.publisher={domain:t.domain,name:t.name},null!==(e=bouncex.website)&&void 0!==e&&null!==(e=e.adsConfig)&&void 0!==e&&e.iabV3Category&&(t.cat=bouncex.website.adsConfig.iabV3Category),t},_getReportablePrice:function(e){return e&&Number(e).toFixed(5)},isComplete:function(){return!(!this.endTime&&!this.aborted)},isViable:function(){if(this.isComplete())return!1;for(var e=this.getCampaigns(),t=0;t<e.length;t++){var i=e[t];if(!i.failed&&!i.winningBid)return!0}return!1}};function _(){var e=Array.prototype.slice.call(arguments);e.forEach((function(e){e&&Object.assign(this,e)}),this),this.__init()}_.__SSP_Class=b,_.factory=function(e,t){var i=e.provider,n=bouncex.ads._requestIndex[i](Object.assign({provider:i},t));return n instanceof _?n:new(e.__Request_Class||_)(n,t)},Object.assign(_.prototype,y),Object.defineProperties(_.prototype,{auction:{writable:!0},ssp:{writable:!0},campaign:{writable:!0},campaigns:{writable:!0},placement:{writable:!0}})},7504:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.displayAd=void 0;var n=i(5983),a=(i(4544),i(2481)),r=(t.displayAd=function(e,t,i){var n=e.getElementSlab(),a=e.deployment_type;"floater"===e.deployment&&r(n),i.append(t),"floater"===e.deployment&&o(n,a)},function(e){e.style.transition="margin-top .5s ease";var t=Math.ceil(.2*(new a.WindowProps).height);e.style.marginTop="-".concat(t,"px")}),o=function(e,t){var i=setInterval((function(){return s(e,t)}),10);setTimeout((function(){var t;clearInterval(i);var a=(0,n.calculateSmartHeaderMarginTopOffset)(null===(t=window.bouncex.website)||void 0===t||null===(t=t.adsConfig)||void 0===t?void 0:t.smartHeaderAnchor);e.style.marginTop=a}),400)},s=function(e,t){t.getIsPinned()&&(e.style.transition="",e.style.marginTop="0")}},2501:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={bidIsPerformanceAd:function(e){return!(!e||!e.dealName||-1===e.dealName.indexOf("PerformanceAds"))||(!(!e||!e.dealId||0!==e.dealId.indexOf("PA"))||!(null==e||!e.adHtml)&&-1!==e.adHtml.indexOf("wkndSegment.audienceID"))}}},7975:(e,t,i)=>{var n,a,r=i(4836),o=r(i(134)),s=r(i(8660)),d=r(i(1697)),c=i(7874),u=r(i(1871)),l=r(i(2233));null!==(a=(n=window.bouncex).products)&&void 0!==a||(n.products={}),window.bouncex.products.ads={init_public_functions:function(){bouncex.recirc=o.default,bouncex.seg=u.default,bouncex.ads=bouncex.gbi2=s.default,bouncex.pubs=l.default,bouncex.video=d.default,bouncex.gbi={shrinkToFitWindow:c.shrinkToFitWindow,shrinkToFitParent:c.shrinkToFitParent,wrapContentInIframe:c.wrapContentInIframe,log:function(e,t,i){bouncex.ads.log(e,t,i)},doAjaxRequest:function(e,t){bouncex.campaigns[e].gbi.ajaxRequest=bouncex.utils.doAjaxRequest(t)}}},preCampaignFunctions:function(){bouncex.ads.init(),bouncex.seg.init(),bouncex.pubs.init()}}},1836:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=n(i(4687)),o=n(i(7156)),s=n(i(5754)),d="ads_source_partner",c="amazon",u={init:(a=(0,o.default)(r.default.mark((function e(){var t,i,n,a,o,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=bouncex)&&void 0!==t&&null!==(t=t.state)&&void 0!==t&&t.newvid){e.next=2;break}return e.abrupt("return");case 2:if(!(Math.random()>.05)){e.next=4;break}return e.abrupt("return");case 4:if(window.apstag){e.next=7;break}return bouncex.push([d,{name:"none"}]),e.abrupt("return");case 7:if(0!==(i=u.getAmazonSiteIds()).length){e.next=11;break}return bouncex.push([d,{name:c,id:""}]),e.abrupt("return");case 11:return e.prev=11,e.next=14,Promise.allSettled(u.buildRequests(i));case 14:return n=e.sent,a=n.map((function(e){return"fulfilled"===e.status?e.value.text():Promise.resolve("")})),e.next=18,Promise.allSettled(a);case 18:o=e.sent,l=u.getEventPaylodFromFetchedConfigs(o,i),bouncex.push([d,l]),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(11),s.default.error({group:"amazon-tag",message:"Error fetching amazon config",metadata:{error:e.t0}}),bouncex.push([d,{name:c,id:"-1"}]);case 27:case"end":return e.stop()}}),e,null,[[11,23]])}))),function(){return a.apply(this,arguments)}),getEventPaylodFromFetchedConfigs:function(e,t){var i={};e.forEach((function(e,n){if("fulfilled"===e.status&&""!==e.value){var a=t[n];i[a]=e.value}}));var n=!1,a=Object.keys(i).find((function(e){try{var t=JSON.parse(i[e]);return Object.keys(t).find((function(e){if("3pmetadata"===e&&JSON.parse(t[e]).find((function(e){return"wunderkind"===e.vendorId.toLowerCase()})))return!0;return"3pvendor"===e&&(t[e].indexOf("tag.wknd.ai")>-1||t[e].indexOf("tag.bounceexchange.com")>-1)}))}catch(e){return n=!0,s.default.error({group:"amazon-tag",message:"Error parsing amazon config",metadata:{error:e}}),!1}})),r={name:c,id:""};return r.id=a||(n?"-1":"0"),r},getAmazonSiteIds:function(){var e=[];return Object.keys(localStorage).forEach((function(t){if(t.includes("aps:")){var i=t.split(":");3===i.length&&e.push(i[1])}})),Array.from(new Set(e))},buildRequests:function(e){var t=window.location.origin,i="https://c.amazon-adsystem.com/cdn/prod/config?u=".concat(encodeURIComponent(t));return e.map((function(e){return e.indexOf("-")>0?fetch("".concat(i,"&src=600&&pubid=").concat(e)):fetch("".concat(i,"&src=").concat(e))}))}};t.default=u},3723:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(8416)),r=n(i(8698)),o=n(i(9974)),s=n(i(5754)),d=i(1847);function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var u={BaseURL:"https://contextual-analytics.wunderkind.co/api/contextual",Cache:{},determineURL:function(){var e=decodeURIComponent(bouncex.calling_url),t=(0,d.getCanonicalURL)();return null!=t?t:e},supportsContextual:function(){if("object"!==(0,r.default)(bouncex.website.sspConfig))return!1;"index"in bouncex.website.sspConfig||bouncex.website.sspConfig;return!1},GetData:function(){u.determineURL();return null},Fetch:function(){var e=u.determineURL();u.GetData()||o.default.get({url:u.BaseURL,data:{url:e,website_id:bouncex.website.id},error:function(t){var i,n=null==t?void 0:t.responseText;if(n)try{i=JSON.parse(n)}catch(e){}i&&void 0!==i.dataAvailable?(u.Cache[e]=i,s.default.info({group:"Ads",message:"No contextual data was available for this URL"})):s.default.warn({group:"Ads",message:"There was an error retrieving the contextual data for this page"})},success:function(t){var i,n=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){(0,a.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({dataAvailable:t.dataAvailable},t.verityData);null!==(i=n.threats)&&void 0!==i||(n.threats=[]),n.keywords&&(n.keywords=n.keywords.map((function(e){return e.replace(/\s+/g,"_")}))),u.Cache[e]=n,s.default.debug({group:"Ads",message:"Retrieved contextual data for this page",metadata:{originalContext:t,transformedContext:n}})}})}};t.default=u},8066:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(8416)),r=(i(2481),i(1847)),o=n(i(4460));function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var d={shouldTrackImpression:function(){return Math.random()<.5},createQueryString:function(e,t){return(0,r.qs)(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){(0,a.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({anId:931508,advId:e.trigger,campId:e.placement,pubId:e.websiteId,chanId:e.ssp,placementId:e.adUnitId},t))},display:{scriptSrc:"https://pixel.adsafeprotected.com/jload?",getScriptTag:function(e){if(!d.shouldTrackImpression())return bouncex.ads.log(null,"SAMPLE: IAS script blocked"),"";var t=d.createQueryString(e,{ias_adpath:e.adsPath});return"".concat(d.display.scriptSrc).concat(t)}},video:{wrapVastURL:function(e,t){if(!t.startsWith("http"))return bouncex.ads.log(null,"VAST XML: IAS script blocked"),t;if(!d.shouldTrackImpression())return bouncex.ads.log(null,"SAMPLE: IAS script blocked"),t;e.trigger=o.default.wkndTriggerPlaceholder;var i=d.createQueryString(e,{originalVast:t});return"https://vast.adsafeprotected.com/vast?".concat(i)}}};t.default=d},1634:(e,t,i)=>{var n=i(4836),a=i(8698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(8698)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var i=d(t);if(i&&i.has(e))return i.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,i&&i.set(e,n);return n}(i(2481)),s=n(i(5754));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(d=function(e){return e?i:t})(e)}var c={supportsIdentityHub:function(){var e,t;if((0,o.hasFeatureFlag)("OPTOUT_IDENTITY_HUB"))return!1;if([4925,4923,5212,5213,5442,4924,4894,5204,4926,5205,5460,5206,5163,5210,5214,5211,5208,5209,5162,5207].includes(bouncex.website.id))return!1;if("object"!==(0,r.default)(bouncex.website.sspConfig))return!1;var i="pbm"in bouncex.website.sspConfig||"index"in bouncex.website.sspConfig,n="US"===(null===(e=bouncex.state)||void 0===e?void 0:e.geo.country_code)||"CA"===(null===(t=bouncex.state)||void 0===t?void 0:t.geo.country_code);return i&&n},injectIntoPage:function(){var e,t;c.supportsIdentityHub()&&((0,o.hasFeatureFlag)("ID_HUB_NO_LIVEINTENT")?(e="<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><script type=\"text/javascript\"> (function() { var purl = window.location.href; var url = '//ads.pubmatic.com/AdServer/js/pwt/156512/7601'; var profileVersionId = ''; if(purl.indexOf('pwtv=')>0){ var regexp = /pwtv=(.*?)(&|$)/g; var matches = regexp.exec(purl); if(matches.length >= 2 && matches[1].length > 0){ profileVersionId = '/'+matches[1]; } } var wtads = document.createElement('script'); wtads.async = true; wtads.type = 'text/javascript'; wtads.src = url+profileVersionId+'/pwt.js'; var node = document.getElementsByTagName('script')[0]; node.parentNode.insertBefore(wtads, node); })(); <\/script></head><body></body> </html>",t="Added IdentityHub No Liveintent Iframe"):(e='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><script type="text/javascript" async src="//ads.pubmatic.com/AdServer/js/pwt/156512/6397/pwt.js"><\/script></head><body></body></html>',t="Added IdentityHub Iframe"),bouncex.ads.identityHubFrame=o.default.createElement("iframe",{srcdoc:e,id:"bcx_identityhub_frame",title:"empty",style:"display:none"},document.body),s.default.debug({group:"Ads",message:t}))},getIDsForBidRequests:function(){var e,t;return null!==(e=null===(t=bouncex)||void 0===t||null===(t=t.ads)||void 0===t||null===(t=t.identityHubFrame)||void 0===t||null===(t=t.contentWindow)||void 0===t||null===(t=t.ihowpbjs)||void 0===t?void 0:t.getUserIdsAsEids())&&void 0!==e?e:[]},hasIDfromIdentityHub:function(){var e,t;return(null!==(e=null===(t=bouncex)||void 0===t||null===(t=t.ads)||void 0===t||null===(t=t.identityHubFrame)||void 0===t||null===(t=t.contentWindow)||void 0===t||null===(t=t.ihowpbjs)||void 0===t?void 0:t.getUserIdsAsEids())&&void 0!==e?e:[]).filter((function(e){var t;return null===(t=e.source)||void 0===t?void 0:t.includes("uidapi.com")})).length>0}};t.default=c},3455:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(2481),r=n(i(5754)),o={canRun:function(){return!!((0,a.hasFeatureFlag)("INTENT_IQ_INTEGRATION")&&o.getPartnerId()&&window.IntentIqObject)},getPartnerId:function(){var e,t;return null!==(e=bouncex)&&void 0!==e&&null!==(e=e.state)&&void 0!==e&&e.gdpr?"string"==typeof(null===(t=bouncex)||void 0===t||null===(t=t.state)||void 0===t||null===(t=t.geo)||void 0===t?void 0:t.country)&&["GB","IE","ES","FR"].indexOf(bouncex.state.geo.country.toUpperCase())>-1?279175777:null:725014980},init:function(){if(o.canRun()){bouncex.ads.iiq={};var e={partner:o.getPartnerId(),ABTestingConfigurationSource:"IIQServer",domainName:window.location.hostname,manualWinReportEnabled:!0,callback:o.callback,vrBrowserBlackList:["chrome"]};try{bouncex.ads.iiq.instance=new window.IntentIqObject(e)}catch(e){r.default.warn({group:"Ads",message:"Error initializing IntentIQ",metadata:{error:e}})}}},callback:function(e){var t,i;null!=e&&null!==(t=e.eids)&&void 0!==t&&t.length&&null!==(i=bouncex)&&void 0!==i&&null!==(i=i.ads)&&void 0!==i&&i.iiq&&(bouncex.ads.iiq.ids=e.eids)},reportImpression:function(e){var t;if(o.canRun()&&null!==(t=bouncex)&&void 0!==t&&null!==(t=t.ads)&&void 0!==t&&null!==(t=t.iiq)&&void 0!==t&&t.instance){var i={biddingPlatformId:4,bidderCode:e.provider,cpm:e.price,currency:"USD",status:"rendered",placementId:e.placementId};try{bouncex.ads.iiq.instance.reportExternalWin(i)}catch(e){r.default.warn({group:"Ads",message:"Error reporting winning bid to IntentIQ",metadata:{error:e}})}}}};t.default=o},4003:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(5385),r=n(i(5754));function o(){try{var e,t=JSON.parse(localStorage.getItem("zephr")),i=(null==t||null===(e=t.dataLayer)||void 0===e?void 0:e.email)||null;return i?{id:(0,a.toSha256)(i),atype:3,ext:{stype:"hemsha256"}}:null}catch(e){return null}}function s(){try{var e=JSON.parse(localStorage.getItem("aqfer"));if(!e)return null;var t=null==e?void 0:e.email;if(!t)return null;switch(e.type){case"em":return{id:(0,a.toSha256)(t),atype:3,ext:{stype:"hemsha256"}};case"aud1":case"aud2":return{id:t,atype:3,ext:{stype:"hemsha256"}};default:return null}}catch(e){return null}}var d={getIDs:function(){try{var e=[o(),s()].filter((function(e){return null!==e}));if(0===e.length)return null;var t=e.reduce((function(e,t){return e[t.ext.stype]||(e[t.ext.stype]=t),e}),{});return{source:bouncex.website.domain,uids:Object.values(t)}}catch(e){return r.default.warn({group:"SSP",message:"Failed to parse IDS from localStorage",metadata:{error:e}}),null}}};t.default=d},3160:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={getUserIds:function(e){var t;if(null===(t=window)||void 0===t||null===(t=t.pbjs)||void 0===t||!t.getUserIds||!e.length)return[];var i=[],n=[];try{n=window.pbjs.getUserIds()}catch(e){return[]}return e.forEach((function(e){var t;if("uid2"===e&&null!==(t=n)&&void 0!==t&&null!==(t=t.uid2)&&void 0!==t&&t.id){var a={source:"uidapi.com",uids:[{id:n.uid2.id,atype:1}]};i.push(a)}})),i}};t.default=i},4460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={wkndTriggerPlaceholder:"wunderkind-trigger-placeholder"}},9224:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(8559)),r=n(i(2451)),o=n(i(4546)),s={getAd:function(e,t){var i=t.getElementsByTagName("MediaFile"),n=s.addMetaData(e,t),a=bouncex.campaigns[e].video.vast;o.default.checkMediaExists(e,t,i),r.default.init(e,n,t,a)},getNodeTextOrFalse:function(e,t){return a.default.parseNodeText(e.getElementsByTagName(t)[0])||!1},addMetaData:function(e,t){var i=a.default.getXmlNode(e,t,"Ad",2),n={};return null!==i&&(n.adId=i.getAttribute("id")||null,n.type=i.nodeName||null,n.system=s.getNodeTextOrFalse(i,"AdSystem"),n.title=s.getNodeTextOrFalse(i,"AdTitle"),n.description=s.getNodeTextOrFalse(i,"Description"),n.system=s.getNodeTextOrFalse(i,"AdSystem"),n.title=s.getNodeTextOrFalse(i,"AdTitle"),n.description=s.getNodeTextOrFalse(i,"Description"),n.advertiser=s.getNodeTextOrFalse(i,"Advertiser"),n.pricing=s.getNodeTextOrFalse(i,"Pricing"),n.category=s.getNodeTextOrFalse(i,"Category"),0===bouncex.campaigns[e].video.vast.wrapperLevel&&(bouncex.campaigns[e].video.vast.metaData=n),i)}};t.default=s},2451:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(8559)),r=n(i(2783)),o=n(i(1618)),s=n(i(4601)),d=n(i(6468)),c={init:function(e,t,i,n){var o,s,d,u,l,p,g,f;o=a.default.getXmlNode(e,t,"Impression",1),s=a.default.getXmlNode(e,t,"Tracking",1),d=a.default.getXmlNode(e,i,"Wrapper",0),u=null!==a.default.getXmlNode(e,t,"InLine",0)&&a.default.getXmlNode(e,t,"InLine",0),l=a.default.getXmlNode(e,u,"Linear",0)||a.default.getXmlNode(e,u,"Video",0),g=a.default.getXmlNode(e,t,"Error",1),l||u||(f=a.default.getXmlNode(e,u,"NonLinear",0),p=a.default.getXmlNode(e,t,"Companion",0)),p&&bouncex.video.log(e,"SKIP -> [parseVastElements]: companion ads not currently supported","warning"),f&&bouncex.video.log(e,"SKIP -> [parseVastElements]: nonlinear ads not currently supported","warning"),g&&r.default.recordErrorPixels(e,n,g),o&&r.default.recordImpressionPixels(n,o),s&&r.default.recordEventPixels(n,s),d&&(c.handleWrapper(e,d),bouncex.campaigns[e].video.vast.handlingWrapper=!1,bouncex.campaigns[e].video.vast.wrapperLevel+=1),l&&c.handleVideo(e,n,l)},handleVideo:function(e,t,i){r.default.recordVideoClickTrackingPixels(e,t,i),c.handleDuration(e,t,i),c.handleMediaFiles(e,t,i)},handleDuration:function(e,t,i){var n,r,o=a.default.getXmlNode(e,i,"Duration",0);null!==o&&a.default.nodeExists(o)&&"string"!=typeof o&&(n=(o=(o=a.default.getNodeValue(o)).split(".")[0]).split(":"),r=parseInt(60*n[0]*60)+parseInt(60*n[1])+parseInt(n[2]),t.duration=r,bouncex.video.log(e,"media duration -> "+t.duration+"s","vast"))},handleMediaFiles:function(e,t,i){var n,r=a.default.getXmlNode(e,i,"MediaFile",1),d=null,c=!1;if(r&&0!==r.length){for(var u=0;u<r.length;u++){if(t.width=r[u].getAttribute("width"),t.height=r[u].getAttribute("height"),t.aspectRatio=t.height/t.width*100,t.apiFramework=r[u].getAttribute("apiFramework")||!1,t.type=r[u].getAttribute("type"),t.aspectRatio=o.default.calculateAspectRatioData(t.width,t.height),t.isVPAID=!(!t.apiFramework||"vpaid"!==t.apiFramework.toLowerCase()||"application/javascript"!==t.type),t.offsetAspectRatio=bouncex.campaigns[e].video.player.offsetHeight/bouncex.campaigns[e].video.player.offsetWidth*100,n=null!==a.default.getNodeValue(r[u])?a.default.getNodeValue(r[u]):this.handleUrlSources(e,r[u]),t.type.toLowerCase().indexOf("mp4")>-1){t.src=n,c=!0;break}if(t.type.toLowerCase().indexOf("application/javascript")>-1)return s.default.handleVPAID(e,t,i,n);d={path:n,type:t.type}}!1!==c||t.vpaidUrl||null===d||(t.src=d.path,t.type=d.type,t.vpaidUrl=!1)}else bouncex.video.log(e,"0 media files found","error")},handleUrlSources:function(e,t){var i,n=a.default.getXmlNode(e,t,"URL",1);if(n)for(var r=0;r<n.length;r++)i=a.default.getNodeValue(n[r]);return i},handleWrapper:function(e,t){var i,n;r.default.processWrapperEventPixels(e,t),(n=null!==(i=a.default.getXmlNode(e,t,"VASTAdTagURL",0)||a.default.getXmlNode(e,t,"VASTAdTagURI",0)).textContent?i.textContent.trim():i.firstChild.nodeValue&&""!==i.firstChild.nodeValue.trim()?i.firstChild.nodeValue.trim():!(!i.firstChild.constructor||!i.firstChild.constructor.name||"Text"!=i.firstChild.constructor.name)&&i.firstChild.wholeText.trim())?(bouncex.campaigns[e].video.vast.handlingWrapper=!0,d.default.extractVastData(e,n)):bouncex.video.fail(e,"failed to extract a VAST URL node from the XML Wrapper element")}};t.default=c},1618:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(5754)),r={isVastOrTag:function(e){return-1!==e.indexOf("<?xml")&&(e=e.replace(/^<\?xml[^>]*>/i,"")),/^[\s]*<VAST/i.test(e)?"vastxml":"tag"},toCamelCase:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},calculateAspectRatioData:function(e,t){var i={},n=parseInt(e)/parseInt(t);switch(n){case 4/3:i.paddingTop="75%";break;case 1.5:i.paddingTop="66.6666666667%";break;case 16/9:i.paddingTop="56.25%";break;case 1:i.paddingTop=!1;break;case 1.6:i.paddingTop="62.5%"}return i.ratio=n,i},groupCollapsed:function(e,t,i){a.default.groupCollapsed({campaignId:e,message:t,group:"Vast Parser",logType:i?"error":"info"})},groupEnd:function(e,t,i){a.default.groupEnd({campaignId:e,message:t,group:"Vast Parser",logType:i?"error":"info"})}};t.default=r},3411:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(4546)),r={call:function(e,t,i,n,o,s){bouncex.video.log(e,"making HTTP request ".concat(t),"vast"),a.default.checkHttpRequest(e,t,o);var d=r.createXMLRequest();d.onreadystatechange=function(){if(4==d.readyState)if(200===d.status)o&&o(e,d);else if(s){if(0!==d.status)return bouncex.video.fail(e,"XML request to parse vast data failed"),!1}else r.call(e,t,i,n,o,!0)},d.open(i,a.default.checkUrl(t).href,!0),s&&(d.withCredentials=!0);try{n?d.send(n):d.send()}catch(a){var c=!0===s?" on second try":".";bouncex.video.fail(e,"VAST [httpCall]: XHR request failed"+c+a.message),s||r.call(e,t,i,n,o,!0,"vast")}},success:function(e){return e>=200&&e<300},createXMLRequest:function(){var e;return window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e}};t.default=r},9940:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(1618)),r=n(i(6468)),o={beginParse:function(e,t,i){r.default.buildVastEnv(e,t,i)},endParse:function(e){a.default.groupEnd(e,"vast parser exit",!1)}};t.default=o},6468:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(1618)),r=n(i(4546)),o=n(i(3411)),s=n(i(2114)),d={buildVastEnv:function(e,t,i){a.default.groupCollapsed(e,"init vast parser",!1),bouncex.campaigns[e].video.vast={handlingWrapper:!1,wrapperLevel:0,tracking:{},completeCallback:i};var n=a.default.isVastOrTag(t);d.kickoffVastParse(e,n,t)},kickoffVastParse:function(e,t,i){switch(t){case"tag":return d.extractVastData(e,i);case"vastxml":return s.default.vastResponse(e,i)}},extractVastData:function(e,t){bouncex.video.log(e,"extract vast url: "+t,"vast");var i=r.default.checkVastUrl(t);o.default.call(e,i,"GET",null,s.default.vastResponse)}};t.default=d},4601:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(4223)),r=n(i(8559)),o=n(i(7234)),s=i(2481),d={vastMedia:function(e,t){if(bouncex.video.canPlayMedia(e)){var i=t.src&&"string"!=typeof t.src?JSON.stringify(t.src):t.src?t.src:"";bouncex.video.log(e,"found compatible media file ("+i+")","vast"),bouncex.campaigns[e].video.status.vastDataLoaded=!0,bouncex.video.configPlayer(e)}},vpaidMedia:function(e,t){bouncex.campaigns[e].video.status.vastDataLoaded=!0;var i=Object.defineProperty;Object.defineProperty=a.default.tryCatch(i),(0,s.createElement)("script",{type:"text/javascript",src:t.vpaidUrl,onload:function(){Object.defineProperty=i,o.default.generateVPAIDManager(e)}},window.top.document.body)},handleVPAID:function(e,t,i,n){var a=r.default.getXmlNode(e,i,"AdParameters",0);t.vpaidWidth=jQuery("#bx-creative-"+e+" .bx-video-wrapper").css("width").replace(/[^0-9.]/g,""),t.vpaidHeight=jQuery("#bx-creative-"+e+" .bx-video-wrapper").css("height").replace(/[^0-9.]/g,""),t.vpaidUrl="https:"===window.location.protocol&&0===n.indexOf("http:")?"https:"+n.substring(5):n,t.isVPAID=!0,bouncex.campaigns[e].video.isVPAID=!0,a&&(a=r.default.getNodeValue(a),t.vpaidAdParams=a)}};t.default=d},8559:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(8698)),r={getXmlNode:function(e,t,i,n){var r,o,s,d;return null==t||t.length<1?(bouncex.video.log(e,"Failed to extract node -> "+i+". XML is null. Searched node: "+i,"warning"),null):null===(r="object"===(0,a.default)(t)&&t.getElementsByTagName(i))||r.length<1?("Companion"!==i&&"NonLinear"!==i&&bouncex.video.log(e,"Failed to find node -> "+i,"vast"),null):0===n?(bouncex.video.log(e,"Extracted first occurrence of node -> "+i,"vast"),r[0]):1===n?(o=r.length>1?"Extracted "+r.length+" occurrences of node -> "+i:"Extracted "+r.length+" occurrence of node -> "+i,bouncex.video.log(e,o,"vast"),r):(s=r.length-1,d=Math.round(Math.random()*s),bouncex.video.log(e,"Extracted random element["+d+"] out of "+r.length+" "+i+" nodes","vast"),r[d])},parseNodeText:function(e){return e&&(e.textContent||e.text)},nodeExists:function(e){return null!==e&&null!==e.firstChild},getNodeValue:function(e){var t=!(!e||!e.firstChild),i=!!t&&e.firstChild;if("MediaFile"===e.nodeName&&e&&e.childNodes&&e.childNodes.length>1&&"#text"===i.nodeName)for(var n=0;n<e.childNodes.length;n++)"URL"===e.childNodes[n].nodeName&&(i=e.childNodes[n],t=!0);if(t){if(i.nodeValue&&""!==i.nodeValue.trim())return i.nodeValue;if(i.nextSibling&&i.nextSibling.data&&""!==i.nextSibling.data.trim())return i.nextSibling.data;if(i.wholeText&&""!==i.wholeText&&""!==i.wholeText.trim())return i.wholeText.trim()}return null}};t.default=r},2114:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(4546)),r=n(i(4601)),o=n(i(9224)),s=n(i(1618)),d={vastResponse:function(e,t){var i,n,d=bouncex.campaigns[e];if(d.video.vast.wrapperLevel>0&&!d.video.vast.handlingWrapper){var c=d.video.vast.wrapperLevel;s.default.groupCollapsed(e,"re-init vast parser, wrapper found - on loop: "+c,!1)}else bouncex.video.log(e,"init vast parser","vast");i=a.default.checkXml(t,e),n=d.video.vast,o.default.getAd(e,i,t),!d.failed&&n.vpaidUrl?(bouncex.video.log(e," -> Found VPAID","vast"),r.default.vpaidMedia(e,n),n.completeCallback&&n.completeCallback(n)):d.failed||(bouncex.video.log(e,"vast parse complete","vast"),d.video.vast.handlingWrapper||r.default.vastMedia(e,n)),d.video.vast.handlingWrapper||s.default.groupEnd(e,"exit vast parser",!1)}};t.default=d},2783:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(8559)),r=n(i(2451)),o={recordEventPixels:function(e,t){for(var i,n=0;n<t.length;n++){var r=t[n];a.default.nodeExists(r)&&(r=a.default.getNodeValue(r),i=t[n].getAttribute("event"),e.tracking[i]=e.tracking[i]||[],-1===e.tracking[i].indexOf(r)&&e.tracking[i].push(r))}},recordVideoClickTrackingPixels:function(e,t,i){var n,r,o,s=a.default.getXmlNode(e,i,"VideoClicks",0);null!==s&&(null!==(o=a.default.getXmlNode(e,s,"ClickThrough",0))&&null!==o.firstChild&&(t.clickThrough=a.default.getNodeValue(o)),r=(n=a.default.getXmlNode(e,s,"ClickTracking",0))?a.default.getNodeValue(n):null,t.tracking.clickTracking=t.tracking.clickTracking||[],r&&-1===t.tracking.clickTracking.indexOf(r)&&t.tracking.clickTracking.push(r))},recordErrorPixels:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];a.default.nodeExists(n)&&(n=a.default.getNodeValue(n),e.tracking.error=e.tracking.error||[],null!==n&&-1===e.tracking.error.indexOf(n)&&e.tracking.error.push(n))}},recordImpressionPixels:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];a.default.nodeExists(n)&&(n=a.default.getNodeValue(n),e.tracking.impression=e.tracking.impression||[],null!==n&&-1===e.tracking.impression.indexOf(n)&&e.tracking.impression.push(n))}},processWrapperEventPixels:function(e,t){bouncex.video.log(e,"WRAPPER: init extraction","vast");var i=bouncex.campaigns[e].video.vast,n=a.default.getXmlNode(e,t,"Impression",1),s=a.default.getXmlNode(e,t,"Tracking",1),d=a.default.getXmlNode(e,t,"Linear",0),c=a.default.getXmlNode(e,t,"Error",1);n&&(bouncex.video.log(e,"WRAPPER: handling impressions","vast"),o.recordImpressionPixels(i,n)),c&&(bouncex.video.log(e,"WRAPPER: handling error pixels","vast"),o.recordErrorPixels(e,i,c)),s&&(bouncex.video.log(e,"WRAPPER: handling tracking events","vast"),o.recordEventPixels(i,s)),d&&(bouncex.video.log(e,"WRAPPER: handling inline ad click tracking","vast"),r.default.handleVideo(e,i,d))}};t.default=o},4546:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(7352),r=n(i(8559)),o=n(i(1434)),s={checkMediaExists:function(e,t,i){if(null===i||i.length<1){var n=r.default.getXmlNode(e,t,"Wrapper",0),a=r.default.getXmlNode(e,t,"status",0);a&&"NO_AD"===a.innerHTML&&bouncex.video.fail(e,"vastResponse with no ad - status: "+a.innerHTML+", campaign failed."),null===n&&bouncex.video.fail(e,"vastResponse without video, campaign failed")}},checkVastUrl:function(e){var t=s.checkUrl(e),i=t.href||null;return"https:"===window.location.protocol&&"https"!==t.protocol&&(i="https:"+i.substring(5)),i},checkHttpRequest:function(e,t,i){"function"!=typeof i&&bouncex.video.fail(e,"VAST [validateHttpCall]: callback is not a function",!0),"string"!=typeof t&&bouncex.video.fail(e,"VAST [validateHttpCall]: not a valid url",!0)},checkUrl:function(e){var t=document.documentMode,i=document.createElement("a");return t&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",hostname:i.hostname,path:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}},checkXml:function(e,t){var i;if("string"==typeof e){i=s.parseStringToXMLWithMacroReplacement(e,t)}else{if(null===e&&null===e.responseXML&&null===e.responseText){var n=e?{url:encodeURIComponent(e.responseURL)}:{};return bouncex.video.log(t,"vast url returned null response | "+n,"error"),!1}var a=e.responseXML||e.responseText||e.response;if("string"==typeof a)try{i=s.parseStringToXMLWithMacroReplacement(a,t)}catch(e){return bouncex.video.log(t,"vastResponse returned null from url "+n,"error"),!1}else i=a}return i},parseStringToXMLWithMacroReplacement:function(e,t){var i=bouncex.campaigns[t],n=(0,a.ReplaceMacros)(e,i);return o.default.convertStringToXML(n)}};t.default=s},1434:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n(i(1618));var a={convertStringToXML:function(e){if(void 0===window.DOMParser){var t=new ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t}var i,n=new DOMParser;try{(i=n.parseFromString(e,"application/xml"))&&""!==i&&!a.parsingError(i)||bouncex.log("error parsing XML string")}catch(e){bouncex.log("error parsing XML string")}return i},parsingError:function(e){try{var t=(new DOMParser).parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return e.getElementsByTagNameNS(t,"parsererror").length>0}catch(e){bouncex.log("xml parsing error: ",e)}},parseXmlText:function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():e.trim()}};t.default=a},1697:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(8646)),r=n(i(9940)),o=n(i(7234)),s=i(9476),d=n(i(5754)),c=n(i(8066)),u=n(i(1618)),l=n(i(8658));function p(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var f={constants:{completionThresholdInSeconds:2},init:function(e,t,i,n){var a,o,s,d,p,g=bouncex.campaigns[e];g.video=g.video||{};var f=t;"vastxml"===u.default.isVastOrTag(f)&&(f=Math.random()<.5?"https://".concat(l.default.getDomain("dfp.bouncex.net"),"/pub/vast-stream/").concat(bouncex.lz.compressToEncodedURIComponent(t)):"https://".concat(l.default.getDomain("dfp.bouncex.net"),"/pub/vast/").concat(bouncex.lz.compressToEncodedURIComponent(t)));f=c.default.video.wrapVastURL({trigger:g.trigger,placement:null!==(a=null==n?void 0:n.deployment)&&void 0!==a?a:"",ssp:null!==(o=null===(s=g.winningBid)||void 0===s?void 0:s.provider)&&void 0!==o?o:"",websiteId:bouncex.website.id,adUnitId:null!==(d=null===(p=g.winningBid)||void 0===p?void 0:p.adUnitId)&&void 0!==d?d:""},f),bouncex.video.buildEnv(e,i,n);try{r.default.beginParse(e,f)}catch(t){bouncex.video.fail(e,t)}},buildEnv:function(e,t,i){var n=bouncex.campaigns[e].video;n.player=document.getElementById("bx-video-player-"+e),n.player&&jQuery(n.player).closest(".bx-group").addClass("bx-group-placeholder"),n.uniqueEventPixels=[],n.vast={},n.vpaid={},n.integrations={},n.config={},n.config.provider=t,n.creative={},n.creative.requestWidth=i.width,n.creative.requestHeight=i.height,n.status={ready:!1,passedCompletionThreshold:!1,qOne:!1,midpoint:!1,qThree:!1,vastDataLoaded:!1,stopped:!1}},canPlayMedia:function(e){var t=document.createElement("VIDEO"),i=bouncex.campaigns[e].video.vast.type;if("maybe"===t.canPlayType(i)||"probably"===t.canPlayType(i))return bouncex.video.log(e,"media file supported","player"),!0;var n=bouncex.campaigns[e].video.vast.wrapperLevel||!1;return r.default.endParse(e),n&&!i?bouncex.video.log(e,"no media found on wrapper level "+n,"warning"):bouncex.video.log(e,"video player does not support "+i,"error"),!1},bxPlayerPop:function(e,t){var i=bouncex.video.getPlayerSnapshot(e,bouncex.campaigns[e].video.player);bouncex.report(e,"pop",{"pop:activation":t,video_type:i.isVPAID?"VPAID":"VAST",media_type:i.type,media_size:i.dimensions.videoWidth+"x"+i.dimensions.videoHeight})},onPlay:function(e){var t=bouncex.campaigns[e],i=t.video.player,n=t.video.config.provider,a=bouncex.campaigns[e].video.config.src.indexOf("/demo/ads_demo_video.mp4")>-1;bouncex.video.getPlayerSnapshot(e,i);bouncex.off(jQuery(i),"onplay"),t.video.videoResponseLoaded=!0,"aqbx"===n&&a&&bouncex.video.aqbxStyleFix(e,i);try{i.play()}catch(t){bouncex.video.log(e,"error: "+t,"error")}bouncex.video.toggleMute(e,!0),bouncex.video.fireTrackingEvents(e,"start")},play:function(e){var t=bouncex.campaigns[e],i=bouncex.video.getPlayerSnapshot(e,t.video.player);i.isVPAID&&i.ready&&t.video.videoResponseLoaded?t.video.vpaid.ad.startAd():!i.playing&&i.ready&&t.video.videoResponseLoaded&&t.video.player.play()},playVideo:function(e,t,i){var n=bouncex.campaigns[e];if(a.default.currentTab.isVisible()){if(n.isGBI2&&!n.getClientVisibility())return n.onClientVisible(bouncex.video.playVideo.bind(this,e,t,i));n.listeners.onTabVisibilityChange((function(){bouncex.video.playPauseVisibility(e)})),n.listeners.onScroll((function(){bouncex.video.playPauseVisibility(e)}));var r=n.video&&n.video.player||n.gbi&&n.gbi.player;r&&(r.muted=r.playsInline=!0,r.autoplay="0"!==r.getAttribute("data-wknd-autoplay")),t?bouncex.isBxPlayerCampaign(e)?bouncex.video.playVideoBeforeImpression(i,e):d.default.deprecated({group:"gbi",message:"gbi.playVideoBeforeImpression would have been called",campaignId:e}):n&&n.gbi&&n.gbi.player?n.gbi.player.play():bouncex.isBxPlayerCampaign(e)&&bouncex.video.play(e)}else n.listeners.onTabVisible(bouncex.video.playVideo.bind(this,e,t,i))},isPlayableVideoCampaign:function(e,t){var i=bouncex.campaigns[e],n=i.gbi&&i.gbi.isVideo;if(t||!1){if(!i.video&&n&&i.gbi.playBeforeImpression&&!i.gbi.videoResponseLoaded)return!0;if(bouncex.isBxPlayerCampaign(e)&&bouncex.video.ready(e))return i.video.status.isPlayable=!0,!0}else{if(!bouncex.isBxPlayerCampaign(e)&&n&&i.gbi.config.playOnImpression&&i.gbi.player&&"playing"!==i.gbi.player.getState())return!0;if(bouncex.isBxPlayerCampaign(e)&&n&&!i.ad_shown)return i.video.status.isPlayable=!0,!0}return!1},playVideoBeforeImpression:function(e,t){var i=bouncex.campaigns[t],n=i.video.player;bouncex.video.getPlayerSnapshot(t,i.video.player).isVPAID?o.default.playVPAIDBeforeImpression(e,t):(bouncex.on(jQuery(n),"onplay",bouncex.video.onPlay(t)),bouncex.on(jQuery(n),"onerror",(function(e){jQuery(n).off("onerror"),n.pause(),bouncex.campaigns[t].video.status.stopped=!0,bouncex.video.fail(t,e.message?e.message:"error loading video response")})),i.video.videoResponseLoaded&&(bouncex.show_ad(e,t),bouncex.video.fireTrackingEvents(t,"impression")))},configPlayer:function(e){var t=bouncex.campaigns[e],i=t.video.config||{},n=t.video.vast,a=bouncex.video.getPlayerSnapshot(e,t.video.player);if(a.isVPAID||(i.src=n.src||"//"+bouncex.website.biu+"/assets/global/videos/pub/demo/ads_demo_video.mp4",i.clickThroughUrl=n.clickThrough||!1),i.aspectRatio=n.aspectRatio,i.offsetAspectRatio=n.offsetAspectRatio,a.isVPAID?(i.width=n.vpaidWidth,i.height=n.vpaidHeight):(i.width=n.width,i.height=n.height),bouncex.video.stylePlayer(e),a.isVPAID)bouncex.video.addVpaidEventTrackingListeners(e);else{var r=document.getElementById("bx-video-player-"+e);jQuery(r).attr("src",bouncex.campaigns[e].video.config.src),bouncex.video.setClickThroughUrl(e,i.clickThroughUrl),bouncex.video.addVideoEventTrackingListeners(e)}bouncex.ads.watchVideoLoad(e),t.video.config=i},setClickThroughUrl:function(e,t){var i=bouncex.campaigns[e].video.player;""!==t&&!1!==t&&jQuery(i).attr("href",t)},clickThroughHelper:function(e,t){window.open(t,"_blank").focus()},toggleMute:function(e,t){var i=bouncex.campaigns[e].video.player;i.muted=!!t||!i.muted,i.muted||0!==i.volume||(i.volume=.75),this.updatePlayerButtons(i)},playPausePlayer:function(e){try{var t=bouncex.campaigns[e].video,i=t.player;i.paused||i.ended?(i.play(),t.manuallyPaused=!1):(i.pause(),t.manuallyPaused=!0),this.updatePlayerButtons(i)}catch(t){null!=t&&t.message&&d.default.error({group:"Ads",message:"playPauseVisibility error: ".concat(t.message.toString()),campaignId:e})}},playPauseVisibility:function(e){try{var t=bouncex.campaigns[e].video,i=t.player;if(t.status.passedCompletionThreshold)return void(i.paused||bouncex.video.log(e,"player left alone due to not meeting the completion threshold","player"));a.default.currentTab.isVisible()?a.default.viewport.elementInViewport(i)?t.manuallyPaused||!i.paused&&!i.ended||i.play():(i.paused||bouncex.video.log(e,"player paused because video out of viewport","player"),i.pause()):(i.paused||bouncex.video.log(e,"player paused on tab hide","player"),i.pause())}catch(t){null!=t&&t.message&&d.default.error({group:"Ads",message:"playPauseVisibility error: ".concat(t.message.toString()),campaignId:e})}},updateProgressPlayer:function(e){var t=document.getElementById("bx-video-progress-wrapper-"+e);if(null!==t){var i=bouncex.video.getPlayerSnapshot(e,bouncex.campaigns[e].video.player),n=!1!==i.time.inSeconds?i.time.inSeconds:0,a=Math.floor(i.time.durationRounded),r=bouncex.video.getFormattedTime(n),o=bouncex.video.getFormattedTime(a);jQuery(".bx-video-progress-time-left",t).text(r),jQuery(".bx-video-progress-time-total",t).text(o)}},toMinutes:function(e){return(e/60).toFixed(2).replace(".",":")},toSeconds:function(e){return e<10&&(e=("0"+e).slice(-2)),e="0:"+e},getFormattedTime:function(e){return e<60?bouncex.video.toSeconds(e):bouncex.video.toMinutes(e)},canPlay:function(e){if(!bouncex.campaigns[e].video.isVPAID){var t=bouncex.campaigns[e].video.status;t.ready=!0,t.canPlayEvent=!0,bouncex.video.playerReady(e),jQuery(bouncex.campaigns[e].video.player).unbind("canplay.bx-"+e)}},ready:function(e){var t=bouncex.campaigns[e];return t.video.status&&t.video.status.ready&&!t.video.videoResponseLoaded},playerReady:function(e){var t=bouncex.campaigns[e];t.video.status.ready?(t.video.isVPAID||bouncex.video.updateProgressPlayer(e),bouncex.ads._activateCampaign(e),t.trigger&&!t.ad_visible&&bouncex.show_ad(t.trigger,e)):bouncex.video.log(e,"player not ready","player")},getPlayerSnapshot:function(e,t){var i=bouncex.campaigns[e].video.vast,n=t.duration||i.duration,a=Math.floor(.25*n),r=Math.floor(2*a),o=Math.floor(3*a),s=bouncex.campaigns[e].video.status,d=bouncex.campaigns[e].video.vast,c=bouncex.campaigns[e].video.creative;return{ended:t.ended,playing:!t.paused,paused:t.paused,type:t.currentType||i.type,src:t.currentSrc||d.vpaidUrl,clickThroughUrl:i.clickThrough,muted:t.muted,volume:t.volume,ready:s.ready||!1,playbackRate:t.playbackRate,seeking:t.seeking,isVPAID:bouncex.campaigns[e].video.vast.isVPAID,vastDataLoaded:s.vastDataLoaded,dimensions:{offsetWidth:t.offsetWidth,offsetHeight:t.offsetHeight,videoWidth:t.videoWidth||i.vpaidWidth,videoHeight:t.videoHeight||i.vpaidHeight,requestWidth:c.requestWidth,requestHeight:c.requestHeight},time:{duration:n,durationRounded:Math.floor(n),currentUnformatted:t.currentTime||!1,inSeconds:parseInt(t.currentTime%60)||!1,firstQuartile:{value:a,passed:s.qOne||!1},midpoint:{value:r,passed:s.midpoint||!1},thirdQuartile:{value:o,passed:s.qThree||!1}}}},stylePlayer:function(e){var t=bouncex.campaigns[e].video.creative;t.dynamicHeight=bouncex.campaigns[e].obj1.find(".bx-creative-"+e+" .bx-row-video").width(),t.dynamicWidth=bouncex.campaigns[e].obj1.find(".bx-creative-"+e+" .bx-row-video").height(),jQuery(".bxc.bx-campaign-"+e).addClass("bx-width-full-content"),jQuery("body").on("focus","#bx-video-btns-"+e+" .bx-video-btn",(function(){jQuery("#bx-video-wrapper-"+e).addClass("bx-video-wrapper-has-focus")})).on("blur","#bx-video-btns-"+e+" .bx-video-btn",(function(){jQuery(".bx-video-wrapper-"+e).removeClass("bx-video-wrapper-has-focus")})),bouncex.campaigns[e].video.vast.isVPAID||bouncex.video.adjustAspectRatio(e)},adjustAspectRatio:function(e){var t=bouncex.campaigns[e].video,i=t.vast.aspectRatio.paddingTop,n=t.vast.aspectRatio.ratio,a=t.creative.dynamicWidth/t.creative.dynamicHeight,r=t.config.src.indexOf("/demo/ads_demo_video.mp4")>-1&&"aqbx"===bouncex.campaigns[e].video.config.provider,o="300"===t.config.height&&"400"===t.config.width&&"75%"===i;!i||n===a||r||o||(jQuery("#bx-video-wrapper-"+e).addClass("bx-video-aspectRatio-fix-"+e),jQuery(".bx-video-aspectRatio-fix-"+e).css("padding-top",i))},aqbxStyleFix:function(e,t){var i=jQuery(t)[0].videoHeight,n=jQuery(t)[0].videoWidth,a=(Number(jQuery(".bx-creative-"+e+" .bx-row-video").css("width").split("px")[0])/(n/i)).toString()+"px";jQuery(".bx-creative-"+e+" .bx-video-wrapper").css("height",a)},detectVideoProgress:function(e,t,i,n){var a=bouncex.campaigns[e].video.status,r=bouncex.video.getPlayerSnapshot(e,bouncex.campaigns[e].video.player),o=r.time.inSeconds;t!==o||r.time.firstQuartile.passed?i!==o||r.time.midpoint.passed?n!==o||r.time.thirdQuartile.passed?bouncex.video.constants.completionThresholdInSeconds<=o&&!a.passedCompletionThreshold&&(a.passedCompletionThreshold=!0,bouncex.video.log(e,"player made it to completion threshold","player")):(bouncex.video.fireTrackingEvents(e,"thirdQuartile"),a.qThree=!0):(bouncex.video.fireTrackingEvents(e,"midpoint"),a.midpoint=!0):(bouncex.video.fireTrackingEvents(e,"firstQuartile"),a.qOne=!0)},addVideoEventTrackingListeners:function(e){var t=document.getElementById("bx-video-player-"+e),i=" volumechange.bx-"+e+" canplay.bx-"+e+" durationchange.bx-"+e+" ended.bx-"+e+" pause.bx-"+e+" play.bx-"+e+" playing.bx-"+e+" timeupdate.bx-"+e+" loadeddata.bx-"+e+" error.bx-"+e+" canplaythrough.bx-"+e+" onplay.bx-"+e+" loadedmetadata.bx-"+e,n=" touchend.bx-"+e+" click.bx-"+e,a=bouncex.campaigns[e];bouncex.campaigns[e].video.player=t,(0,s.bxBind)(t,i,(function(i){bouncex.video.handleVideoEvents(e,t,i)})),(0,s.bxBind)(t,n,(function(i){a.video.isInClickState||(a.video.isInClickState=!0,bouncex.video.handleVideoEvents(e,t,i),setTimeout((function(){a.video.isInClickState=!1}),350))})),this.handleVideoClose(e)},addVpaidEventTrackingListeners:function(e){var t=document.getElementById("bx-video-player-"+e),i=" volumechange.bx-"+e+" ended.bx-"+e+" pause.bx-"+e+" play.bx-"+e;(0,s.bxBind)(t,i,(function(e){bouncex.video.updatePlayerButtons(t)}))},handleVideoEvents:function(e,t,i){var n=i.type,a=bouncex.campaigns[e].video.status,r=bouncex.video.getPlayerSnapshot(e,t);if("canplaythrough"!==n||a.canPlayEvent)if("loadedmetadata"===n&&bouncex.browser.ios)t.setAttribute("playsinline",""),bouncex.video.canPlay(e);else if("canplay"===n)bouncex.video.canPlay(e);else if("volumechange"===n)this.handleVolumechangeEvent(e,r,t);else if("timeupdate"!==n||r.isVPAID)if("ended"===n)this.handleEndEvent(e,r);else if("error"===n){var o=i.data&&i.data.message?i.data.message:"an error has occurred, campaign failed";bouncex.video.fail(e,o)}else"click"!==n&&"touchend"!==n||this.handleClickEvent(e,r);else this.handleTimeUpdateEvent(e,r);else bouncex.video.canPlay(e);["play","pause","ended","volumechange"].indexOf(n)>=0&&this.updatePlayerButtons(t)},handleVideoClose:function(e){var t=document.getElementById("bx-video-player-"+e),i=document.getElementById("bx-creative-"+e).getElementsByClassName("bx-close-link");bouncex.campaigns[e].video.player=t,jQuery(i).on("click.bx-"+e,(function(){bouncex.video.getPlayerSnapshot(e,t);!1===bouncex.campaigns[e].video.vast.isVPAID&&(bouncex.campaigns[e].video.status.stopped=!0,t.pause()),t.ended=!0}))},handleVolumechangeEvent:function(e,t,i){i.muted&&bouncex.video.fireTrackingEvents(e,"mute")},handleTimeUpdateEvent:function(e,t){bouncex.video.updateProgressPlayer(e),bouncex.video.detectVideoProgress(e,t.time.firstQuartile.value,t.time.midpoint.value,t.time.thirdQuartile.value)},handleClickEvent:function(e,t){if(t.clickThroughUrl)try{bouncex.video.clickThroughHelper(e,t.clickThroughUrl)}catch(e){}bouncex.video.report(e,"click"),bouncex.video.fireTrackingEvents(e,"click"),bouncex.video.fireTrackingEvents(e,"clickTracking")},handleEndEvent:function(e,t){bouncex.video.fireTrackingEvents(e,"complete"),bouncex.off(bouncex.window," volumechange.bx-"+e+" canplay.bx-"+e+" durationchange.bx-"+e+" ended.bx-"+e+" pause.bx-"+e+" play.bx-"+e+" playing.bx-"+e+" timeupdate.bx-"+e+" loadeddata.bx-"+e+" error.bx-"+e+" click.bx-"+e+" canplaythrough.bx-"+e+"touchend.bx-"+e+"onplay.bx-"+e)},updatePlayerButtons:function(e){var t={ended:e.ended,paused:!e.ended&&e.paused,playing:!e.ended&&!e.paused,muted:e.muted,unmuted:!e.muted},i=jQuery(e).closest(".bx-video-wrapper");Object.keys(t).forEach((function(e){i.toggleClass("bx-video-player-"+e,!!t[e])}))},getEventUrls:function(e,t){var i;return!(!(i=bouncex.campaigns[e].video.vast.vpaidUrl?bouncex.campaigns[e].video.vpaid.vastConfig.tracking[t]:bouncex.campaigns[e].video.vast.tracking[t])||0===i.length)&&("string"==typeof i&&(i=[i]),i)},fireTrackingEvents:function(e,t){var i=!1,n=bouncex.campaigns[e].video.uniqueEventPixels||[],a=this.getEventUrls(e,t);if("boolean"!=typeof a){var r,o=p(a);try{for(o.s();!(r=o.n()).done;){var s=r.value;null==s||s.length<1||-1===s.indexOf("http")||(n.includes(s)?i=!0:(n.push(s),bouncex.video.log(e,i?"already fired event pixel for "+t:"firing event pixel "+s+" for "+t,"eventpixel"),document.createElement("img").src=s))}}catch(e){o.e(e)}finally{o.f()}}},_integrations:{},report:function(e,t,i){bouncex.video.log(e,'reporting event "'+t+'"',"player");var n=bouncex.video.getPlayerSnapshot(e,bouncex.campaigns[e].video.player);(i=i||{}).source="ads",i.agent="js",i.video_type=n.isVPAID?"VPAID":"VAST",i.media_type=n.type,i.media_size=n.dimensions.videoWidth+"x"+n.dimensions.videoHeight,i.video_length=n.time.duration,"video_pause"===t&&(i.pause_location=n.time.currentUnformatted),bouncex.buildReport(e,t,i)},log:function(e,t,i){var n,a="info";switch(i){case"vast":n="#09AF59";break;case"vpaid":n="#226666";break;case"player":default:n="#8E29D4";break;case"error":n="#FF0000",a="error";break;case"warning":n="#F67917",a="warn";break;case"eventpixel":n="#956843"}d.default[a]({color:n,campaignId:e,group:"vast"===i?"VAST":"Video [".concat(i,"]"),message:t})},fail:function(e,t){bouncex.campaigns[e].failed=!0,bouncex.video.log(e,t,"error")}};t.default=f},2113:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(8646)),r=n(i(2349)),o=n(i(2358)),s={onAdLoaded:function(){o.default.adLoaded(this.campaignId,this),r.default.fireTrackingRequests(this.campaignId,"AdLoaded",this.vastConfig.tracking.loaded),this.ad.unsubscribe(this.callbacks.AdLoaded,"AdLoaded")},onAdStarted:function(){var e=this.ad.getAdVolume();r.default.fireTrackingRequests(this.campaignId,"AdStarted",this.vastConfig.tracking.creativeView),this.adUnit.lastVolume=e,o.default.adStarted(this.campaignId)},onAdUserClose:function(){r.default.fireTrackingRequests(this.campaignId,"AdUserClose",this.vastConfig.tracking.close)},onAdUserMinimize:function(){r.default.fireTrackingRequests(this.campaignId,"AdUserMinimize",this.vastConfig.tracking.collapse)},onAdUserAcceptInvitation:function(){r.default.fireTrackingRequests(this.campaignId,"AdUserAcceptInvitation",this.vastConfig.tracking.acceptInvitation)},onAdSkippableStateChange:function(){this.ad.getAdSkippableState()},onAdStopped:function(){bouncex.campaigns[this.campaignId].video.status.stopped=!0},onAdPaused:function(){var e=bouncex.campaigns[this.campaignId].video;e.manuallyPaused=e.manuallyPaused||a.default.currentTab.isVisible(),r.default.fireTrackingRequests(this.campaignId,"AdPaused",this.vastConfig.tracking.pause)},onAdPlaying:function(){bouncex.campaigns[this.campaignId].video.manuallyPaused=!1,r.default.fireTrackingRequests(this.campaignId,"AdPlaying",this.vastConfig.tracking.resume)},onAdVolumeChange:function(){var e=this.ad.getAdVolume(),t=this.adUnit.lastVolume;0===e&&t>0?r.default.fireTrackingRequests(this.campaignId,"AdVolumeChange",this.vastConfig.tracking.mute,"volumechange"):e>0&&0===t&&r.default.fireTrackingRequests(this.campaignId,"AdVolumeChange",this.vastConfig.tracking.unmute,"volumechange"),this.adUnit.lastVolume=e},onAdImpression:function(){r.default.fireTrackingRequests(this.campaignId,"AdImpression",this.vastConfig.tracking.impression)},onAdVideoStart:function(){bouncex.video.toggleMute(this.campaignId,!0),this.adUnit.started=!0,r.default.fireTrackingRequests(this.campaignId,"AdVideoStart",this.vastConfig.tracking.start)},onAdSkipped:function(){r.default.fireTrackingRequests(this.campaignId,"AdSkipped",this.vastConfig.tracking.skip),bouncex.close_ad(this.campaignId)},onAdVideoFirstQuartile:function(){var e=this.campaignId;r.default.fireTrackingRequests(this.campaignId,"AdVideoFirstQuartile",this.vastConfig.tracking.firstQuartile),bouncex.campaigns[e].video.status.qOne=!0},onAdVideoMidpoint:function(){var e=this.campaignId;r.default.fireTrackingRequests(this.campaignId,"AdVideoMidpoint",this.vastConfig.tracking.midpoint),bouncex.campaigns[e].video.status.midpoint=!0},onAdVideoThirdQuartile:function(){var e=this.campaignId;r.default.fireTrackingRequests(this.campaignId,"AdVideoThirdQuartile",this.vastConfig.tracking.thirdQuartile),bouncex.campaigns[e].video.status.qThree=!0},onAdClickThru:function(e,t,i){var n=this.campaignId;bouncex.campaigns[n].video.vast.clickThrough=e,void 0!==i&&1==i&&e&&window.open(e),r.default.fireTrackingRequests(this.campaignId,"AdClickThru",this.vastConfig.tracking.clickTracking)},onAdDurationChange:function(){r.default.fireTrackingRequests(this.campaignId,"AdDurationChange",this.vastConfig.tracking.durationchange)},onAdSizeChange:function(){(document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.fullscreenElement)&&r.default.fireTrackingRequests(this.campaignId,"AdSizeChange",this.vastConfig.tracking.fullscreen)},onAdVideoComplete:function(){r.default.fireTrackingRequests(this.campaignId,"AdVideoComplete",this.vastConfig.tracking.complete)},onAdError:function(e){r.default.fireTrackingRequests(this.campaignId,"AdError",this.vastConfig.tracking.error)}};t.default=s},2846:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.adjustCreative=function(e){},t.validateAd=function(e){for(var t=0,i=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];t<i.length;t++){var n=i[t];if("function"!=typeof e[n])return!1;e[n]=a.default.tryCatch(e[n])}return!0},t.versionCheck=function(e){var t=bouncex.campaigns[e].video.vpaid.ad.handshakeVersion("2.0");if(t&&"2.0"!==t)return bouncex.video.log(e,"generateVPAIDManager -> Ad VPAID version ("+t+") is not supported","error"),!1;return!0};var a=n(i(4223))},7234:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(2846),r=n(i(2777)),o={generateVPAIDManager:function(e){bouncex.video.configPlayer(e),bouncex.campaigns[e].video.vpaid=bouncex.campaigns[e].vpaid||{};try{bouncex.video.log(e,"getVPAIDAd() called","vpaid"),bouncex.campaigns[e].video.vpaid.ad=window.getVPAIDAd(),(0,a.versionCheck)(e)}catch(t){bouncex.campaigns[e].video.vpaid.ad=document.getVPAIDAd()}r.default.initializeVPAID(e)},playVPAIDBeforeImpression:function(e,t){var i=bouncex.campaigns[t].video;i.videoResponseLoaded=!0,i.triggerType=e,i.vpaid.ad.startAd()}};t.default=o},2777:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(2846),r=n(i(2113)),o={buildEnvironment:function(e,t,i,n){bouncex.video.log(e,"building VPAID environment","vpaid");var a=t,o=n;return a.campaignId=e,a.ad=bouncex.campaigns[e].video.vpaid.ad,a.vastConfig=bouncex.campaigns[e].video.vast,a.config={},o&&((o=o.appendChild(document.createElement("div"))).className="bx-vpaid-slot bx-row-html",o.setAttribute("style","min-width: 100%; min-height: 100%;")),a.callbacks={AdClickThru:r.default.onAdClickThru,AdDurationChange:r.default.onAdDurationChange,AdError:r.default.onAdError,AdImpression:r.default.onAdImpression,AdLoaded:r.default.onAdLoaded,AdPaused:r.default.onAdPaused,AdPlaying:r.default.onAdPlaying,AdSizeChange:r.default.onAdSizeChange,AdSkippableStateChange:r.default.onAdSkippableStateChange,AdSkipped:r.default.onAdSkipped,AdStarted:r.default.onAdStarted,AdStopped:r.default.onAdStopped,AdUserAcceptInvitation:r.default.onAdUserAcceptInvitation,AdUserClose:r.default.onAdUserClose,AdUserMinimize:r.default.onAdUserMinimize,AdVideoComplete:r.default.onAdVideoComplete,AdVideoFirstQuartile:r.default.onAdVideoFirstQuartile,AdVideoMidpoint:r.default.onAdVideoMidpoint,AdVideoStart:r.default.onAdVideoStart,AdVideoThirdQuartile:r.default.onAdVideoThirdQuartile,AdVolumeChange:r.default.onAdVolumeChange},a.adUnit={lastVolume:""},a.config.creativeData={},a.config.environmentVars={},a.config.viewMode="normal",a.config.desiredBitrate=-1,a.config.environmentVars.slot=o,a.config.environmentVars.videoSlot=i,a.config.environmentVars.autoPlay=!1,a.config.environmentVars.videoSlotCanAutoPlay=!0,a},initializeVPAID:function(e){bouncex.video.log(e,"init VPAID","vpaid");var t=bouncex.document[0].getElementById("bx-video-player-"+e),i=bouncex.document[0].getElementById("bx-video-wrapper-"+e),n=o.buildEnvironment(e,bouncex.campaigns[e].video.vpaid,t,i),r=n.ad,s=document.getElementById("bx-video-progress-wrapper-"+e);for(var d in s&&s.parentNode.removeChild(s),n.callbacks)r.unsubscribe(n.callbacks[d],d),r.subscribe(n.callbacks[d],d,n);n.vastConfig.vpaidAdParams&&(n.config.creativeData={AdParameters:n.vastConfig.vpaidAdParams}),(0,a.validateAd)(r)||bouncex.video.log(e,"_validateVPAID Error: VPAID interface check failed","error"),(0,a.adjustCreative)(e),r.initAd(n.vastConfig.vpaidWidth,n.vastConfig.vpaidHeight,n.config.viewMode,n.config.desiredBitrate,n.config.creativeData,n.config.environmentVars)}};t.default=o},2349:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(4460));function r(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,d=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){d=!0,r=e},f:function(){try{s||null==i.return||i.return()}finally{if(d)throw r}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var s={fireTrackingRequests:function(e,t,i){var n,o=bouncex.campaigns[e],d=o.trigger,c=o.video.uniqueEventPixels||[],u=o.video.vpaid.ad,l=s.normalizeURLs(i);if(null!==l&&!bouncex.video.disableTrackingEvents){if(l=s.filterURLs(l),d&&null!=o&&null!==(n=o.video)&&void 0!==n&&null!==(n=n.vpaid)&&void 0!==n&&null!==(n=n.vastConfig)&&void 0!==n&&n.vpaidAdParams){var p,g=new RegExp("".concat(a.default.wkndTriggerPlaceholder),"g"),f=o.video.vpaid.vastConfig.vpaidAdParams.replace(g,d);o.video.vpaid.vastConfig.vpaidAdParams=f,null!=o&&null!==(p=o.video)&&void 0!==p&&null!==(p=p.vpaid)&&void 0!==p&&null!==(p=p.config)&&void 0!==p&&null!==(p=p.creativeData)&&void 0!==p&&p.AdParameters&&(o.video.vpaid.config.creativeData.AdParameters=f)}l=l.map((function(e){return e.replace(a.default.wkndTriggerPlaceholder,d)}));var v,m=r(l);try{for(m.s();!(v=m.n()).done;){var h=v.value;if(!c.includes(h)){c.push(h);var b=h;"true"!==u.allowCacheBusting&&!0!==u.allowCacheBusting||(h.indexOf("?")>-1?b+="&rnd="+Math.random():b+="?rnd="+Math.random()),bouncex.video.log(e,"firing event pixel "+b+" for "+t,"eventpixel"),document.createElement("img").src=b}}}catch(e){m.e(e)}finally{m.f()}}},normalizeURLs:function(e){return e&&0!==e.length?"string"==typeof e?[e]:e:null},filterURLs:function(e){return e.filter((function(e){return!(null===e||e.length<1||-1===e.indexOf("http"))}))}};t.default=s},2358:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={adLoaded:function(e,t){bouncex.campaigns[e].video.status.ready=!0,bouncex.video.playerReady(e)},adStarted:function(e){if(bouncex.campaigns[e].video.videoResponseLoaded){var t=bouncex.campaigns[e].video.triggerType;bouncex.show_ad(t,e)}}};t.default=i},3513:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(9046),r=i(7874),o=n(i(1164)),s=n(i(5754)),d={_affiliateLinkClicked:!1,_affiliateLinksFoundBySelector:{},_pageChangeListenerAdded:!1,_articleData:null,registerAffiliateOnsite:function(e){var t;d._affiliateLinkClicked=!1,d._affiliateLinksFoundBySelector={},d._articleData=null,null!=e&&null!==(t=e.affiliateLinkSelectors)&&void 0!==t&&t.length&&("string"==typeof e.affiliateLinkSelectors&&(e.affiliateLinkSelectors=[e.affiliateLinkSelectors]),e.affiliateLinkSelectors.forEach((function(t){if("string"==typeof t){var i=document.querySelectorAll(t);if(d._affiliateLinksFoundBySelector[t]=i.length,d._affiliateLinksFoundBySelector[t])d._addClickListenersToAffiliateLinks(i),d._addPageChangeListener(),d._articleData=d.getArticleData(e);else{(0,r.waitForNodesInserted)(t,(function(i,n){document.removeEventListener("animationstart",n);var a=document.querySelectorAll(t);d._affiliateLinksFoundBySelector[t]=a.length,d._addClickListenersToAffiliateLinks(a),d._addPageChangeListener(),d._articleData=d.getArticleData(e)}))}}})))},_addPageChangeListener:function(){var e;if(!d._pageChangeListenerAdded){var t=function(){Object.values(d._affiliateLinksFoundBySelector).some((function(e){return e>0}))&&(d._affiliateLinkClicked||d._articleData&&d.pushArticle(d._articleData))};null!==(e=bouncex)&&void 0!==e&&null!==(e=e.website)&&void 0!==e&&e.spa&&bouncex.shouldCheckSpa()?window.addEventListener("spaPageChangeEvent.bx",t):(0,a.addEndPageViewEventListener)(t),d._pageChangeListenerAdded=!0}},_addClickListenersToAffiliateLinks:function(e){e.forEach((function(e){e.addEventListener("click",(function(e){d._affiliateLinkClicked=!0,d.clearArticles()}))}))},getArticleData:function(e){var t=o.default.captureArticle();if(null!=e&&e.titleSelector){var i=document.querySelector(e.titleSelector);null!=i&&i.textContent&&(t.title=i.textContent)}if(null!=e&&e.imageSelector){var n=document.querySelector(e.imageSelector);null!=n&&n.src&&(t.image=n.src)}return t.url||(t.url=window.location.href),t},getAllArticles:function(){var e=d.getStorageKey(),t=window.sessionStorage.getItem(e);return bouncex.parseJSON(t,[])},setArticles:function(e){if(Array.isArray(e)){var t=e.filter((function(e){return"article"===(null==e?void 0:e["@type"])}));t.forEach((function(e){var t;if((null==e||null===(t=e.image)||void 0===t?void 0:t.indexOf("//"))>=0){var i=e.image.split(/\/\/([\s\S]*)/);e.image=i[1]?i[1]:null}}));var i=d.getStorageKey();try{window.sessionStorage.setItem(i,JSON.stringify(t))}catch(e){s.default.error(e)}}},pushArticle:function(e){if("article"===(null==e?void 0:e["@type"])){var t=d.getAllArticles();t.push(e),d.setArticles(t)}},clearArticles:function(){d.setArticles([])},getStorageKey:function(){return"wkndAffiliateArticles"+bouncex.website.id},getLatestArticle:function(){var e=d.getAllArticles();return e.length?e[e.length-1]:{}},hasArticlesStored:function(){return!!d.getAllArticles().length}};t.default=d},3606:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(7424)),r=n(i(8416)),o=n(i(7686)),s=n(i(5754)),d=n(i(1164));function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){(0,r.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var l={init:function(){l.sendArticleViewEvent()},sendArticleViewEvent:function(){var e,t=d.default.captureArticle();if(t&&"article"===(null==t?void 0:t.type)){var i={};(i=Object.keys(t).filter((function(e){return!1===["type","@type"].includes(e)})).reduce((function(e,i){return u(u({},e),{},(0,r.default)({},"article:".concat(i),t[i]))}),i))["article:keywords"]=JSON.stringify(null!==(e=i["article:keywords"])&&void 0!==e?e:[]),o.default.report("article_view",i)}},sendItemEventFromArticle:function(){var e,t,i,n=d.default.captureArticle();if(null!==(e=bouncex)&&void 0!==e&&null!==(e=e.website)&&void 0!==e&&e.gbi_enabled||null!==(t=bouncex)&&void 0!==t&&null!==(t=t.website)&&void 0!==t&&t.gbi2Enabled){var a=d.default.convertArticleToProduct(n);if(a){var r=l.applyItemEventOverrides(a);"string"==typeof r["item:lang"]&&-1!==(null===(i=r["item:lang"])||void 0===i?void 0:i.indexOf("en"))?(o.default.report("item",r),o.default.report("view item",{"item:id":r["item:id"]})):s.default.debug({group:"Article Capture",message:"Article lang must be in English. Not sending Item event"})}}},applyItemEventOverrides:function(e){var t=JSON.parse(JSON.stringify(e));return!Object.keys(l.itemEventDataOverrides).length?(s.default.debug({group:"Article Capture",message:"No overrides registered for the Item Event"}),t):(Object.entries(l.itemEventDataOverrides).forEach((function(e){var i=(0,a.default)(e,2),n=i[0],r=i[1];try{t["item:".concat(n)]=r()}catch(e){s.default.warn({group:"Article Capture",message:'Error while trying to override/add prop "'.concat(n,'" to Item Event'),metadata:e})}})),s.default.debug({group:"Article Capture",message:"Modified Item Event with override functions",metadata:{productOverride:t}}),t)},itemEventDataOverrides:{},addItemEventPropOverride:function(e,t){if("string"==typeof e&&"function"==typeof t){var i=e.toLowerCase();l.itemEventDataOverrides[i]=t}}};t.default=l},2437:(e,t)=>{function i(){this["@type"]="article",this.type=null,this.title=null,this.url=null,this.image=null,this.pubdate=null,this.description=null,this.author=null,this.keywords=null,this.section=null,this.breadcrumbs=null,this.wordCount=null,this.language=null,this.lastmod=null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,i.prototype.properties=["type","title","url","image","pubdate","lastmod","description","author","keywords","section","breadcrumbs","wordCount","language"]},9491:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function e(t){var i=document.querySelector('head meta[name="'.concat(t,'"]'));if(i)return i.getAttribute("content");switch(t){case"language":return document.documentElement.getAttribute("lang");case"pubdate":return e("dateCreated");case"lastmod":return e("dateModified")}return null},n={populate:function(e){e.properties.forEach((function(t){e[t]=e[t]||i(t)})),"string"==typeof e.keywords&&(e.keywords=e.keywords.split(","))}};t.default=n},1023:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(9576)),r=n(i(9491)),o=n(i(6358));t.default={JSONLD:o.default,OpenGraph:a.default,GeneralMetadata:r.default}},6358:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={populate:function(e){var t=document.querySelectorAll('head script[type="application/ld+json"]'),i=[];t.forEach((function(e){var t=JSON.parse(e.innerHTML),n=t["@graph"];n&&Array.isArray(n)?n.forEach((function(e){i.push(e)})):t&&Array.isArray(t)?t.forEach((function(e){i.push(e)})):t&&i.push(t)})),i.forEach((function(t){n(e,t)}))}},n=function(e,t){var i=t["@type"],n=e["@type"];if(i&&(i=i.charAt(0).toLowerCase()+i.slice(1),"article"===n))return"function"==typeof a[i]?a[i](e,t):void 0},a={breadcrumbList:function(e,t){if(Array.isArray(t.itemListElement)){var i=[];t.itemListElement.forEach((function(e){var t=e.item;t&&t.name&&i.push(t.name)})),e.breadcrumbs=e.breadcrumbs||i}},imageObject:function(e,t){t.url&&(e.image=e.image||t.url)},webPage:function(e,t){if(e.title=e.title||t.headline||t.name,e.description=e.description||t.description,e.pubdate=e.pubdate||t.datePublished,e.lastmod=e.lastmod||t.dateModified,e.wordCount=e.wordCount||t.wordCount,e.section=e.section||t.articleSection,t.keywords&&Array.isArray(t.keywords)&&(e.keywords=e.keywords||t.keywords),t.author&&Array.isArray(t.author)){var i=[];t.author.forEach((function(e){e&&e.name&&i.push(e.name)})),i.length>0&&(e.author=e.author||i.join(","))}t.image&&"ImageObject"===t.image["@type"]&&a.imageObject(e,t.image)}};a.blogPosting=a.webPage,a.newsArticle=a.webPage,a.article=a.webPage;t.default=i},9576:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function e(t){var i=document.querySelector('\n    head meta[name="og:'.concat(t,'"],\n    head meta[property="og:').concat(t,'"],\n    head meta[property="article:').concat(t,'"]\n  '));if(i)return i.getAttribute("content");switch(t){case"lastmod":return e("modified_time");case"pubdate":return e("published_time")}return null},n={populate:function(e){e.properties.forEach((function(t){e[t]=e[t]||i(t)}))}};t.default=n},1164:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(1023)),r=n(i(2437)),o=n(i(5754)),s=i(2481),d={isValidURL:function(e){try{return new URL(e),!0}catch(e){return!1}},unsetAuthorIfValidURL:function(e){d.isValidURL(e.author)&&(e.author=null)},captureArticle:function(){var e=new r.default;return d.capture(e),e.language=e.language||"en",e},capture:function(e){Object.values(a.default).forEach((function(t){try{t.populate(e),d.unsetAuthorIfValidURL(e)}catch(e){o.default.error(e)}})),d.sanitizeObject(e)},sanitizeObject:function(e){e.properties.forEach((function(t){"string"==typeof e[t]&&(e[t]=e[t].trim()),Array.isArray(e[t])&&(e[t]=e[t].map((function(e){return"string"==typeof e?e.trim():e}))),null!==e[t]&&void 0!==e[t]&&""!==e[t]||delete e[t]}))},convertArticleToProduct:function(e){var t={"item:id":e.url,"item:copy":e.title,"item:url":e.url,"item:imageurl":e.image,"item:instock":!0,"item:type":"article","item:lang":e.language||"en","item:description":e.description};if(bouncex&&bouncex.pubs&&"function"==typeof bouncex.pubs.convertArticleURLToItemID)t["item:id"]=bouncex.pubs.convertArticleURLToItemID(t["item:id"]);else try{var i=new URL(e.url).pathname;i=(i=i.replace(/(\/index)?\.html$/,"")).replace(/^\//,""),t["item:id"]=i}catch(e){bouncex.err(e)}try{var n=new Date(e.pubdate);t["item:date"]=n.toISOString().substring(0,10)}catch(e){t["item:date"]=new Date(Date.now()).toISOString().substring(0,10)}try{var a=new Date(e.lastmod||e.pubdate);t["item:modify_date"]=a.toISOString().substring(0,10)}catch(e){t["item:modify_date"]=new Date(Date.now()).toISOString().substring(0,10)}t["item:category"]=e.section,t["item:category"]||Array.isArray(e.breadcrumbs)&&e.breadcrumbs.length>0&&(t["item:category"]=e.breadcrumbs[e.breadcrumbs.length-1]);var r=[],d=Object.keys(t).reduce((function(e,i){return t[i]||r.push(i),e&&!!t[i]}),!0);return o.default.debug({group:"Article Capture",message:"Article and Item events",metadata:{allFieldsAreFilledIn:d,missingFields:r,article:e,product:t}}),d&&(0,s.hasFeatureFlag)("NEWSLETTER_IN_A_BOX")?t:null}};t.default=d},2233:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(3513)),r=n(i(3606)),o={init:function(){r.default.init()},affiliateOnsite:a.default,articleCapture:{addItemEventPropOverride:r.default.addItemEventPropOverride,sendItemEventFromArticle:r.default.sendItemEventFromArticle}};t.default=o},134:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(9974)),r=n(i(5754)),o={_articles:[],_constants:{selectors:{group:".bx-group-custom",image:".bx-row-line",headline:".bx-row-text-subheadline"}},_getArticles:function(){return this._articles},_getRequestOptions:function(){var e=this;return{url:e._settings.feedUrl,dataType:e._settings.feedFormat,complete:function(t,i){e._handleResponse(t,i)}}},_getStorageKey:function(){return"bx-recirc-"+bouncex.website.id},_getStoredArticles:function(){var e=this._getStorageKey(),t=window.sessionStorage.getItem(e);return bouncex.parseJSON(t,[])},_getValidArticles:function(e){for(var t=[],i=0;i<e.length;i++)this._isValidArticle(e[i])&&t.push(e[i]);return t},_getValidGroups:function(e){for(var t=e.querySelectorAll(this._constants.selectors.group),i=[],n=0;n<t.length;n++)this._isValidGroup(t[n])&&i.push(t[n]);return i},_handleResponse:function(e,t){if("error"===t)return this.error(null,"error response from article feed");this.log(null,"parsing feed response");var i=this._parseArticles(e);if(!i)return this.error(null,"no articles found while parsing feed response");var n=this._getValidArticles(i);if(!n.length)return this.error(null,"all articles failed validation");this.log(null,n.length+"/"+i.length+" articles passed validation"),this._setArticles(n),this._storeArticles(n)},_isValidGroup:function(e){var t=1===e.querySelectorAll(this._constants.selectors.image).length,i=1===e.querySelectorAll(this._constants.selectors.headline).length,n=1===e.querySelectorAll("a").length;return t&&i&&n},_requestFeed:function(e){this.log(null,"requesting articles from "+e.url),a.default.request(e)},_setArticles:function(e){this._articles=e},_storeArticles:function(e){this.log(null,"storing articles in session storage");var t=this._getStorageKey();try{window.sessionStorage.setItem(t,JSON.stringify(e))}catch(e){this.error(null,e)}},_isValidArticle:function(e){if(!e)return!1;var t=!(!e.link||!bouncex.utils.validate.url(e.link)),i=!(!e.image||!bouncex.utils.validate.url(e.image)),n=!!e.headline;return t&&i&&n},_parseArticles:function(e){switch(this._settings.feedFormat){case"xml":return this._settings.responseParser(e.responseXML);case"json":return this._settings.responseParser(e.responseJSON);default:return this.error(null,"unrecognized feed format type"),!1}},_populateGroup:function(e,t,i){try{var n=t.querySelectorAll(this._constants.selectors.image)[0].firstChild,a=t.querySelectorAll(this._constants.selectors.headline)[0].firstChild,r=t.querySelector("a");n.style.backgroundImage="url("+i.image+")",n.style.backgroundSize="cover",a.textContent=i.headline,r.setAttribute("href",i.link)}catch(t){this.error(e,t)}},_settings:{},_validateSettings:function(){return!!(this._settings.feedFormat&&this._settings.feedUrl&&this._settings.responseParser&&"function"==typeof this._settings.responseParser)},addSettings:function(e){for(var t in e)bouncex.recirc._settings[t]=e[t]},articlesAvailable:function(){return this._articles.length>0},error:function(e,t){this.log(e,t,!0)},init:function(){if(this.isEnabled()&&!this.articlesAvailable()){if(!this._validateSettings())return this.log(null,"settings failed validation");var e=this._getStoredArticles();e&&e.length?(this.log(null,"retrieving articles from session storage"),this._setArticles(e)):(this.log(null,"no articles found in storage; requesting from feed"),this._requestFeed(this._getRequestOptions()))}},isEnabled:function(){return!!this._settings.enabled},log:function(e,t,i){var n={group:"recirc",campaignId:e,message:t};i?r.default.error(n):r.default.info(n)},populateCreative:function(e){if(!this.isEnabled())return!1;if(!this.articlesAvailable())return!1;var t=document.getElementById("bx-campaign-"+e);if(!t)return this.error(e,"no creative found");var i=this._getValidGroups(t),n=this._getArticles();if(i.length&&i.length<=n.length){this.log(e,"populating article groups");for(var a=0;a<i.length;a++)this._populateGroup(e,i[a],n[a])}else i.length&&this.log(e,"not enough articles to populate creative")}};t.default=o},4675:(e,t,i)=>{var n=i(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(5754)),r={setHighEntropyValues:function(){var e;if(null===(e=navigator)||void 0===e||!e.userAgentData)return a.default.info({message:"Client Hints (i.e. userAgentData) not supported",group:"clientHints"}),!1;navigator.userAgentData.getHighEntropyValues(["architecture","bitness","model","fullVersionList","platformVersion"]).then((function(e){r.setDeviceSua(e)})).catch((function(e){a.default.error({message:"Error retrieving client hints ".concat(e),group:"Ads init"})}))},setDeviceSua:function(e){var t=e.fullVersionList.map((function(e){return{brand:e.brand,version:e.version.split(".")}})),i={brand:e.platform,version:e.platformVersion.split(".")};bouncex.state.deviceSua={browsers:t,platform:i,mobile:e.mobile?1:0,architecture:e.architecture,bitness:e.bitness,model:e.model,source:2}}};t.default=r},5295:(e,t)=>{function i(){return a(navigator.language)}function n(){var e;return a(null===(e=document.documentElement)||void 0===e?void 0:e.lang)}function a(e){return e?e.length<=2?e:e.substring(0,2):""}Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceLanguage=i,t.getDeviceOrDocumentLanguage=function(){var e=i();return e||n()},t.getDocumentLanguage=n}},e=>{e.O(0,[179],(()=>{return t=7975,e(e.s=t);var t}));e.O()}]);